import{j as Y,c as we}from"./utils.f2cWa0M5.js";import{a as A,r as K}from"./index.sXsv9c-e.js";import{f as kt}from"./index.LDFW_GCY.js";import{L as Ct}from"./DeepLinkDialog.hhX-uqsX.js";var de=e=>"checkbox"===e.type,ae=e=>e instanceof Date,T=e=>null==e;const it=e=>"object"==typeof e;var S=e=>!T(e)&&!Array.isArray(e)&&it(e)&&!ae(e),at=e=>S(e)&&e.target?de(e.target)?e.target.checked:e.target.value:e,pt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,nt=(e,t)=>e.has(pt(t)),Rt=e=>{const t=e.constructor&&e.constructor.prototype;return S(t)&&t.hasOwnProperty("isPrototypeOf")},Oe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function O(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(Oe&&(e instanceof Blob||e instanceof FileList)||!r&&!S(e))return e;if(t=r?[]:{},r||Rt(e))for(const r in e)e.hasOwnProperty(r)&&(t[r]=O(e[r]));else t=e}return t}var ye=e=>Array.isArray(e)?e.filter(Boolean):[],D=e=>void 0===e,f=(e,t,r)=>{if(!t||!S(e))return r;const s=ye(t.split(/[,[\].]+?/)).reduce(((e,t)=>T(e)?e:e[t]),e);return D(s)||s===e?D(e[t])?r:e[t]:s},$=e=>"boolean"==typeof e;const be={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},q={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},J={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},lt=A.createContext(null),De=()=>A.useContext(lt),Lt=e=>{const{children:t,...r}=e;return A.createElement(lt.Provider,{value:r},t)};var ut=(e,t,r,s=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const a=i;return t._proxyFormState[a]!==q.all&&(t._proxyFormState[a]=!s||q.all),r&&(r[a]=!0),e[a]}});return a},B=e=>S(e)&&!Object.keys(e).length,ot=(e,t,r,s)=>{r(e);const{name:a,...i}=e;return B(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find((e=>t[e]===(!s||q.all)))},me=e=>Array.isArray(e)?e:[e],ct=(e,t,r)=>!e||!t||e===t||me(e).some((e=>e&&(r?e===t:e.startsWith(t)||t.startsWith(e))));function Ue(e){const t=A.useRef(e);t.current=e,A.useEffect((()=>{const r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}}),[e.disabled])}function It(e){const t=De(),{control:r=t.control,disabled:s,name:a,exact:i}=e||{},[n,o]=A.useState(r._formState),l=A.useRef(!0),u=A.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=A.useRef(a);return d.current=a,Ue({disabled:s,next:e=>l.current&&ct(d.current,e.name,i)&&ot(e,u.current,r._updateFormState)&&o({...r._formState,...e}),subject:r._subjects.state}),A.useEffect((()=>(l.current=!0,u.current.isValid&&r._updateValid(!0),()=>{l.current=!1})),[r]),ut(n,r,u.current,!1)}var H=e=>"string"==typeof e,ft=(e,t,r,s,a)=>H(e)?(s&&t.watch.add(e),f(r,e,a)):Array.isArray(e)?e.map((e=>(s&&t.watch.add(e),f(r,e)))):(s&&(t.watchAll=!0),r);function Tt(e){const t=De(),{control:r=t.control,name:s,defaultValue:a,disabled:i,exact:n}=e||{},o=A.useRef(s);o.current=s,Ue({disabled:i,subject:r._subjects.values,next:e=>{ct(o.current,e.name,n)&&u(O(ft(o.current,r._names,e.values||r._formValues,!1,a)))}});const[l,u]=A.useState(r._getWatch(s,a));return A.useEffect((()=>r._removeUnmounted())),l}var Me=e=>/^\w*$/.test(e),dt=e=>ye(e.replace(/["|']|\]/g,"").split(/\.|\[/)),x=(e,t,r)=>{let s=-1;const a=Me(t)?[t]:dt(t),i=a.length,n=i-1;for(;++s<i;){const t=a[s];let i=r;if(s!==n){const r=e[t];i=S(r)||Array.isArray(r)?r:isNaN(+a[s+1])?{}:[]}e[t]=i,e=e[t]}return e};function Ot(e){const t=De(),{name:r,disabled:s,control:a=t.control,shouldUnregister:i}=e,n=nt(a._names.array,r),o=Tt({control:a,name:r,defaultValue:f(a._formValues,r,f(a._defaultValues,r,e.defaultValue)),exact:!0}),l=It({control:a,name:r}),u=A.useRef(a.register(r,{...e.rules,value:o,...$(e.disabled)?{disabled:e.disabled}:{}}));return A.useEffect((()=>{const e=a._options.shouldUnregister||i,t=(e,t)=>{const r=f(a._fields,e);r&&(r._f.mount=t)};if(t(r,!0),e){const e=O(f(a._options.defaultValues,r));x(a._defaultValues,r,e),D(f(a._formValues,r))&&x(a._formValues,r,e)}return()=>{(n?e&&!a._state.action:e)?a.unregister(r):t(r,!1)}}),[r,a,n,i]),A.useEffect((()=>{f(a._fields,r)&&a._updateDisabledField({disabled:s,fields:a._fields,name:r,value:f(a._fields,r)._f.value})}),[s,r,a]),{field:{name:r,value:o,...$(s)||l.disabled?{disabled:l.disabled||s}:{},onChange:A.useCallback((e=>u.current.onChange({target:{value:at(e),name:r},type:be.CHANGE})),[r]),onBlur:A.useCallback((()=>u.current.onBlur({target:{value:f(a._formValues,r),name:r},type:be.BLUR})),[r,a]),ref:e=>{const t=f(a._fields,r);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!f(l.errors,r)},isDirty:{enumerable:!0,get:()=>!!f(l.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!f(l.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!f(l.validatingFields,r)},error:{enumerable:!0,get:()=>f(l.errors,r)}})}}const Ut=e=>e.render(Ot(e));var Mt=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},Qe=e=>({isOnSubmit:!e||e===q.onSubmit,isOnBlur:e===q.onBlur,isOnChange:e===q.onChange,isOnAll:e===q.all,isOnTouch:e===q.onTouched}),Xe=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));const fe=(e,t,r,s)=>{for(const a of r||Object.keys(e)){const r=f(e,a);if(r){const{_f:e,...i}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],a)&&!s)break;if(e.ref&&t(e.ref,e.name)&&!s)break;fe(i,t)}else S(i)&&fe(i,t)}}};var Nt=(e,t,r)=>{const s=ye(f(e,r));return x(s,"root",t[r]),x(e,r,s),e},Ne=e=>"file"===e.type,X=e=>"function"==typeof e,Fe=e=>{if(!Oe)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},_e=e=>H(e),Be=e=>"radio"===e.type,Ve=e=>e instanceof RegExp;const Ye={value:!1,isValid:!1},Ze={value:!0,isValid:!0};var yt=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!D(e[0].attributes.value)?D(e[0].value)||""===e[0].value?Ze:{value:e[0].value,isValid:!0}:Ze:Ye}return Ye};const et={isValid:!1,value:null};var gt=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),et):et;function tt(e,t,r="validate"){if(_e(e)||Array.isArray(e)&&e.every(_e)||$(e)&&!e)return{type:r,message:_e(e)?e:"",ref:t}}var ie=e=>S(e)&&!Ve(e)?e:{value:e,message:""},rt=async(e,t,r,s,a)=>{const{ref:i,refs:n,required:o,maxLength:l,minLength:u,min:d,max:c,pattern:m,validate:y,name:v,valueAsNumber:g,mount:h,disabled:b}=e._f,p=f(t,v);if(!h||b)return{};const _=n?n[0]:i,x=e=>{s&&_.reportValidity&&(_.setCustomValidity($(e)?"":e||""),_.reportValidity())},V={},A=Be(i),F=de(i),w=A||F,k=(g||Ne(i))&&D(i.value)&&D(p)||Fe(i)&&""===i.value||""===p||Array.isArray(p)&&!p.length,O=Mt.bind(null,v,r,V),C=(e,t,r,s=J.maxLength,a=J.minLength)=>{const n=e?t:r;V[v]={type:e?s:a,message:n,ref:i,...O(e?s:a,n)}};if(a?!Array.isArray(p)||!p.length:o&&(!w&&(k||T(p))||$(p)&&!p||F&&!yt(n).isValid||A&&!gt(n).isValid)){const{value:e,message:t}=_e(o)?{value:!!o,message:o}:ie(o);if(e&&(V[v]={type:J.required,message:t,ref:_,...O(J.required,t)},!r))return x(t),V}if(!(k||T(d)&&T(c))){let e,t;const s=ie(c),a=ie(d);if(T(p)||isNaN(p)){const r=i.valueAsDate||new Date(p),n=e=>new Date((new Date).toDateString()+" "+e),o="time"==i.type,l="week"==i.type;H(s.value)&&p&&(e=o?n(p)>n(s.value):l?p>s.value:r>new Date(s.value)),H(a.value)&&p&&(t=o?n(p)<n(a.value):l?p<a.value:r<new Date(a.value))}else{const r=i.valueAsNumber||p&&+p;T(s.value)||(e=r>s.value),T(a.value)||(t=r<a.value)}if((e||t)&&(C(!!e,s.message,a.message,J.max,J.min),!r))return x(V[v].message),V}if((l||u)&&!k&&(H(p)||a&&Array.isArray(p))){const e=ie(l),t=ie(u),s=!T(e.value)&&p.length>+e.value,a=!T(t.value)&&p.length<+t.value;if((s||a)&&(C(s,e.message,t.message),!r))return x(V[v].message),V}if(m&&!k&&H(p)){const{value:e,message:t}=ie(m);if(Ve(e)&&!p.match(e)&&(V[v]={type:J.pattern,message:t,ref:i,...O(J.pattern,t)},!r))return x(t),V}if(y)if(X(y)){const e=tt(await y(p,t),_);if(e&&(V[v]={...e,...O(J.validate,e.message)},!r))return x(e.message),V}else if(S(y)){let e={};for(const s in y){if(!B(e)&&!r)break;const a=tt(await y[s](p,t),_,s);a&&(e={...a,...O(s,a.message)},x(a.message),r&&(V[v]=e))}if(!B(e)&&(V[v]={ref:_,...e},!r))return V}return x(!0),V};function Bt(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=D(e)?s++:e[t[s++]];return e}function Pt(e){for(const t in e)if(e.hasOwnProperty(t)&&!D(e[t]))return!1;return!0}function R(e,t){const r=Array.isArray(t)?t:Me(t)?[t]:dt(t),s=1===r.length?e:Bt(e,r),a=r.length-1,i=r[a];return s&&delete s[i],0!==a&&(S(s)&&B(s)||Array.isArray(s)&&Pt(s))&&R(e,r.slice(0,-1)),e}var Le=()=>{let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}},xe=e=>T(e)||!it(e);function ee(e,t){if(xe(e)||xe(t))return e===t;if(ae(e)&&ae(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const a of r){const r=e[a];if(!s.includes(a))return!1;if("ref"!==a){const e=t[a];if(ae(r)&&ae(e)||S(r)&&S(e)||Array.isArray(r)&&Array.isArray(e)?!ee(r,e):r!==e)return!1}}return!0}var ht=e=>"select-multiple"===e.type,jt=e=>Be(e)||de(e),Ie=e=>Fe(e)&&e.isConnected,$t=e=>S(e)&&Object.values(e).some((e=>e)),vt=e=>{for(const t in e)if(X(e[t]))return!0;return!1};function Ae(e,t={}){const r=Array.isArray(e);if(S(e)||r)for(const r in e)Array.isArray(e[r])||S(e[r])&&!vt(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Ae(e[r],t[r])):T(e[r])||(t[r]=!0);return t}function mt(e,t,r){const s=Array.isArray(e);if(S(e)||s)for(const s in e)Array.isArray(e[s])||S(e[s])&&!vt(e[s])?D(t)||xe(r[s])?r[s]=Array.isArray(e[s])?Ae(e[s],[]):{...Ae(e[s])}:mt(e[s],T(t)?{}:t[s],r[s]):r[s]=!ee(e[s],t[s]);return r}var ve=(e,t)=>mt(e,t,Ae(t)),_t=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>D(e)?e:t?""===e?NaN:e&&+e:r&&H(e)?new Date(e):s?s(e):e;function Te(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return Ne(t)?t.files:Be(t)?gt(e.refs).value:ht(t)?[...t.selectedOptions].map((({value:e})=>e)):de(t)?yt(e.refs).value:_t(D(t.value)?e.ref.value:t.value,e)}var qt=(e,t,r,s)=>{const a={};for(const r of e){const e=f(t,r);e&&x(a,r,e._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}},ce=e=>D(e)?e:Ve(e)?e.source:S(e)?Ve(e.value)?e.value.source:e.value:e,Wt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function st(e,t,r){const s=f(e,r);if(s||Me(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),i=f(t,s),n=f(e,s);if(i&&!Array.isArray(i)&&r!==s)return{name:r};if(n&&n.type)return{name:s,error:n};a.pop()}return{name:r}}var Ht=(e,t,r,s,a)=>!a.isOnAll&&(!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:!(r?s.isOnChange:a.isOnChange)||e),Kt=(e,t)=>!ye(f(e,t)).length&&R(e,t);const Gt={mode:q.onSubmit,reValidateMode:q.onChange,shouldFocusError:!0};function zt(e={}){let t,r={...Gt,...e},s={submitCount:0,isDirty:!1,isLoading:X(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},a={},i=(S(r.defaultValues)||S(r.values))&&O(r.defaultValues||r.values)||{},n=r.shouldUnregister?{}:O(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},c={values:Le(),array:Le(),state:Le()},m=Qe(r.mode),y=Qe(r.reValidateMode),v=r.criteriaMode===q.all,g=async e=>{if(d.isValid||e){const e=r.resolver?B((await V()).errors):await A(a,!0);e!==s.isValid&&c.state.next({isValid:e})}},h=(e,t)=>{(d.isValidating||d.validatingFields)&&(t.forEach((t=>{x(s.validatingFields,t,e)})),s.isValidating=$t(s.validatingFields),c.state.next({validatingFields:s.validatingFields,isValidating:s.isValidating}))},b=(e,t,r,s)=>{const l=f(a,e);if(l){const a=f(n,e,D(r)?f(i,e):r);D(a)||s&&s.defaultChecked||t?x(n,e,t?a:Te(l._f)):k(e,a),o.mount&&g()}},p=(e,t,r,n,o)=>{let l=!1,u=!1;const m={name:e},y=!(!f(a,e)||!f(a,e)._f.disabled);if(!r||n){d.isDirty&&(u=s.isDirty,s.isDirty=m.isDirty=F(),l=u!==m.isDirty);const r=y||ee(f(i,e),t);u=!(y||!f(s.dirtyFields,e)),r||y?R(s.dirtyFields,e):x(s.dirtyFields,e,!0),m.dirtyFields=s.dirtyFields,l=l||d.dirtyFields&&u!==!r}if(r){const t=f(s.touchedFields,e);t||(x(s.touchedFields,e,r),m.touchedFields=s.touchedFields,l=l||d.touchedFields&&t!==r)}return l&&o&&c.state.next(m),l?m:{}},_=(r,a,i,n)=>{const o=f(s.errors,r),l=d.isValid&&$(a)&&s.isValid!==a;if(e.delayError&&i?(t=(e=>t=>{clearTimeout(u),u=setTimeout(e,t)})((()=>((e,t)=>{x(s.errors,e,t),c.state.next({errors:s.errors})})(r,i))),t(e.delayError)):(clearTimeout(u),t=null,i?x(s.errors,r,i):R(s.errors,r)),(i?!ee(o,i):o)||!B(n)||l){const e={...n,...l&&$(a)?{isValid:a}:{},errors:s.errors,name:r};s={...s,...e},c.state.next(e)}h(!1,Object.keys(s.validatingFields).filter((e=>e===r)))},V=async e=>r.resolver(n,r.context,qt(e||l.mount,a,r.criteriaMode,r.shouldUseNativeValidation)),A=async(e,t,a={valid:!0})=>{for(const i in e){const o=e[i];if(o){const{_f:e,...i}=o;if(e){const i=l.array.has(e.name),u=await rt(o,n,v,r.shouldUseNativeValidation&&!t,i);if(u[e.name]&&(a.valid=!1,t))break;!t&&(f(u,e.name)?i?Nt(s.errors,u,e.name):x(s.errors,e.name,u[e.name]):R(s.errors,e.name))}i&&await A(i,t,a)}}return a.valid},F=(e,t)=>(e&&t&&x(n,e,t),!ee(U(),i)),w=(e,t,r)=>ft(e,l,{...o.mount?n:D(t)?i:H(e)?{[e]:t}:t},r,t),k=(e,t,r={})=>{const s=f(a,e);let i=t;if(s){const r=s._f;r&&(!r.disabled&&x(n,e,_t(t,r)),i=Fe(r.ref)&&T(t)?"":t,ht(r.ref)?[...r.ref.options].forEach((e=>e.selected=i.includes(e.value))):r.refs?de(r.ref)?r.refs.length>1?r.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(i)?!!i.find((t=>t===e.value)):i===e.value))):r.refs[0]&&(r.refs[0].checked=!!i):r.refs.forEach((e=>e.checked=e.value===i)):Ne(r.ref)?r.ref.value="":(r.ref.value=i,r.ref.type||c.values.next({name:e,values:{...n}})))}(r.shouldDirty||r.shouldTouch)&&p(e,i,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&L(e)},C=(e,t,r)=>{for(const s in t){const i=t[s],n=`${e}.${s}`,o=f(a,n);!l.array.has(e)&&xe(i)&&(!o||o._f)||ae(i)?k(n,i,r):C(n,i,r)}},j=(e,t,r={})=>{const u=f(a,e),m=l.array.has(e),y=O(t);x(n,e,y),m?(c.array.next({name:e,values:{...n}}),(d.isDirty||d.dirtyFields)&&r.shouldDirty&&c.state.next({name:e,dirtyFields:ve(i,n),isDirty:F(e,y)})):!u||u._f||T(y)?k(e,y,r):C(e,y,r),Xe(e,l)&&c.state.next({...s}),c.values.next({name:o.mount?e:void 0,values:{...n}})},N=async e=>{const i=e.target;let o=i.name,u=!0;const b=f(a,o),F=e=>{u=Number.isNaN(e)||e===f(n,o,e)};if(b){let S,D;const w=i.type?Te(b._f):at(e),k=e.type===be.BLUR||e.type===be.FOCUS_OUT,O=!Wt(b._f)&&!r.resolver&&!f(s.errors,o)&&!b._f.deps||Ht(k,f(s.touchedFields,o),s.isSubmitted,y,m),T=Xe(o,l,k);x(n,o,w),k?(b._f.onBlur&&b._f.onBlur(e),t&&t(0)):b._f.onChange&&b._f.onChange(e);const C=p(o,w,k,!1),j=!B(C)||T;if(!k&&c.values.next({name:o,type:e.type,values:{...n}}),O)return d.isValid&&g(),j&&c.state.next({name:o,...T?{}:C});if(!k&&T&&c.state.next({...s}),h(!0,[o]),r.resolver){const{errors:e}=await V([o]);if(F(w),u){const t=st(s.errors,a,o),r=st(e,a,t.name||o);S=r.error,o=r.name,D=B(e)}}else S=(await rt(b,n,v,r.shouldUseNativeValidation))[o],F(w),u&&(S?D=!1:d.isValid&&(D=await A(a,!0)));u&&(b._f.deps&&L(b._f.deps),_(o,D,S,C))}},E=(e,t)=>{if(f(s.errors,t)&&e.focus)return e.focus(),1},L=async(e,t={})=>{let i,n;const o=me(e);if(h(!0,o),r.resolver){const t=await(async e=>{const{errors:t}=await V(e);if(e)for(const r of e){const e=f(t,r);e?x(s.errors,r,e):R(s.errors,r)}else s.errors=t;return t})(D(e)?e:o);i=B(t),n=e?!o.some((e=>f(t,e))):i}else e?(n=(await Promise.all(o.map((async e=>{const t=f(a,e);return await A(t&&t._f?{[e]:t}:t)})))).every(Boolean),(n||s.isValid)&&g()):n=i=await A(a);return c.state.next({...!H(e)||d.isValid&&i!==s.isValid?{}:{name:e},...r.resolver||!e?{isValid:i}:{},errors:s.errors,isValidating:!1}),t.shouldFocus&&!n&&fe(a,E,e?o:l.mount),n},U=e=>{const t={...i,...o.mount?n:{}};return D(e)?t:H(e)?f(t,e):e.map((e=>f(t,e)))},I=(e,t)=>({invalid:!!f((t||s).errors,e),isDirty:!!f((t||s).dirtyFields,e),isTouched:!!f((t||s).touchedFields,e),isValidating:!!f((t||s).validatingFields,e),error:f((t||s).errors,e)}),M=(e,t,r)=>{const i=(f(a,e,{_f:{}})._f||{}).ref;x(s.errors,e,{...t,ref:i}),c.state.next({name:e,errors:s.errors,isValid:!1}),r&&r.shouldFocus&&i&&i.focus&&i.focus()},Y=(e,t={})=>{for(const o of e?me(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(R(a,o),R(n,o)),!t.keepError&&R(s.errors,o),!t.keepDirty&&R(s.dirtyFields,o),!t.keepTouched&&R(s.touchedFields,o),!t.keepIsValidating&&R(s.validatingFields,o),!r.shouldUnregister&&!t.keepDefaultValue&&R(i,o);c.values.next({values:{...n}}),c.state.next({...s,...t.keepDirty?{isDirty:F()}:{}}),!t.keepIsValid&&g()},J=({disabled:e,name:t,field:r,fields:s,value:a})=>{if($(e)){const i=e?void 0:D(a)?Te(r?r._f:f(s,t)._f):a;x(n,t,i),p(t,i,!1,!1,!0)}},K=(e,t={})=>{let s=f(a,e);const n=$(t.disabled);return x(a,e,{...s||{},_f:{...s&&s._f?s._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),s?J({field:s,disabled:t.disabled,name:e,value:t.value}):b(e,!0,t.value),{...n?{disabled:t.disabled}:{},...r.progressive?{required:!!t.required,min:ce(t.min),max:ce(t.max),minLength:ce(t.minLength),maxLength:ce(t.maxLength),pattern:ce(t.pattern)}:{},name:e,onChange:N,onBlur:N,ref:n=>{if(n){K(e,t),s=f(a,e);const r=D(n.value)&&n.querySelectorAll&&n.querySelectorAll("input,select,textarea")[0]||n,o=jt(r),l=s._f.refs||[];if(o?l.find((e=>e===r)):r===s._f.ref)return;x(a,e,{_f:{...s._f,...o?{refs:[...l.filter(Ie),r,...Array.isArray(f(i,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),b(e,!1,void 0,r)}else s=f(a,e,{}),s._f&&(s._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!nt(l.array,e)||!o.action)&&l.unMount.add(e)}}},P=()=>r.shouldFocusError&&fe(a,E,l.mount),W=(e,t)=>async i=>{let o;i&&(i.preventDefault&&i.preventDefault(),i.persist&&i.persist());let l=O(n);if(c.state.next({isSubmitting:!0}),r.resolver){const{errors:e,values:t}=await V();s.errors=e,l=t}else await A(a);if(R(s.errors,"root"),B(s.errors)){c.state.next({errors:{}});try{await e(l,i)}catch(e){o=e}}else t&&await t({...s.errors},i),P(),setTimeout(P);if(c.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:B(s.errors)&&!o,submitCount:s.submitCount+1,errors:s.errors}),o)throw o},Q=(t,r={})=>{const u=t?O(t):i,m=O(u),y=B(t),v=y?i:m;if(r.keepDefaultValues||(i=u),!r.keepValues){if(r.keepDirtyValues)for(const e of l.mount)f(s.dirtyFields,e)?x(v,e,f(n,e)):j(e,f(v,e));else{if(Oe&&D(t))for(const e of l.mount){const t=f(a,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Fe(e)){const t=e.closest("form");if(t){t.reset();break}}}}a={}}n=e.shouldUnregister?r.keepDefaultValues?O(i):{}:O(v),c.array.next({values:{...v}}),c.values.next({values:{...v}})}l={mount:r.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!r.keepIsValid||!!r.keepDirtyValues,o.watch=!!e.shouldUnregister,c.state.next({submitCount:r.keepSubmitCount?s.submitCount:0,isDirty:!y&&(r.keepDirty?s.isDirty:!(!r.keepDefaultValues||ee(t,i))),isSubmitted:!!r.keepIsSubmitted&&s.isSubmitted,dirtyFields:y?[]:r.keepDirtyValues?r.keepDefaultValues&&n?ve(i,n):s.dirtyFields:r.keepDefaultValues&&t?ve(i,t):{},touchedFields:r.keepTouched?s.touchedFields:{},errors:r.keepErrors?s.errors:{},isSubmitSuccessful:!!r.keepIsSubmitSuccessful&&s.isSubmitSuccessful,isSubmitting:!1})},Z=(e,t)=>Q(X(e)?e(n):e,t);return{control:{register:K,unregister:Y,getFieldState:I,handleSubmit:W,setError:M,_executeSchema:V,_getWatch:w,_getDirty:F,_updateValid:g,_removeUnmounted:()=>{for(const e of l.unMount){const t=f(a,e);t&&(t._f.refs?t._f.refs.every((e=>!Ie(e))):!Ie(t._f.ref))&&Y(e)}l.unMount=new Set},_updateFieldArray:(e,t=[],r,l,u=!0,m=!0)=>{if(l&&r){if(o.action=!0,m&&Array.isArray(f(a,e))){const t=r(f(a,e),l.argA,l.argB);u&&x(a,e,t)}if(m&&Array.isArray(f(s.errors,e))){const t=r(f(s.errors,e),l.argA,l.argB);u&&x(s.errors,e,t),Kt(s.errors,e)}if(d.touchedFields&&m&&Array.isArray(f(s.touchedFields,e))){const t=r(f(s.touchedFields,e),l.argA,l.argB);u&&x(s.touchedFields,e,t)}d.dirtyFields&&(s.dirtyFields=ve(i,n)),c.state.next({name:e,isDirty:F(e,t),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else x(n,e,t)},_updateDisabledField:J,_getFieldArray:t=>ye(f(o.mount?n:i,t,e.shouldUnregister?f(i,t,[]):[])),_reset:Q,_resetDefaultValues:()=>X(r.defaultValues)&&r.defaultValues().then((e=>{Z(e,r.resetOptions),c.state.next({isLoading:!1})})),_updateFormState:e=>{s={...s,...e}},_disableForm:e=>{$(e)&&(c.state.next({disabled:e}),fe(a,((t,r)=>{let s=e;const i=f(a,r);i&&$(i._f.disabled)&&(s||(s=i._f.disabled)),t.disabled=s}),0,!1))},_subjects:c,_proxyFormState:d,_setErrors:e=>{s.errors=e,c.state.next({errors:s.errors,isValid:!1})},get _fields(){return a},get _formValues(){return n},get _state(){return o},set _state(e){o=e},get _defaultValues(){return i},get _names(){return l},set _names(e){l=e},get _formState(){return s},set _formState(e){s=e},get _options(){return r},set _options(e){r={...r,...e}}},trigger:L,register:K,handleSubmit:W,watch:(e,t)=>X(e)?c.values.subscribe({next:r=>e(w(void 0,t),r)}):w(e,t,!0),setValue:j,getValues:U,reset:Z,resetField:(e,t={})=>{f(a,e)&&(D(t.defaultValue)?j(e,O(f(i,e))):(j(e,t.defaultValue),x(i,e,O(t.defaultValue))),t.keepTouched||R(s.touchedFields,e),t.keepDirty||(R(s.dirtyFields,e),s.isDirty=t.defaultValue?F(e,O(f(i,e))):F()),t.keepError||(R(s.errors,e),d.isValid&&g()),c.state.next({...s}))},clearErrors:e=>{e&&me(e).forEach((e=>R(s.errors,e))),c.state.next({errors:e?s.errors:{}})},unregister:Y,setError:M,setFocus:(e,t={})=>{const r=f(a,e),s=r&&r._f;if(s){const e=s.refs?s.refs[0]:s.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:I}}function lr(e={}){const t=A.useRef(),r=A.useRef(),[s,a]=A.useState({isDirty:!1,isValidating:!1,isLoading:X(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:X(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...zt(e),formState:s});const i=t.current.control;return i._options=e,Ue({subject:i._subjects.state,next:e=>{ot(e,i._proxyFormState,i._updateFormState,!0)&&a({...i._formState})}}),A.useEffect((()=>i._disableForm(e.disabled)),[i,e.disabled]),A.useEffect((()=>{if(i._proxyFormState.isDirty){const e=i._getDirty();e!==s.isDirty&&i._subjects.state.next({isDirty:e})}}),[i,s.isDirty]),A.useEffect((()=>{e.values&&!ee(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,a((e=>({...e})))):i._resetDefaultValues()}),[e.values,i]),A.useEffect((()=>{e.errors&&i._setErrors(e.errors)}),[e.errors,i]),A.useEffect((()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()})),A.useEffect((()=>{e.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})}),[e.shouldUnregister,i]),t.current.formState=ut(s,i),t.current}const ur=Lt,bt=K.createContext({}),or=({...e})=>Y.jsx(bt.Provider,{value:{name:e.name},children:Y.jsx(Ut,{...e})}),Se=()=>{const e=K.useContext(bt),t=K.useContext(Ft),{getFieldState:r,formState:s}=De(),a=r(e.name,s);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},Ft=K.createContext({}),Jt=K.forwardRef((({className:e,...t},r)=>{const s=K.useId();return Y.jsx(Ft.Provider,{value:{id:s},children:Y.jsx("div",{ref:r,className:we("space-y-2",e),...t})})}));Jt.displayName="FormItem";const Qt=K.forwardRef((({className:e,...t},r)=>{const{error:s,formItemId:a}=Se();return Y.jsx(Ct,{ref:r,className:we(s&&"text-destructive",e),htmlFor:a,...t})}));Qt.displayName="FormLabel";const Xt=K.forwardRef((({...e},t)=>{const{error:r,formItemId:s,formDescriptionId:a,formMessageId:i}=Se();return Y.jsx(kt,{ref:t,id:s,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...e})}));Xt.displayName="FormControl";const Yt=K.forwardRef((({className:e,...t},r)=>{const{formDescriptionId:s}=Se();return Y.jsx("p",{ref:r,id:s,className:we("text-[0.8rem] text-muted-foreground",e),...t})}));Yt.displayName="FormDescription";const Zt=K.forwardRef((({className:e,children:t,...r},s)=>{const{error:a,formMessageId:i}=Se(),n=a?String(a?.message):t;return n?Y.jsx("p",{ref:s,id:i,className:we("text-[0.8rem] font-medium text-destructive",e),...r,children:n}):null}));Zt.displayName="FormMessage";export{ur as F,or as a,Jt as b,Qt as c,Xt as d,Yt as e,Zt as f,lr as u};