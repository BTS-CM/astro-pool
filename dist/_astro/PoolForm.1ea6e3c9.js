import{y as ss,v as as,w as ts,x as ls,$ as Ce,u as rs,r as Ae,z as $e,h as Be,i as Te,j as e,I as L,C as _,b as S,c as w,d as D,k as v,A as is,D as ne,m as oe,B,n as ce,o as de,p as he,q as me,f as ns}from"./CurrentUser.5db6b464.js";import{r as i}from"./index.178a5b5e.js";import{F as os}from"./fuse.a1032ea1.js";import{u as cs,F as ds,a as O,b as M,c as I,d as q,e as T,f as U}from"./form.833fed8f.js";import{F as ue}from"./index.esm.87f78e52.js";import{D as hs,L as Z}from"./DeepLinkDialog.a23ef2f9.js";import{B as R}from"./badge.ea92ff47.js";import{S as Fe}from"./scroll-area.d286953c.js";import{P as ms,M as xe,S as y}from"./MarketAssetCard.81220af9.js";import{T as us}from"./toggle.9b8b1846.js";import{S as xs,a as ps,b as bs,c as js,d as fs}from"./select.1d3bd7b0.js";import{h as pe,T as gs,a as ys,c as Q,e as Pe,b as Ee}from"./common.ea352216.js";import{A as Ns,a as _s}from"./avatar.51a23f2b.js";import{a as be,b as Le}from"./CardRow.a58bb11b.js";import{c as Ss}from"./User.5c3d6661.js";import{E as je}from"./ExternalLink.14186860.js";import"./index.6a2b73ba.js";import"./index.d083df98.js";const[ws]=ss({fetcher:async(k,h)=>{const N=await fetch(`http://localhost:8080/api/getObjects/${k}`,{method:"POST",body:JSON.stringify([h])});if(!N||!N.ok){console.log("Failed to fetch pool details");return}let a;try{a=await N.json()}catch(b){console.log({e:b,response:N});return}if(!a||!a.result){console.log("Failed to fetch pool data");return}if(a&&a.result){console.log("Fetched pool details");const b=as(ts(a.result,!0)),c=JSON.parse(ls(b));return c&&c.length?c[0]:null}}});function Us(){const k=cs({defaultValues:{account:""}}),[h,N]=i.useState(""),a=i.useSyncExternalStore(Ce.subscribe,Ce.get,()=>!0);rs(a&&a.chain?a.chain:"bitshares",["marketSearch","assets","pools","globalParams"]);const b=i.useSyncExternalStore(Ae.subscribe,Ae.get,()=>!0),c=i.useSyncExternalStore($e.subscribe,$e.get,()=>!0),z=i.useSyncExternalStore(Be.subscribe,Be.get,()=>!0),X=i.useSyncExternalStore(Te.subscribe,Te.get,()=>!0),[fe,Oe]=i.useState();i.useEffect(()=>{if(X&&X.length){const l=X.find(r=>r[0]===63),n=pe(l[1].fee,5);Oe(n)}},[X]);const[V,ge]=i.useState("asset"),G=i.useMemo(()=>!c||!c.length?null:new os(c,{includeScore:!0,threshold:.2,keys:V==="asset"?["asset_a_symbol","asset_b_symbol"]:["share_asset_symbol"]}),[c,V]),[Me,ye]=i.useState(!1),[W,Ie]=i.useState(),[A,ee]=i.useState();i.useEffect(()=>{if(G&&W){const l=G.search(W);ee(l)}},[G,W]);const Ne=({index:l,style:n})=>{const r=A[l].item;return e.jsxs("div",{style:{...n},className:"grid grid-cols-12",onClick:()=>{console.log("AAA"),N(r.id),ye(!1),ee()},children:[e.jsx("div",{className:"col-span-2",children:r.id}),e.jsx("div",{className:"col-span-3",children:r.share_asset_symbol}),e.jsxs("div",{className:"col-span-3",children:[r.asset_a_symbol," (",r.asset_a_id,")"]}),e.jsxs("div",{className:"col-span-3",children:[r.asset_b_symbol," (",r.asset_b_id,")"]}),e.jsxs("div",{className:"col-span-1",children:[r.taker_fee_percent/100,"%"]})]},`acard-${r.id}`)},_e={backgroundColor:"#252526",color:"white"};i.useEffect(()=>{async function l(){if(window.location.search){console.log("Parsing url params");const n=new URLSearchParams(window.location.search),r=Object.fromEntries(n.entries()),o=r&&r.pool?r.pool:null;if(!o||!o.length){console.log("Invalid pool parameters"),N("1.19.0");return}if(o&&o.length&&!o.includes("1.19.")){console.log("Invalid pool parameters"),N("1.19.0");return}if(!(c&&c.length?c.map(u=>u.id):[]).includes(o)){console.log("Replacing unknown pool with first pool in list"),N("1.19.0");return}N(o)}}c&&c.length&&l()},[c]);const[f,Se]=i.useState(0),[d,qe]=i.useState(),[s,se]=i.useState(""),[t,ae]=i.useState(""),[Re,Y]=i.useState(!1),Je=Re?{transition:"transform 0.5s",transform:"rotate(360deg)"}:{};i.useEffect(()=>{if(c&&h&&b){const l=c.find(o=>o.id===h);if(!l){console.log("Invalid pool");return}qe(l);const n=b.find(o=>o.id===l.asset_a_id),r=b.find(o=>o.id===l.asset_b_id);se(n),ae(r),Se(1)}},[h,c,b]);const[m,Ue]=i.useState();i.useEffect(()=>{let l;return a&&a.chain&&d&&(l=ws([a.chain,d.id]).subscribe(({data:r,error:o,loading:g})=>{if(r&&!o&&!g){let u=r;u.asset_a_symbol=s.symbol,u.asset_a_precision=s.precision,u.asset_b_symbol=t.symbol,u.asset_b_precision=t.precision,u.share_asset_symbol=d.share_asset_symbol,u.readable_balance_a=`${pe(u.balance_a,s.precision)} ${s.symbol}`,u.readable_balance_b=`${pe(u.balance_b,t.precision)} ${t.symbol}`,u.share_asset_details=b.find(P=>P.id===u.share_asset),Ue(u)}})),()=>{l&&l()}},[a,d,s,t,b]);const[te,ze]=i.useState(null),[le,Xe]=i.useState(null),[we,Ve]=i.useState(null),[ve,Ye]=i.useState(null),[ke,He]=i.useState(null);i.useEffect(()=>{let l,n,r,o,g;if(a&&a.id&&s&&t&&d){l=be([a.chain,s.id.replace("1.3.","2.3.")]).subscribe(({data:x,error:j,loading:p})=>{x&&!j&&!p&&ze(x)}),n=be([a.chain,t.id.replace("1.3.","2.3.")]).subscribe(({data:x,error:j,loading:p})=>{x&&!j&&!p&&Xe(x)});const C=b.find(x=>x.symbol===d.share_asset_symbol);r=be([a.chain,C.id.replace("1.3.","2.3.")]).subscribe(({data:x,error:j,loading:p})=>{x&&!j&&!p&&Ve(x)}),s.bitasset_data_id&&(o=Le([a.chain,s.bitasset_data_id]).subscribe(({data:j,error:p,loading:E})=>{j&&!p&&!E&&Ye(j)})),t.bitasset_data_id&&(g=Le([a.chain,t.bitasset_data_id]).subscribe(({data:j,error:p,loading:E})=>{j&&!p&&!E&&He(j)}))}return()=>{l&&l(),n&&n(),r&&r(),o&&o(),g&&g()}},[a,s,t,d,b]);const[J,Ke]=i.useState();i.useEffect(()=>{let l;return a&&a.id&&s&&t&&(l=Ss([a.chain,a.id]).subscribe(({data:r,error:o,loading:g})=>{r&&!o&&!g&&Ke(r)})),()=>{l&&l()}},[a,s,t]);const F=i.useMemo(()=>{if(s&&t&&m){let l=function(){if(C===0)return 0;if(C>0)return Math.min(Number(x),Math.ceil(Number(f)*Number(g)*(Number(C)/1e4)))},n=function(){if(K===0)return 0;if(K>0)return Math.min(Number(j),Math.ceil(Number(f)*Number(P)*(Number(K)/1e4)))},r=function(){return typeof p>"u"&&C>0?Number(C)/1e4:typeof p>"u"&&C===0?0:Number(p)/1e4};console.log("Calculating the amount the user can buy");let o=Number(m.balance_a),g=Number(10**s.precision),u=Number(m.balance_b),P=Number(10**t.precision);const C=s.market_fee_percent,K=t.market_fee_percent,x=s.max_market_fee,j=t.max_market_fee,p=m.taker_fee_percent;let E=Number(r()),re;if(s&&d&&s.id===d.asset_a_id){let $=Number(u)-Math.ceil(Number(u)*Number(o)/(Number(o)+(Number(f)*Number(g)-Number(l())))),ie=Number($)*Number(p)/1e4;re=(Number($)-Math.floor(Number(ie))-Math.ceil(Math.min(Number(j),Math.ceil(Number($)*Number(E)))))/Number(P)}else{let $=Number(o)-Math.ceil(Number(o)*Number(u)/(Number(u)+(Number(f)*Number(P)-Number(n())))),ie=Number($)*Number(p)/1e4;re=(Number($)-Math.floor(Number(ie))-Math.ceil(Math.min(Number(x),Math.ceil(Number($)*Number(E)))))/Number(g)}return re}},[f,s,t,m]),[Ze,Qe]=i.useState();i.useEffect(()=>{Qe(e.jsx(L,{readOnly:!0,value:F??0,disabled:!0,className:"mb-3"}))},[F]);const[H,De]=i.useState(!1),[Ge,We]=i.useState("default_pool_key");i.useEffect(()=>{h&&h.length&&window.history.replaceState({},"",`?pool=${h}`),We(`pool_key${Date.now()}`)},[h]);const es=({index:l,style:n})=>{const r=c[l];return e.jsx(fs,{value:r.id,style:n,children:`${r.id} - ${r.share_asset_symbol} - ${r.asset_a_symbol}:${r.asset_b_symbol}`})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"container mx-auto mt-5 mb-5",children:[e.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.jsxs(_,{className:"p-2",children:[e.jsxs(S,{children:[e.jsx(w,{children:"Bitshares Liquidity Pool Exchange"}),e.jsx(D,{children:"Easily swap between Bitshares assets using one of these user created liquidity pools."})]}),e.jsxs(v,{children:[c?null:e.jsx("p",{children:"Loading pool data"}),b?null:e.jsx("p",{children:"Loading asset data"}),c&&b?e.jsxs(e.Fragment,{children:[e.jsx(ds,{...k,children:e.jsxs("form",{onSubmit:()=>{De(!0),event.preventDefault()},children:[e.jsx(O,{control:k.control,name:"account",render:({field:l})=>e.jsxs(M,{children:[e.jsx(I,{children:"Account"}),e.jsx(q,{children:e.jsxs("div",{className:"grid grid-cols-8",children:[e.jsx("div",{className:"col-span-1 ml-5",children:a&&a.username?e.jsx(is,{size:40,name:a.username,extra:"Target",expression:{eye:"normal",mouth:"open"},colors:["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]}):e.jsx(Ns,{children:e.jsx(_s,{children:"?"})})}),e.jsx("div",{className:"col-span-7",children:e.jsx(L,{disabled:!0,readOnly:!0,placeholder:"Bitshares account (1.2.x)",className:"mb-3 mt-1",value:`${a.username} (${a.id})`})})]})}),e.jsx(T,{})]})}),e.jsx(O,{control:k.control,name:"pool",render:({field:l})=>e.jsxs(M,{children:[e.jsx(I,{children:"Liquidity pool"}),e.jsx(U,{style:{marginTop:"0px"},children:m?"This is the liquidity pool you have chosen for your asset swap":"Select a liquidity pool to continue with your asset swap"}),e.jsx(q,{onChange:n=>{N(n.target.value)},children:e.jsxs("div",{className:"grid grid-cols-5 mt-3",children:[e.jsx("div",{className:"mt-1 col-span-4",children:e.jsxs(xs,{children:[e.jsx(ps,{className:"mb-3",children:e.jsx(bs,{placeholder:d?`${d.id} - ${d.share_asset_symbol} - ${d.asset_a_symbol}:${d.asset_b_symbol}`:"Select a pool.."})}),e.jsx(js,{className:"bg-white",children:c&&c.length?e.jsx(ue,{height:150,itemCount:c.length,itemSize:35,className:"w-full",initialScrollOffset:c.map(n=>n.id).indexOf(h)*35,children:es}):null})]},Ge)}),e.jsx("div",{className:"text-gray-500 text-right col-span-1 ml-3",children:e.jsxs(ne,{open:Me,onOpenChange:n=>{n||ee(),ye(n)},children:[e.jsx(oe,{asChild:!0,children:e.jsx(B,{variant:"outline",className:"h-9 mt-1 p-3 w-full",children:"Search"})}),e.jsxs(ce,{className:"sm:max-w-[900px] bg-white",children:[e.jsxs(de,{children:[e.jsx(he,{children:"Search for a liquidity pool"}),e.jsx(me,{children:"Select a search result to proceed with your desired asset swap."})]}),e.jsx("div",{className:"grid grid-cols-1",children:e.jsx("div",{className:"col-span-1",children:e.jsxs(gs,{defaultValue:"asset",children:[e.jsxs(ys,{className:"grid max-w-[400px] grid-cols-2 mb-1 gap-3",children:[V==="asset"?e.jsx(Q,{style:_e,value:"asset",children:"Swappable assets"}):e.jsx(Q,{value:"asset",onClick:()=>ge("asset"),children:"Swappable assets"}),V==="share"?e.jsx(Q,{style:_e,value:"share",children:"Pool share asset"}):e.jsx(Q,{value:"share",onClick:()=>ge("share"),children:"Pool share asset"})]}),e.jsx(L,{name:"assetSearch",placeholder:"Enter search text",className:"mb-3 max-w-[400px]",onChange:n=>{Ie(n.target.value),n.preventDefault(),n.stopPropagation()}}),e.jsx(Pe,{value:"share",children:A&&A.length?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-2",children:"ID"}),e.jsx("div",{className:"col-span-3",children:e.jsx("b",{children:"Share asset"})}),e.jsx("div",{className:"col-span-3",children:"Asset A"}),e.jsx("div",{className:"col-span-3",children:"Asset B"}),e.jsx("div",{className:"col-span-1",children:"Taker Fee"})]}),e.jsx(ue,{height:400,itemCount:A.length,itemSize:45,className:"w-full",children:Ne})]}):null}),e.jsx(Pe,{value:"asset",children:A&&A.length?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-2",children:"ID"}),e.jsx("div",{className:"col-span-3",children:"Share asset"}),e.jsx("div",{className:"col-span-3",children:e.jsx("b",{children:"Asset A"})}),e.jsx("div",{className:"col-span-3",children:e.jsx("b",{children:"Asset B"})}),e.jsx("div",{className:"col-span-1",children:"Taker Fee"})]}),e.jsx(ue,{height:400,itemCount:A.length,itemSize:45,className:"w-full",children:Ne})]}):null})]})})})]})]})})]})}),e.jsx(T,{})]})}),e.jsx("div",{className:"grid grid-cols-11 gap-5 mt-1 mb-1",children:h&&m&&s&&t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-5",children:e.jsxs(_,{children:[e.jsx(S,{className:"pb-0",children:e.jsxs(w,{className:"text-sm pt-0",children:["Swappable"," ",e.jsx(je,{classnamecontents:"text-blue-500",type:"text",text:s.symbol,hyperlink:`https://blocksights.info/#/assets/${s.id}`})]})}),e.jsx(v,{className:"text-lg mt-0 pt-0",children:m.readable_balance_a.split(" ")[0]})]})}),e.jsx("div",{className:"col-span-1 text-center mt-8",children:e.jsx(us,{variant:"outline",onClick:()=>{const l=s;se(t),ae(l),Y(!0),setTimeout(()=>Y(!1),500)},children:e.jsx("svg",{style:Je,width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M1.90321 7.29677C1.90321 10.341 4.11041 12.4147 6.58893 12.8439C6.87255 12.893 7.06266 13.1627 7.01355 13.4464C6.96444 13.73 6.69471 13.9201 6.41109 13.871C3.49942 13.3668 0.86084 10.9127 0.86084 7.29677C0.860839 5.76009 1.55996 4.55245 2.37639 3.63377C2.96124 2.97568 3.63034 2.44135 4.16846 2.03202L2.53205 2.03202C2.25591 2.03202 2.03205 1.80816 2.03205 1.53202C2.03205 1.25588 2.25591 1.03202 2.53205 1.03202L5.53205 1.03202C5.80819 1.03202 6.03205 1.25588 6.03205 1.53202L6.03205 4.53202C6.03205 4.80816 5.80819 5.03202 5.53205 5.03202C5.25591 5.03202 5.03205 4.80816 5.03205 4.53202L5.03205 2.68645L5.03054 2.68759L5.03045 2.68766L5.03044 2.68767L5.03043 2.68767C4.45896 3.11868 3.76059 3.64538 3.15554 4.3262C2.44102 5.13021 1.90321 6.10154 1.90321 7.29677ZM13.0109 7.70321C13.0109 4.69115 10.8505 2.6296 8.40384 2.17029C8.12093 2.11718 7.93465 1.84479 7.98776 1.56188C8.04087 1.27898 8.31326 1.0927 8.59616 1.14581C11.4704 1.68541 14.0532 4.12605 14.0532 7.70321C14.0532 9.23988 13.3541 10.4475 12.5377 11.3662C11.9528 12.0243 11.2837 12.5586 10.7456 12.968L12.3821 12.968C12.6582 12.968 12.8821 13.1918 12.8821 13.468C12.8821 13.7441 12.6582 13.968 12.3821 13.968L9.38205 13.968C9.10591 13.968 8.88205 13.7441 8.88205 13.468L8.88205 10.468C8.88205 10.1918 9.10591 9.96796 9.38205 9.96796C9.65819 9.96796 9.88205 10.1918 9.88205 10.468L9.88205 12.3135L9.88362 12.3123C10.4551 11.8813 11.1535 11.3546 11.7585 10.6738C12.4731 9.86976 13.0109 8.89844 13.0109 7.70321Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})})}),e.jsx("div",{className:"col-span-5",children:e.jsxs(_,{children:[e.jsx(S,{className:"pb-0",children:e.jsxs(w,{className:"text-sm pt-0",children:["Swappable"," ",e.jsx(je,{classnamecontents:"text-blue-500",type:"text",text:t.symbol,hyperlink:`https://blocksights.info/#/assets/${t.id}`})]})}),e.jsx(v,{className:"text-lg",children:m.readable_balance_b.split(" ")[0]})]})})]}):null}),h&&h.length?e.jsx(e.Fragment,{children:e.jsx(O,{control:k.control,name:"sellAmount",render:({field:l})=>e.jsxs(M,{children:[e.jsx(I,{children:`Amount of ${s?s.symbol:"???"} to swap`}),e.jsxs(U,{style:{marginTop:"0px"},children:["Enter the amount of ",s?s.symbol:"???"," you want to swap for ",t?t.symbol:"???"]}),e.jsx(q,{onChange:n=>{const r=n.target.value;/^[0-9]*\.?[0-9]*$/.test(r)&&Se(r)},children:e.jsx("div",{className:"grid grid-cols-2",children:e.jsx("div",{className:"col-span-1",children:e.jsx(L,{label:`Amount of ${s?s.symbol:"???"} to swap`,value:f,placeholder:f,className:"mb-3"})})})}),e.jsx(T,{})]})})}):null,m?e.jsx(e.Fragment,{children:e.jsx(O,{control:k.control,name:"buyAmount",render:({field:l})=>e.jsxs(M,{children:[e.jsx(I,{children:"Total amount"}),e.jsx(U,{style:{marginTop:"0px"},children:`This is the amount of ${t?t.symbol:"???"} you'll receive in return for ${s?s.symbol:"???"}`}),e.jsx(q,{children:e.jsx("div",{className:"grid grid-cols-2 mb-3 mt-3",children:e.jsx("div",{className:"col-span-1",children:Ze})})}),e.jsx(T,{})]})})}):null,f&&m&&m.taker_fee_percent?e.jsx(e.Fragment,{children:e.jsx(O,{control:k.control,name:"poolFee",render:({field:l})=>e.jsxs(M,{children:[e.jsx(I,{children:"Pool fee"}),e.jsx(U,{style:{marginTop:"0px"},children:"This is the estimated fee you'll pay to the pool for this swap"}),e.jsx(q,{children:e.jsx("div",{className:"grid grid-cols-2 mb-3 mt-3",children:e.jsx("div",{className:"col-span-1",children:e.jsx(L,{disabled:!0,readOnly:!0,placeholder:"0",value:`${(m.taker_fee_percent/1e4*f).toFixed(s.precision)} (${s.symbol}) (${m.taker_fee_percent/100}% fee)`})})})}),e.jsx(T,{})]})})}):null,d?e.jsx(O,{control:k.control,name:"networkFee",render:({field:l})=>e.jsxs(M,{children:[e.jsx(I,{children:"Network fee"}),e.jsx(U,{style:{marginTop:"0px"},children:"This is the cost to broadcast your pool exchange operation onto the blockchain"}),e.jsx(q,{children:e.jsx("div",{className:"grid grid-cols-2 mb-3 mt-3",children:e.jsx("div",{className:"col-span-1",children:e.jsx(L,{disabled:!0,readOnly:!0,placeholder:`${fe} BTS`})})})}),a.id===a.referrer?e.jsxs(T,{children:["Rebate: ",fe*.8," BTS (vesting)"]}):null,e.jsx(T,{})]})}):null,!h||!f||!F||H!==!1?e.jsx(B,{className:"mt-5 mb-3",variant:"outline",disabled:!0,type:"submit",children:"Submit"}):e.jsx(B,{className:"mt-5 mb-3",variant:"outline",type:"submit",children:"Submit"})]})}),H?e.jsx(hs,{operationName:"liquidity_pool_exchange",username:a.username,usrChain:a.chain,userID:a.id,dismissCallback:De,headerText:`Exchanging ${f} ${s.symbol} for ${F} ${t.symbol}`,trxJSON:[{account:a.id,pool:h,amount_to_sell:{amount:Ee(f,s.precision),asset_id:s.id},min_to_receive:{amount:Ee(F,t.precision),asset_id:t.id},extensions:[]}]},`Exchanging${f}${s.symbol}for${F}${t.symbol}`):null,h&&!H?e.jsx(B,{variant:"outline",mt:"xl",onClick:()=>{const l=s;se(t),ae(l),Y(!0),setTimeout(()=>Y(!1),500)},children:"Swap buy/sell"}):null,h&&H?e.jsx(B,{variant:"outline",mt:"xl",disabled:!0,children:"Swap buy/sell"}):null,h?e.jsx(je,{variant:"outline",classnamecontents:"ml-2",type:"button",text:"Blocksights pool explorer",hyperlink:`https://blocksights.info/#/pools/${h}${a.chain!=="bitshares"?"?network=testnet":""}`}):null,m?e.jsxs(ne,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(B,{className:"ml-2",variant:"outline",children:"Pool JSON"})}),e.jsxs(ce,{className:"sm:max-w-[550px] bg-white",children:[e.jsxs(de,{children:[e.jsx(he,{children:"Liquidity Pool JSON"}),e.jsx(me,{children:"Check out the details returned by the network for this pool"})]}),e.jsx("div",{className:"grid grid-cols-1",children:e.jsx("div",{className:"col-span-1",children:e.jsx(Fe,{className:"h-72 rounded-md border",children:e.jsx("pre",{children:JSON.stringify(m,null,2)})})})})]})]}):null,te&&le?e.jsxs(ne,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(B,{className:"ml-2",variant:"outline",children:"Swappable asset JSON"})}),e.jsxs(ce,{className:"sm:max-w-[550px] bg-white",children:[e.jsxs(de,{children:[e.jsx(he,{children:"Swappable asset JSON"}),e.jsx(me,{children:"Check out the details returned by the network this pool's swappable assets"})]}),e.jsx("div",{className:"grid grid-cols-1",children:e.jsx("div",{className:"col-span-1",children:e.jsx(Fe,{className:"h-72 rounded-md border",children:e.jsx("pre",{children:JSON.stringify({assetA:s??"",assetADetails:te??{},aBitassetData:ve??{},assetB:t??"",assetBDetails:le??{},bBitassetData:ke??{},poolShareDetails:we??{}},null,2)})})})})]})]}):null]}):null]})]})}),s&&t?e.jsx(ms,{assetA:s.symbol,assetAData:s,assetB:t.symbol,assetBData:t}):null,e.jsxs("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[h?e.jsx("div",{className:"grid grid-cols-1 gap-3",children:J&&m?e.jsxs(e.Fragment,{children:[e.jsx(xe,{asset:t.symbol,assetData:t,assetDetails:le,bitassetData:ke,marketSearch:z,chain:a.chain,usrBalances:J,type:"buy"}),e.jsx(xe,{asset:s.symbol,assetData:s,assetDetails:te,bitassetData:ve,marketSearch:z,chain:a.chain,usrBalances:J,type:"sell"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsxs(S,{className:"pb-2 pt-4",children:[e.jsx(w,{children:"Quote asset"}),e.jsx(D,{className:"text-lg",children:"Loading..."})]}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"h-4 w-[250px]"}),e.jsx(y,{className:"h-4 w-[200px]"}),e.jsx(y,{className:"h-4 w-[250px]"}),e.jsx(y,{className:"h-4 w-[200px]"})]})})]}),e.jsxs(_,{children:[e.jsxs(S,{className:"pb-2 pt-4",children:[e.jsx(w,{children:"Base asset"}),e.jsx(D,{className:"text-lg",children:"Loading..."})]}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"h-4 w-[250px]"}),e.jsx(y,{className:"h-4 w-[200px]"}),e.jsx(y,{className:"h-4 w-[250px]"}),e.jsx(y,{className:"h-4 w-[200px]"})]})})]})]})}):null,e.jsx("div",{className:"grid grid-cols-1 gap-3",children:h&&s&&t?e.jsxs(e.Fragment,{children:[e.jsx("a",{href:`/dex/index.html?market=${s.symbol}_${t.symbol}`,children:e.jsxs(_,{children:[e.jsxs(S,{className:"pb-2 pt-4",children:[e.jsx(w,{children:"Trade on the Dex instead?"}),e.jsxs(D,{className:"text-sm",children:["Market: ",s.symbol,"/",t.symbol]})]}),e.jsx(v,{className:"text-sm pb-2",children:"You can manually create limit orders for trading pairs of your choice on the Bitshares DEX"})]})}),e.jsx("a",{href:`/dex/index.html?market=${d?.share_asset_symbol}_${s.symbol!=="BTS"?"BTS":s.symbol}`,children:e.jsxs(_,{children:[e.jsxs(S,{className:"pb-2 pt-4",children:[e.jsx(w,{children:"Purchase stake in this pool?"}),e.jsxs(D,{className:"text-sm",children:["Share asset: ",d?.share_asset_symbol]})]}),e.jsx(v,{className:"text-sm pb-2",children:"Receive swap fee yield over time by owning a stake in the pool via a market limit order."})]})}),e.jsx("a",{href:`/stake/index.html?pool=${h}`,children:e.jsxs(_,{children:[e.jsxs(S,{className:"pb-2 pt-4",children:[e.jsx(w,{children:"Stake assets in this pool?"}),e.jsxs(D,{className:"text-sm",children:["Share asset: ",d?.share_asset_symbol]})]}),e.jsx(v,{className:"text-sm pb-2",children:"Earn swap fees on assets staked in liquidity pools minus a small pool defined withdrawal fee."})]})}),e.jsxs(_,{children:[e.jsxs(S,{className:"pb-2 pt-4",children:[e.jsx(w,{children:"Need to borrow some assets?"}),e.jsx(D,{className:"text-sm",children:"DEX users lend assets at user defined rates. You could borrow from DEX participants, at their defined rates."})]}),e.jsxs(v,{className:"text-sm pb-3",children:[e.jsx(Z,{children:"Search by borrowable assets"}),e.jsx("br",{}),e.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=borrow&searchText=${s.symbol}`,children:e.jsx(R,{children:s.symbol})}),e.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=borrow&searchText=${t.symbol}`,children:e.jsx(R,{className:"ml-2 mt-1 mb-1",children:t.symbol})}),e.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=borrow&searchText=${d?.share_asset_symbol}`,children:e.jsx(R,{className:"ml-2 mt-1 mb-1",children:d?.share_asset_symbol})}),e.jsx("br",{}),e.jsx(Z,{children:"Search by accepted collateral"}),e.jsx("br",{}),e.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=collateral&searchText=${s.symbol}`,children:e.jsx(R,{children:s.symbol})}),e.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=collateral&searchText=${t.symbol}`,children:e.jsx(R,{className:"ml-2 mt-1",children:t.symbol})}),e.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=collateral&searchText=${d?.share_asset_symbol}`,children:e.jsx(R,{className:"ml-2 mt-1",children:d?.share_asset_symbol})})]})]}),m&&z&&J?e.jsx(xe,{asset:m.share_asset_symbol,assetData:m.share_asset_details,assetDetails:we,bitassetData:null,marketSearch:z,chain:a.chain,usrBalances:J,type:"pool"}):e.jsxs(_,{children:[e.jsxs(S,{className:"pb-2 pt-4",children:[e.jsx(w,{children:"Pool share asset"}),e.jsx(D,{className:"text-lg",children:"Loading..."})]}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"h-4 w-[250px]"}),e.jsx(y,{className:"h-4 w-[200px]"}),e.jsx(y,{className:"h-4 w-[250px]"}),e.jsx(y,{className:"h-4 w-[200px]"})]})})]})]}):null})]})]}),e.jsx("div",{className:"grid grid-cols-1 mt-5 ml-8 mr-8",children:e.jsxs(_,{children:[e.jsxs(S,{className:"pb-3",children:[e.jsx(w,{children:"Risks associated with liquidity pool exchanges"}),e.jsx(D,{children:"Please do your own research into liquidity pools and their swappable assets before proceeding."})]}),e.jsxs(v,{children:[e.jsxs("span",{className:"text-sm",children:[e.jsx(Z,{className:"mb-0 pb-0 text-lg",children:"Liquidity pool risks"}),e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-1 pl-2",children:[e.jsx("li",{children:"As liquidity pools are user configured they have highly unique properties and different owners; as such, they have unique risk profiles. Check that the pool fee and pool exchange rate are reasonable before proceeding with asset swap."}),e.jsx("li",{children:"As anyone can stake funds into both sides of the pool, pool liquidity is dynamic. If you make a swap, the opportunity to perform a reverse swap may not be available at a later time at the same price."})]})]}),e.jsxs("span",{className:"text-sm",children:[e.jsx(Z,{className:"mb-0 pb-0 text-lg",children:"Swappable asset risks"}),e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-1 pl-2",children:[e.jsx("li",{children:"As the liquidity pool assets can be user owned & configured, they have their own unique risk profiles; Check each asset's flags, permissions, market fee and issuers to gauge risk."}),e.jsxs("li",{children:["If you try to swap assets in excess of available swappable assets your swap price will greatly suffer. You should instead swap small amounts and await pool balance replenishment. If you want to swap a larger amount you should consider"," ",e.jsx("a",{href:`/dex/index.html?market=${d?.share_asset_symbol}_${s.symbol!=="BTS"?"BTS":s.symbol}`,className:"text-blue-500",children:"creating a limit order on the DEX"})," ","instead."]}),e.jsx("li",{children:"The value of the swappable assets themselves can fluctuate based on external factors (external cex volume) as well as internal factors (asset issuer & price feed publisher actions). Make sure you trust a pool's swappable assets before performing a swap."})]})]})]})]})}),a&&a.username&&a.username.length?e.jsx(ns,{usr:a}):null]})}export{Us as default};
