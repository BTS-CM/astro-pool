import{r as m,c as xt}from"./index.33c77f1d.js";import{u as i,v as se,I as L,K as yt,L as pt,N as wt,O as St,P as Ct,Q as bt,S as jt,T as Tt,U as kt}from"./hover-card.e7ea2833.js";const H=m.forwardRef((({className:e,...t},n)=>i.jsx("div",{ref:n,className:se("rounded-xl border bg-card text-card-foreground shadow",e),...t})));H.displayName="Card";const W=m.forwardRef((({className:e,...t},n)=>i.jsx("div",{ref:n,className:se("flex flex-col space-y-1.5 p-6",e),...t})));W.displayName="CardHeader";const J=m.forwardRef((({className:e,...t},n)=>i.jsx("h3",{ref:n,className:se("font-semibold leading-none tracking-tight",e),...t})));J.displayName="CardTitle";const ee=m.forwardRef((({className:e,...t},n)=>i.jsx("p",{ref:n,className:se("text-sm text-muted-foreground",e),...t})));ee.displayName="CardDescription";const ae=m.forwardRef((({className:e,...t},n)=>i.jsx("div",{ref:n,className:se("p-6 pt-0",e),...t})));ae.displayName="CardContent";const ye=m.forwardRef((({className:e,...t},n)=>i.jsx("div",{ref:n,className:se("flex items-center p-6 pt-0",e),...t})));ye.displayName="CardFooter";var F=Uint8Array,oe=Uint16Array,Et=Int32Array,st=new F([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rt=new F([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Nt=new F([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),it=function(e,t){for(var n=new oe(31),s=0;s<31;++s)n[s]=t+=1<<e[s-1];var r=new Et(n[30]);for(s=1;s<30;++s)for(var i=n[s];i<n[s+1];++i)r[i]=i-n[s]<<5|s;return{b:n,r:r}},at=it(st,2),ot=at.b,Mt=at.r;ot[28]=258,Mt[258]=28;for(var At=it(rt,0),$t=At.b,Ee=new oe(32768),j=0;j<32768;++j){var G=(43690&j)>>1|(21845&j)<<1;G=(61680&(G=(52428&G)>>2|(13107&G)<<2))>>4|(3855&G)<<4,Ee[j]=((65280&G)>>8|(255&G)<<8)>>1}var ue=function(e,t,n){for(var s=e.length,r=0,i=new oe(t);r<s;++r)e[r]&&++i[e[r]-1];var o,a=new oe(t);for(r=1;r<t;++r)a[r]=a[r-1]+i[r-1]<<1;if(n){o=new oe(1<<t);var l=15-t;for(r=0;r<s;++r)if(e[r])for(var c=r<<4|e[r],u=t-e[r],d=a[e[r]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)o[Ee[d]>>l]=c}else for(o=new oe(s),r=0;r<s;++r)e[r]&&(o[r]=Ee[a[e[r]-1]++]>>15-e[r]);return o},de=new F(288);for(j=0;j<144;++j)de[j]=8;for(j=144;j<256;++j)de[j]=9;for(j=256;j<280;++j)de[j]=7;for(j=280;j<288;++j)de[j]=8;var lt=new F(32);for(j=0;j<32;++j)lt[j]=5;var Ot=ue(de,9,1),_t=ue(lt,5,1),Ce=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},V=function(e,t,n){var s=t/8|0;return(e[s]|e[s+1]<<8)>>(7&t)&n},be=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Ut=function(e){return(e+7)/8|0},_e=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new F(e.subarray(t,n))},Ft=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],R=function(e,t,n){var s=new Error(t||Ft[e]);if(s.code=e,Error.captureStackTrace&&Error.captureStackTrace(s,R),!n)throw s;return s},Ue=function(e,t,n,s){var r=e.length,i=s?s.length:0;if(!r||t.f&&!t.l)return n||new F(0);var o=!n,a=o||2!=t.i,l=t.i;o&&(n=new F(3*r));var c=function(e){var t=n.length;if(e>t){var s=new F(Math.max(2*t,e));s.set(n),n=s}},u=t.f||0,d=t.p||0,h=t.b||0,f=t.l,m=t.d,p=t.m,v=t.n,y=8*r;do{if(!f){u=V(e,d,1);var x=V(e,d+1,3);if(d+=3,!x){var g=e[(z=Ut(d)+4)-4]|e[z-3]<<8,j=z+g;if(j>r){l&&R(0);break}a&&c(h+g),n.set(e.subarray(z,j),h),t.b=h+=g,t.p=d=8*j,t.f=u;continue}if(1==x)f=Ot,m=_t,p=9,v=5;else if(2==x){var b=V(e,d,31)+257,w=V(e,d+10,15)+4,S=b+V(e,d+5,31)+1;d+=14;for(var C=new F(S),k=new F(19),N=0;N<w;++N)k[Nt[N]]=V(e,d+3*N,7);d+=3*w;var E=Ce(k),$=(1<<E)-1,T=ue(k,E,1);for(N=0;N<S;){var z,A=T[V(e,d,$)];if(d+=15&A,(z=A>>4)<16)C[N++]=z;else{var _=0,M=0;for(16==z?(M=3+V(e,d,3),d+=2,_=C[N-1]):17==z?(M=3+V(e,d,7),d+=3):18==z&&(M=11+V(e,d,127),d+=7);M--;)C[N++]=_}}var L=C.subarray(0,b),O=C.subarray(b);p=Ce(L),v=Ce(O),f=ue(L,p,1),m=ue(O,v,1)}else R(1);if(d>y){l&&R(0);break}}a&&c(h+131072);for(var K=(1<<p)-1,B=(1<<v)-1,U=d;;U=d){var I=(_=f[be(e,d)&K])>>4;if((d+=15&_)>y){l&&R(0);break}if(_||R(2),I<256)n[h++]=I;else{if(256==I){U=d,f=null;break}var D=I-254;if(I>264){var W=st[N=I-257];D=V(e,d,(1<<W)-1)+ot[N],d+=W}var X=m[be(e,d)&B],G=X>>4;X||R(3),d+=15&X;O=$t[G];if(G>3){W=rt[G];O+=be(e,d)&(1<<W)-1,d+=W}if(d>y){l&&R(0);break}a&&c(h+131072);var J=h+D;if(h<O){var H=i-O,Z=Math.min(O,J);for(H+h<0&&R(3);h<Z;++h)n[h]=s[H+h]}for(;h<J;++h)n[h]=n[h-O]}}t.l=f,t.p=U,t.b=h,t.f=u,f&&(u=1,t.m=p,t.d=m,t.n=v)}while(!u);return h!=n.length&&o?_e(n,0,h):n.subarray(0,h)},It=new F(0),Dt=function(e){(31!=e[0]||139!=e[1]||8!=e[2])&&R(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=2+(e[10]|e[11]<<8));for(var s=(t>>3&1)+(t>>4&1);s>0;s-=!e[n++]);return n+(2&t)},zt=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},Rt=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&R(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&R(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function Lt(e,t){return Ue(e,{i:2},t&&t.out,t&&t.dictionary)}function Bt(e,t){var n=Dt(e);return n+8>e.length&&R(6,"invalid gzip data"),Ue(e.subarray(n,-8),{i:2},t&&t.out||new F(zt(e)),t&&t.dictionary)}function Pt(e,t){return Ue(e.subarray(Rt(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}function ct(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?Bt(e,t):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?Lt(e,t):Pt(e,t)}var Pe=typeof TextEncoder<"u"&&new TextEncoder,Ne=typeof TextDecoder<"u"&&new TextDecoder,Vt=0;try{Ne.decode(It,{stream:!0}),Vt=1}catch{}var Kt=function(e){for(var t="",n=0;;){var s=e[n++],r=(s>127)+(s>223)+(s>239);if(n+r>e.length)return{s:t,r:_e(e,n-1)};r?3==r?(s=((15&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|s>>10,56320|1023&s)):t+=1&r?String.fromCharCode((31&s)<<6|63&e[n++]):String.fromCharCode((15&s)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(s)}};function ut(e,t){if(t){for(var n=new F(e.length),s=0;s<e.length;++s)n[s]=e.charCodeAt(s);return n}if(Pe)return Pe.encode(e);var r=e.length,i=new F(e.length+(e.length>>1)),o=0,a=function(e){i[o++]=e};for(s=0;s<r;++s){if(o+5>i.length){var l=new F(o+8+(r-s<<1));l.set(i),i=l}var c=e.charCodeAt(s);c<128||t?a(c):c<2048?(a(192|c>>6),a(128|63&c)):c>55295&&c<57344?(a(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++s))>>18),a(128|c>>12&63),a(128|c>>6&63),a(128|63&c)):(a(224|c>>12),a(128|c>>6&63),a(128|63&c))}return _e(i,0,o)}function ft(e,t){if(t){for(var n="",s=0;s<e.length;s+=16384)n+=String.fromCharCode.apply(null,e.subarray(s,s+16384));return n}if(Ne)return Ne.decode(e);var r=Kt(e),i=r.s;return(n=r.r).length&&R(8),i}let je=0,Ve=[];function Yt(){return je+=1,()=>{if(je-=1,0===je){let e=Ve;Ve=[];for(let t of e)t()}}}let z=[],Me=(e,t)=>{let n=[],s={get:()=>(s.lc||s.listen((()=>{}))(),s.value),l:t||0,lc:0,listen:(e,t)=>(s.lc=n.push(e,t||s.l)/2,()=>{let t=n.indexOf(e);~t&&(n.splice(t,2),--s.lc||s.off())}),notify(e){let t=!z.length;for(let t=0;t<n.length;t+=2)z.push(n[t],n[t+1],s.value,e);if(t){for(let e=0;e<z.length;e+=4){let t;for(let n=e+1;!t&&(n+=4)<z.length;)z[n]<z[e+1]&&(t=z.push(z[e],z[e+1],z[e+2],z[e+3]));t||z[e](z[e+2],z[e+3])}z.length=0}},off(){},set(e){s.value!==e&&(s.value=e,s.notify())},subscribe(e,t){let n=s.listen(e,t);return e(s.value),n},value:e};return s};const Xt=0,qt=1,Ht=5,he=6,ve=10;let Fe=(e,t,n,s)=>(e.events=e.events||{},e.events[n+10]||(e.events[n+10]=s((t=>{e.events[n].reduceRight(((e,t)=>(t(e),e)),{shared:{},...t})}))),e.events[n]=e.events[n]||[],e.events[n].push(t),()=>{let s=e.events[n],r=s.indexOf(t);s.splice(r,1),s.length||(delete e.events[n],e.events[n+10](),delete e.events[n+10])}),Wt=(e,t)=>Fe(e,t,0,(t=>{let n=e.listen;return e.listen=s=>(!e.lc&&!e.starting&&(e.starting=!0,t(),delete e.starting),n(s)),()=>{e.listen=n}})),Jt=(e,t)=>Fe(e,t,1,(t=>{let n=e.off;return e.off=()=>{t(),n()},()=>{e.off=n}})),Qt=1e3,Gt=(e,t)=>Fe(e,(n=>{let s=t(n);s&&e.events[6].push(s)}),5,(t=>{let n=e.listen;e.listen=(...s)=>(!e.lc&&!e.active&&(e.active=!0,t()),n(...s));let s=e.off;return e.events[6]=[],e.off=()=>{s(),setTimeout((()=>{if(e.active&&!e.lc){e.active=!1;for(let t of e.events[6])t();e.events[6]=[]}}),Qt)},()=>{e.listen=n,e.off=s}}));function Zt(e,t,n){let s=new Set([...t,void 0]);return e.listen(((e,t)=>{s.has(t)&&n(e,t)}))}let X=(e={})=>{let t=Me(e);return t.setKey=function(e,n){typeof n>"u"?e in t.value&&(t.value={...t.value},delete t.value[e],t.notify(e)):t.value[e]!==n&&(t.value={...t.value,[e]:n},t.notify(e))},t},en=()=>({emit(e,...t){let n=this.events[e]||[];for(let e=0,s=n.length;e<s;e++)n[e](...t)},events:{},on(e,t){return this.events[e]?.push(t)||(this.events[e]=[t]),()=>{this.events[e]=this.events[e]?.filter((e=>t!==e))}}});const tn=({cache:e=new Map,fetcher:t,...n}={})=>{const s=en();let r=!0;He("visibilitychange",(()=>{r=!document.hidden,r&&s.emit(Ye)})),He("online",(()=>s.emit(Xe)));const i=new Map,o=new Map,a=new Map;let l={};const c=async([t,n],i,c,u)=>{var d;if(!r)return;const h=e=>{i.key===t&&(i.set(e),s.emit(Te,t,e,!0))},f=()=>{h({...i.value,...Je,promise:a.get(t)})},{dedupeTime:m=4e3,fetcher:p}={...c,...l},v=We();if(a.has(t))return void(i.value.loading||f());if(!u){const n=e.get(t);n&&i.value.data!==n&&h({data:n,...Z});const s=o.get(t);if(s&&s+m>v)return}const y=Yt();try{const s=p(...n);o.set(t,v),a.set(t,s),f();const r=await s;e.set(t,r),h({data:r,...Z}),o.set(t,We())}catch(e){null==(d=c.onError)||d.call(c,e),h({data:i.value.data,error:e,...Z})}finally{y(),a.delete(t)}},u=t=>{e.delete(t),o.delete(t)},d=(t,n)=>{for(const s of e.keys())ke(s,t)&&n(s)},h=e=>{d(e,u),s.emit(qe,e)},f=(t,n)=>{d(t,(t=>{void 0===n?u(t):e.set(t,n)})),s.emit(Te,t,n)};return[(e,{fetcher:r=t,...o}={})=>{const a=X({...Z}),l={...n,...o,fetcher:r};a._=dt,a.invalidate=()=>{const{key:e}=a;e&&h(e)},a.mutate=e=>{const{key:t}=a;t&&f(t,e)};let u,d,m,p,v,y=[];Wt(a,(()=>{const t=!u;[v,u]=nn(e),p=v.subscribe((e=>{if(e){const[t,n]=e;a.key=t,c([t,n],a,l),d=t,m=n}else a.key=d=m=void 0,a.set({...Z})}));const n=v.get();n&&([d,m]=n,t&&x());const{refetchInterval:r=0,refetchOnFocus:o,refetchOnReconnect:h}=l,f=()=>{d&&c([d,m],a,l)};r>0&&i.set(e,setInterval(f,r)),o&&y.push(s.on(Ye,f)),h&&y.push(s.on(Xe,f)),y.push(s.on(qe,(e=>{d&&ke(d,e)&&c([d,m],a,l,!0)})),s.on(Te,((e,t,n)=>{d&&ke(d,e)&&a.value!==t&&a.value.data!==t&&a.set(n?t:{data:t,...Z})})))}));const x=()=>{d&&m&&c([d,m],a,l)},g=a.listen;return a.listen=e=>{const t=g(e);return e(a.value),x(),t},Jt(a,(()=>{a.value={...Z},u?.(),y.forEach((e=>e())),y=[],p?.();const t=i.get(e);t&&clearInterval(t)})),a},function(t){const s=async i=>{var o;const a=l.fetcher??t,c=[];try{r.set({error:void 0,data:void 0,mutate:s,...Je});const t=await a({data:i,invalidate:e=>{c.push(e)},getCacheUpdater:(t,n=!0)=>[e=>{f(t,e),n&&c.push(t)},e.get(t)]});return r.setKey("data",t),t}catch(e){null==(o=n?.onError)||o.call(n,e),r.setKey("error",e)}finally{r.setKey("loading",!1),c.forEach(h)}},r=X({mutate:s,...Z});return r.mutate=s,r},{__unsafeOverruleSettings:e=>{console.warn("You should only use __unsafeOverruleSettings in test environment"),l=e},invalidateKeys:h,mutateCache:f}]};function Ke(e){return"string"==typeof e||"number"==typeof e||!0===e}const nn=e=>{if(Ke(e))return[Me([""+e,[e]]),()=>{}];let t=Me(null),n=[];const s=()=>{n.some((e=>null==e||!1===e))?t.set(null):t.set([n.join(""),n])},r=[];for(let t=0;t<e.length;t++){const i=e[t];Ke(i)?n.push(i):r.push(i.subscribe((e=>{n[t]=sn(i)?i.value&&"data"in i.value?i.key:null:e,s()})))}return s(),[t,()=>r.forEach((e=>e()))]};function sn(e){return e._===dt}const Ye=1,Xe=2,qe=3,Te=4,He=(e,t)=>{typeof window>"u"||addEventListener(e,t)},ke=(e,t)=>Array.isArray(t)?t.includes(e):"function"==typeof t?t(e):e===t,We=()=>(new Date).getTime(),dt=Symbol(),Je={loading:!0},Z={loading:!1};function rn(e,t={}){let n=m.useCallback((n=>t.keys?Zt(e,t.keys,n):e.listen(n)),[t.keys,e]),s=e.get.bind(e);return m.useSyncExternalStore(n,s,s)}const Qe=X([]);function an(e){const t=Qe.get(),n=e&e.length?e.filter((e=>!t.some((t=>t.id===e.id)))):e;n.length>0&&Qe.set([...t,...n])}const Ge=X([]);function on(e){const t=Ge.get(),n=t&&t.length?e.filter((e=>!t.some((t=>t.id===e.id)))):e;n.length>0&&Ge.set([...t,...n])}const Ze=X([]);function ln(e){const t=Ze.get(),n=t&&t.length?e.filter((e=>!t.some((t=>t.id===e.id)))):e;n.length>0&&Ze.set([...t,...n])}const et=X([]);function cn(e){const t=et.get(),n=e.filter((e=>!t.some((t=>t.id===e.id))));n.length>0&&et.set([...t,...n])}const un=X(null);function fn(e){un.set(e)}const dn=X([]);function hn(e){dn.set(e)}let tt=e=>e,ce={},te={addEventListener(){},removeEventListener(){}};function vn(){try{return typeof localStorage<"u"}catch{return!1}}vn()&&(ce=localStorage);let mn={addEventListener(e,t,n){window.addEventListener("storage",t),window.addEventListener("pageshow",n)},removeEventListener(e,t,n){window.removeEventListener("storage",t),window.removeEventListener("pageshow",n)}};function gn(e,t={},n={}){let s=n.encode||tt,r=n.decode||tt,i=X(),o=i.setKey;i.setKey=(t,r)=>{typeof r>"u"?(!1!==n.listen&&te.perKey&&te.removeEventListener(e+t,l,c),delete ce[e+t]):(!1!==n.listen&&te.perKey&&!(t in i.value)&&te.addEventListener(e+t,l,c),ce[e+t]=s(r)),o(t,r)};let a=i.set;function l(t){t.key?t.key.startsWith(e)&&(null===t.newValue?o(t.key.slice(e.length),void 0):o(t.key.slice(e.length),r(t.newValue))):a({})}function c(){let n={...t};for(let t in ce)t.startsWith(e)&&(n[t.slice(e.length)]=r(ce[t]));i.set(n)}return i.set=function(e){for(let t in e)i.setKey(t,e[t]);for(let t in i.value)t in e||i.setKey(t)},Gt(i,(()=>{if(c(),!1!==n.listen)return te.addEventListener(e,l,c),()=>{te.removeEventListener(e,l,c);for(let t in i.value)te.removeEventListener(e+t,l,c)}})),i}typeof window<"u"&&(te=mn);const Ae=X({username:"",id:"",chain:"",referrer:""});function fe(e,t,n,s){Ae.set({username:e,id:t,chain:s,referrer:n});try{ht(e,t,n,s)}catch(e){console.log(e)}}const K=gn("storedUsers:",{users:[],lastAccount:[]},{encode:e=>JSON.stringify(e),decode(e){try{return JSON.parse(e)}catch(t){return console.log(t),e}}});function ht(e,t,n,s){const r=K.get().users,i={username:e,id:t,referrer:n,chain:s};if(K.setKey("lastAccount",[i]),r.find((e=>e.id===t)))return void console.log("Using existing user");const o=[...r,i];K.setKey("users",o)}function xn(e){const t=K.get().users.filter((t=>t.id!==e));K.setKey("users",t);const n=K.get().lastAccount;n&&n.length&&n[0].id===e&&K.setKey("lastAccount",[])}const[yn]=tn({fetcher:async(e,t)=>{const n=t?t.split(","):[],s=[n.includes("marketSearch")?fetch(`http://localhost:8080/cache/marketSearch/${e}`,{method:"GET"}):null,n.includes("assets")?fetch(`http://localhost:8080/cache/minAssets/${e}`,{method:"GET"}):null,n.includes("pools")?fetch(`http://localhost:8080/cache/minPools/${e}`,{method:"GET"}):null,n.includes("globalParams")?fetch(`http://localhost:8080/cache/feeSchedule/${e}`,{method:"GET"}):null,n.includes("offers")?fetch(`http://localhost:8080/cache/offers/${e}`,{method:"GET"}):null,n.includes("bitAssetData")?fetch(`http://localhost:8080/cache/bitassets/${e}`,{method:"GET"}):null],r=await Promise.all(s);return await Promise.all(r.map((async(e,t)=>{if(!e)return;if(!e.ok)return void console.log("Failed to fetch data");const n=await e.json();if(!n||!n.result)return void console.log("Failed to fetch data");const s=ft(ct(ut(n.result,!0))),r=JSON.parse(s);switch(t){case 0:cn(r);break;case 1:an(r.map((e=>({id:`1.3.${e.id}`,symbol:e.s,precision:e.p,issuer:`1.2.${e.i}`,market_fee_percent:e.mfp,max_market_fee:e.mmf,max_supply:e.ms}))));break;case 2:on(r.map((e=>({id:`1.19.${e.id}`,asset_a_id:`1.3.${e.a}`,asset_a_symbol:e.as,asset_b_id:`1.3.${e.b}`,asset_b_symbol:e.bs,share_asset_symbol:e.sa,balance_a:e.ba,balance_b:e.bb,taker_fee_percent:e.tfp}))));break;case 3:fn(r);break;case 4:ln(r);break;case 5:hn(r)}})))}});function Pn(e,t){if(rn(m.useMemo((()=>yn([e,t.join(",")])),[e])),!Ae||!Ae.get().username){console.log("No current user");const t=K.get().users,n=K.get().lastAccount,s=t.find((t=>t.chain===e));if(t&&t.length&&s)if(n&&n.length){console.log("Setting last account");const e=n[0];fe(e.username,e.id,e.referrer,e.chain)}else s&&(console.log("Setting first account"),fe(s.username,s.id,s.referrer,s.chain));else console.log("Storing default null account"),ht("null-account","1.2.3","1.2.3","bitshares"),fe("null-account","1.2.3","1.2.3","bitshares")}}const vt=m.forwardRef((({className:e,type:t,...n},s)=>i.jsx("input",{type:t,className:se("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...n})));vt.displayName="Input";const pn=e=>{const t=m.useRef(e);return m.useEffect((()=>{t.current=e})),t},wn=pn,Sn=typeof performance<"u"?performance:Date,Cn=()=>Sn.now();function bn(e,t=30,n=!1){const s=wn(e),r=1e3/t,i=m.useRef(0),o=m.useRef(),a=()=>o.current&&clearTimeout(o.current),l=[t,n,s];function c(){i.current=0,a()}return m.useEffect((()=>c),l),m.useCallback((function(){const e=arguments,t=Cn(),l=()=>{i.current=t,a(),s.current.apply(null,e)},c=i.current;if(n&&0===c)return l();if(t-c>r){if(c>0)return l();i.current=t}a(),o.current=setTimeout((()=>{l(),i.current=0}),r)}),l)}function jn(e,t,n){const s=m.useState(e);return[s[0],bn(s[1],t,n)]}const Tn=e=>{let t=0;for(const n of e)t=(t<<5)-t+n.charCodeAt(0),t&=t;return Math.abs(t)},kn=e=>{const t=e.slice(1),[n,s,r]=[0,2,4].map((e=>parseInt(t.slice(e,e+2),16)));return(299*n+587*s+114*r)/1e3>=128?"#000000":"#FFFFFF"};class ne{constructor(e){this._seed=e,(this._seed<=0||this._seed===Number.MAX_VALUE)&&(this._seed=1)}nextDouble(){const e=Math.floor(this._seed/ne.q),t=this._seed%ne.q;return this._seed=ne.a*t-ne.r*e,this._seed<=0&&(this._seed+=ne.m),Number(this._seed)/ne.m}nextInt(e,t){const n=Math.round(t)-Math.round(e);return e+Math.round(n*this.nextDouble())}nextNumber(e,t){return e+(t-e)*this.nextDouble()}nextBoolean(){return this.nextDouble()>=.5}nextChoice(e){if(0===e.length)return;return e[this.nextInt(0,e.length-1)]}nextUnit=(e,t)=>this.nextNumber(t?-e:0,e);static a=16807;static m=2147483647;static q=127773;static r=2836}const A=36,En=["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"],me=(e,t)=>({rightEye:e,leftEye:t??e}),$e={normal:me((e=>i.jsx("rect",{x:e.x+e.eyeSpread,y:e.y,width:e.eyeSize,height:2,rx:1,fill:e.eyeColor}))),happy:me((e=>i.jsx("path",{d:`M${e.x+e.eyeSpread-e.eyeSize},${e.y+e.eyeSize} Q${e.x+e.eyeSpread},${e.y} ${e.x+e.eyeSpread+e.eyeSize},${e.y+e.eyeSize}`,fill:"none",stroke:e.eyeColor,strokeWidth:1,strokeLinecap:"round"}))),sleepy:me((e=>i.jsx("path",{d:`M${e.x+e.eyeSpread-e.eyeSize},${e.y} Q${e.x+e.eyeSpread},${e.y+e.eyeSize} ${e.x+e.eyeSpread+e.eyeSize},${e.y}`,fill:"none",stroke:e.eyeColor,strokeWidth:1,strokeLinecap:"round"}))),mischief:me((e=>i.jsx("path",{d:`M${e.x+e.eyeSpread},${e.y} l${e.eyeSize},${e.eyeSize} l-${e.eyeSize},${e.eyeSize}`,fill:"none",stroke:e.eyeColor,strokeWidth:1,strokeLinecap:"round"})),(e=>i.jsx("path",{d:`M${e.x+e.eyeSpread},${e.y} l-${e.eyeSize},${e.eyeSize} l${e.eyeSize},${e.eyeSize}`,fill:"none",stroke:e.eyeColor,strokeWidth:1,strokeLinecap:"round"})))},mt={smile:e=>i.jsx("path",{d:`M13,${19+e.mouthSpread} a1,0.75 0 0,0 10,0`,fill:e.mouthColor}),open:e=>i.jsx("path",{d:`M15 ${19+e.mouthSpread}c2 1 4 1 6 0`,stroke:e.mouthColor,fill:"none",strokeLinecap:"round"}),surprise:e=>i.jsx("circle",{cx:20,cy:19+e.mouthSpread,r:e.mouthSize,fill:e.mouthColor}),unhappy:e=>i.jsx("path",{d:`M15 ${19+e.mouthSpread}c2 -1 4 -1 6 0`,stroke:e.mouthColor,fill:"none",strokeLinecap:"round"})},Nn=e=>{let t="#";for(let n=0;n<6;n++){t+=Math.floor(e.nextUnit(16,!1)).toString(16)}return t};function Mn(e,t=En,n={}){let s=Tn(e);const r=new ne(s),i=r?Nn(r):t[0],o=r.nextUnit(10,!0),a=o<5?o+4:o,l=r.nextUnit(10,!0),c=l<5?l+4:l,u=n.eye??r?.nextChoice(Object.keys($e)),d=n.mouth??r?.nextChoice(Object.keys(mt));return{wrapperColor:i,faceColor:kn(i),backgroundColor:r.nextChoice(t)??t[1],wrapperTranslateX:a,wrapperTranslateY:c,wrapperRotate:r.nextUnit(360,!1),wrapperScale:1+r.nextUnit(3,!1)/10,eyeSpread:r.nextUnit(5,!1)??0,eyeSize:1.5+(r.nextUnit(1,!1)??0),mouthSpread:r.nextUnit(5,!1)??0,mouthSize:1.5+(r.nextUnit(1,!0)??0),eyeType:u,mouthType:d}}const pe=({name:e,extra:t,colors:n,size:s,title:r,square:o,expression:a,...l})=>{const c=m.useMemo((()=>Mn(e,n,a)),[e,n,a]),u=m.useId(),[d,h]=jn({mouseX:null,mouseY:null},30),f=e=>{h({mouseX:e.clientX,mouseY:e.clientY})};m.useEffect((()=>(window.addEventListener("mousemove",f),()=>{window.removeEventListener("mousemove",f)})),[]);const[p,v]=m.useState(),[y,x]=m.useState(0),[g,j]=m.useState(0);m.useEffect((()=>{!function(){const n=document.querySelector(`#avatar${t}_${e.replace(".","")}`),{left:s,top:r,width:i,height:o}=n.getBoundingClientRect(),a=s+i/2,l=r+o/2;let c=180*Math.atan2(d.mouseY-l,d.mouseX-a)/Math.PI+90;c||(c=0),c<0&&(c=360+c),0===c&&(c=1),c=parseInt(c.toFixed(0));const u=Math.sqrt(Math.pow(d.mouseX-a,2)+Math.pow(d.mouseY-l,2));v(d.mouseX<=s?"left":"right"),j(u),x(c)}()}),[d]);const[b,w]=m.useState(1);m.useEffect((()=>{y?y>=0&&y<=15?w(15):y>20&&y<=95?w(y):y>95&&y<=180?w(95):y>180&&y<=275?w(275):y>275&&y<345?w(y):y>=345&&y<=360&&w(345):w(15)}),[p,g,y]);const[S,C]=m.useState(!1),[k,N]=m.useState(c.mouthType),[E,$]=m.useState(c.eyeType);m.useEffect((()=>{const e=setInterval((()=>{if(S)return $("sleepy"),void N("surprise");$("sleepy"!==c.eyeType?"sleepy":"normal"),setTimeout((()=>{$(c.eyeType)}),Math.max(100,500*Math.random()))}),Math.max(3e3,1e4*Math.random()));return()=>clearInterval(e)}),[S]);const[T,z]=m.useState();return m.useEffect((()=>{function e(){C(!0)}return d.mouseX&&d.mouseY&&(T&&clearTimeout(T),S&&(C(!1),$(c.eyeType),N(c.mouthType)),z(setTimeout(e,3e4))),()=>{T&&clearTimeout(T)}}),[d]),i.jsxs("svg",{viewBox:"0 0 36 36",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:s,height:s,...l,children:[r&&i.jsx("title",{children:r}),i.jsx("mask",{id:u,maskUnits:"userSpaceOnUse",x:0,y:0,width:A,height:A,children:i.jsx("rect",{width:A,height:A,rx:o?void 0:72,fill:"#FFFFFF"})}),i.jsxs("g",{mask:`url(#${u})`,children:[i.jsx("rect",{width:A,height:A,fill:c.backgroundColor}),i.jsx("rect",{x:"0",y:"0",width:A,height:A,transform:`translate(${c.wrapperTranslateX} ${c.wrapperTranslateY}) rotate(${c.wrapperRotate} 18 18) scale(${c.wrapperScale})`,fill:c.wrapperColor,rx:A}),i.jsxs("g",{id:`avatar${t}_${e.replace(".","")}`,transform:`rotate(${"left"===p?b+65:b-65}, 18 18)`,children:[$e[E].leftEye({eyeSize:c.eyeSize,eyeSpread:Math.min(g/20,5)*("left"===p?-1:1),eyeColor:c.faceColor,x:20,y:14}),$e[E].rightEye({eyeSize:c.eyeSize,eyeSpread:Math.min(g/20,5)*("left"===p?-1:1),eyeColor:c.faceColor,x:14,y:14}),mt[k]({mouthSpread:Math.min(g/50,5),mouthSize:c.mouthSize,mouthColor:c.faceColor})]})]})]})};function An(e){const[t,n]=m.useState(),[s,r]=m.useState(),[o,a]=m.useState(),[l,c]=m.useState(),[u,d]=m.useState();m.useEffect((()=>K.subscribe((e=>{d(e.users)}))),[K]);const[h,f]=m.useState(!1),[p,v]=m.useState();async function y(){const e=await fetch(`http://localhost:8080/api/accountLookup/${t}/${o}`,{method:"GET"});if(!e.ok)return console.log({error:new Error(`${e.status} ${e.statusText}`),msg:"Couldn't find account."}),void f(!1);const n=await e.json();if(n&&n.result){const e=ct(ut(n.result,!0)),t=JSON.parse(ft(e));return f(!1),void v(t)}f(!1),c("Couldn't find account.")}return i.jsxs("div",{className:"grid grid-cols-1",children:[t?null:i.jsxs(H,{children:[i.jsxs(W,{children:[i.jsx(J,{children:"⚙️ Select a blockchain to continue"}),i.jsx(ee,{children:"Which blockchain do you want to use?"})]}),i.jsxs(ae,{children:[i.jsx(L,{className:"mr-2",onClick:()=>n("bitshares"),children:"Bitshares (BTS)"}),i.jsx(L,{onClick:()=>n("bitshares_testnet"),children:"Bitshares testnet (TEST)"})]})]}),t&&!s?i.jsxs(H,{children:[i.jsxs(W,{children:[i.jsxs(J,{children:["Use a new or existing ","bitshares"===t?"Bitshares":"Bitshares testnet"," ","account?"]}),i.jsx(ee,{children:"How do you want to proceed?"})]}),i.jsxs(ae,{children:[i.jsx(L,{className:"mr-2",onClick:()=>r("new"),children:"New account"}),i.jsx(L,{onClick:()=>r("existing"),children:"Existing account"}),i.jsx("br",{}),i.jsx(L,{className:"mt-2",onClick:()=>n(null),children:"Back"})]})]}):null,t&&s&&"new"===s&&!p?i.jsxs(H,{children:[i.jsxs(W,{children:[i.jsx(J,{children:"bitshares"===t?"🔐 Bitshares (BTS)":"🔐 Bitshares testnet (TEST)"}),i.jsx(ee,{children:"Enter your Bitshares account name"})]}),i.jsxs(ae,{children:[i.jsx(vt,{value:o||"",placeholder:"Account name or ID",onKeyDown:e=>{"Enter"===e.key&&!h&&(f(!0),y())},onChange:e=>{/^[a-zA-Z0-9.-]*$/.test(e.target.value)&&(a(e.target.value),c(),v())}}),l?i.jsx("p",{className:"text-red-500 text-xs italic",children:l||"ERROR"}):null]}),i.jsxs(ye,{children:[i.jsx(L,{className:"mr-2",onClick:()=>r(null),children:"Back"}),o&&!h?i.jsx(L,{onClick:()=>y(),children:"Continue"}):i.jsx(L,{disabled:!0,children:"Continue"})]})]}):null,p?i.jsxs(H,{children:[i.jsxs(W,{children:[i.jsx(J,{children:"bitshares"===t?"🔐 Bitshares (BTS) account selection":"🔐 Bitshares testnet (TEST) account selection"}),i.jsx(ee,{children:"Proceed with the following account?"})]}),i.jsx(ae,{children:i.jsx(H,{className:"w-1/3",onClick:()=>{fe(p.name,p.id,p.referrer,t)},children:i.jsxs("div",{className:"grid grid-cols-4",children:[i.jsx("div",{className:"col-span-1 pt-6 pl-4",children:i.jsx(pe,{size:40,name:p.name,extra:"",expression:{eye:"normal",mouth:"open"},colors:["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]})}),i.jsx("div",{className:"col-span-3",children:i.jsxs(W,{children:[i.jsx(J,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:p.name}),i.jsx(ee,{children:p.id})]})})]})},p.id)}),i.jsx(ye,{children:i.jsx(L,{variant:"outline",className:"mr-2",onClick:()=>{c(),v()},children:"Go back"})})]}):null,s&&"existing"===s?i.jsxs(H,{children:[i.jsxs(W,{children:[i.jsx(J,{children:"bitshares"===t?"Bitshares (BTS)":"Bitshares testnet (TEST)"}),i.jsx(ee,{children:"Select one of your previously used accounts"})]}),i.jsx(ae,{children:i.jsx("div",{className:"grid grid-cols-2 gap-5",children:u.filter((e=>e.chain===t)).length?u.filter((e=>e.chain===t)).map((e=>i.jsxs(yt,{children:[i.jsx(pt,{asChild:!0,children:i.jsx(H,{onClick:()=>{fe(e.username,e.id,e.referrer,e.chain)},children:i.jsxs("div",{className:"grid grid-cols-4",children:[i.jsx("div",{className:"col-span-1 pt-6 pl-2",children:i.jsx(pe,{size:40,name:e.username,extra:"",expression:{eye:"normal",mouth:"open"},colors:["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]})}),i.jsx("div",{className:"col-span-3",children:i.jsxs(W,{children:[i.jsx(J,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.username}),i.jsx(ee,{children:e.id})]})})]})})}),i.jsxs(wt,{className:"w-80",children:["Account: ",e.username,i.jsx("br",{}),i.jsx(L,{className:"w-full mt-2 text-bold text-white",variant:"destructive",onClick:()=>{xn(e.id)},children:"Forget this account"})]})]},e.id))):i.jsx("p",{className:"text-red-500 text-xs italic",children:"No accounts found."})})}),i.jsx(ye,{children:i.jsx(L,{className:"mr-2",onClick:()=>r(null),children:"Back"})})]}):null]})}pe.displayName="Avatar";var $n=Object.defineProperty,On=(e,t,n)=>t in e?$n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ge=(e,t,n)=>(On(e,"symbol"!=typeof t?t+"":t,n),n),Oe=new Map,xe=new WeakMap,nt=0,_n=void 0;function Un(e){return e?(xe.has(e)||(nt+=1,xe.set(e,nt.toString())),xe.get(e)):"0"}function Fn(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>`${t}_${"root"===t?Un(e.root):e[t]}`)).toString()}function In(e){let t=Fn(e),n=Oe.get(t);if(!n){const s=new Map;let r;const i=new IntersectionObserver((t=>{t.forEach((t=>{var n;const i=t.isIntersecting&&r.some((e=>t.intersectionRatio>=e));e.trackVisibility&&typeof t.isVisible>"u"&&(t.isVisible=i),null==(n=s.get(t.target))||n.forEach((e=>{e(i,t)}))}))}),e);r=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:i,elements:s},Oe.set(t,n)}return n}function Dn(e,t,n={},s=_n){if(typeof window.IntersectionObserver>"u"&&void 0!==s){const r=e.getBoundingClientRect();return t(s,{isIntersecting:s,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),()=>{}}const{id:r,observer:i,elements:o}=In(n);let a=o.get(e)||[];return o.has(e)||o.set(e,a),a.push(t),i.observe(e),function(){a.splice(a.indexOf(t),1),0===a.length&&(o.delete(e),i.unobserve(e)),0===o.size&&(i.disconnect(),Oe.delete(r))}}function zn(e){return"function"!=typeof e.children}var Rn=class extends m.Component{constructor(e){super(e),ge(this,"node",null),ge(this,"_unobserveCb",null),ge(this,"handleNode",(e=>{this.node&&(this.unobserve(),!e&&!this.props.triggerOnce&&!this.props.skip&&this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=e||null,this.observeNode()})),ge(this,"handleChange",((e,t)=>{e&&this.props.triggerOnce&&this.unobserve(),zn(this.props)||this.setState({inView:e,entry:t}),this.props.onChange&&this.props.onChange(e,t)})),this.state={inView:!!e.initialInView,entry:void 0}}componentDidMount(){this.unobserve(),this.observeNode()}componentDidUpdate(e){(e.rootMargin!==this.props.rootMargin||e.root!==this.props.root||e.threshold!==this.props.threshold||e.skip!==this.props.skip||e.trackVisibility!==this.props.trackVisibility||e.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve()}observeNode(){if(!this.node||this.props.skip)return;const{threshold:e,root:t,rootMargin:n,trackVisibility:s,delay:r,fallbackInView:i}=this.props;this._unobserveCb=Dn(this.node,this.handleChange,{threshold:e,root:t,rootMargin:n,trackVisibility:s,delay:r},i)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){const{children:e}=this.props;if("function"==typeof e){const{inView:t,entry:n}=this.state;return e({inView:t,entry:n,ref:this.handleNode})}const{as:t,triggerOnce:n,threshold:s,root:r,rootMargin:i,onChange:o,skip:a,trackVisibility:l,delay:c,initialInView:u,fallbackInView:d,...h}=this.props;return m.createElement(t||"div",{ref:this.handleNode,...h},e)}};function Vn(e){const{usr:t}=e,[n,s]=xt.useState(!1);if(!t||!t.id||!t.id.length)return null;const[r,o]=m.useState(!1);return m.useEffect((()=>{t&&t.id&&t.id.length&&o(!1)}),[t]),i.jsx("div",{className:"flex justify-center",children:i.jsxs("div",{className:"grid grid-cols-1 mt-3",children:[i.jsx(H,{className:"w-full",style:{transform:"scale(0.75)"},children:i.jsx(W,{children:i.jsx(J,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:i.jsxs("div",{className:"grid grid-cols-3",children:[i.jsx("div",{className:"col-span-1 pr-3 pt-3",children:i.jsx(Rn,{onChange:s,children:n?i.jsx(pe,{size:50,name:t.username,extra:"",expression:{eye:"normal",mouth:"open"},colors:["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]}):null})}),i.jsxs("div",{className:"col-span-2 pl-3",children:[i.jsx("span",{className:"text-xl",children:t.username}),i.jsx("br",{}),i.jsxs("span",{className:"text-sm",children:[t.chain,i.jsx("br",{}),t.id]})]})]})})})},t.id),i.jsxs(St,{open:r,onOpenChange:e=>{o(e)},children:[i.jsx(Ct,{asChild:!0,children:i.jsx(L,{className:"h-5 p-3",children:"Switch account/chain"})}),i.jsxs(bt,{className:"sm:max-w-[500px] bg-white",children:[i.jsxs(jt,{children:[i.jsx(Tt,{children:"Replacing current user"}),i.jsx(kt,{children:"Select a chain and account to proceed"})]}),i.jsx(An,{})]})]})]})})}export{Ae as $,pe as A,H as C,vt as I,W as a,J as b,ee as c,Vn as d,dn as e,et as f,ae as g,ye as h,Qe as i,un as j,Ze as k,ct as l,ft as m,tn as n,Ge as o,rn as p,an as q,ut as s,Pn as u};