import{$ as v,r as k,i as y,h as F,u as M,j as e,C as u,b as h,c as x,d as f,k as j,A as _,I as B,B as z,f as H}from"./CurrentUser.5db6b464.js";import{r as t}from"./index.178a5b5e.js";import{u as J,F as q,a as $,b as D,c as w,d as E,f as G,e as p}from"./form.833fed8f.js";import"./avatar.51a23f2b.js";import{h as K,t as Q,b as W}from"./common.ea352216.js";import{c as X}from"./User.5c3d6661.js";import{D as Y}from"./DeepLinkDialog.a23ef2f9.js";import{E as Z}from"./ExternalLink.14186860.js";function fe(ee){const d=J({defaultValues:{account:""}}),[A,b]=t.useState(!1),[g,U]=t.useState(),[r,se]=t.useState(),[n,te]=t.useState(),[m,re]=t.useState(0),s=t.useSyncExternalStore(v.subscribe,v.get,()=>!0),S=t.useSyncExternalStore(k.subscribe,k.get,()=>!0),i=t.useSyncExternalStore(y.subscribe,y.get,()=>!0);t.useSyncExternalStore(F.subscribe,F.get,()=>!0),M(s&&s.chain?s.chain:"bitshares",["assets","globalParams","marketSearch"]);const[C,T]=t.useState(0);t.useEffect(()=>{if(i&&i.length){const a=i.find(l=>l[0]===0),N=K(a[1].fee,5);T(N)}},[i]);const[I,ae]=t.useState(0),[ne,P]=t.useState();t.useEffect(()=>{let a;return s&&s.id&&(a=X([s.chain,s.id]).subscribe(({data:l,error:O,loading:V})=>{l&&!O&&!V&&P(l)})),()=>{a&&a()}},[s,I]);const[o,R]=t.useState(),c=t.useMemo(()=>n?S.filter(a=>a.symbol===n):[],[n,S]);t.useEffect(()=>{c&&c.length&&R(c[0])},[c]);const[ie,L]=t.useState(!1);return t.useEffect(()=>{g&&U(!1)},[g]),t.useEffect(()=>{r&&L(!1)},[r]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container mx-auto mt-5 mb-5",children:[e.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsx(x,{children:"Transfer assets"}),e.jsxs(f,{children:[e.jsx("p",{children:"Send funds from an account you control to another BitShares account holder."}),e.jsxs("p",{className:"mt-1",children:["⛔ Doesn't yet support a memo, so don't use this form when transfering to external services.",e.jsx("br",{}),"✅ Use for simple transfers between accounts."]})]})]}),e.jsxs(j,{children:[e.jsx(q,{...d,children:e.jsxs("form",{onSubmit:()=>{b(!0),event.preventDefault()},children:[e.jsx($,{control:d.control,name:"account",render:({field:a})=>e.jsxs(D,{children:[e.jsx(w,{children:"Sending account"}),e.jsx(E,{children:e.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[e.jsx("div",{className:"col-span-1 ml-5",children:e.jsx(_,{size:40,name:s&&s.username?s.username:"x",extra:"Sender",expression:{eye:"normal",mouth:"open"},colors:["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]})}),e.jsx("div",{className:"col-span-7",children:e.jsx(B,{disabled:!0,placeholder:"Bitshares account (1.2.x)",className:"mb-1 mt-1",value:`${s&&s.username?s.username:"?"} (${s&&s.id?s.id:"?"})`})})]})}),e.jsx(G,{children:"This is the account that owns the market order which is being updated."}),e.jsx(p,{})]})}),e.jsx($,{control:d.control,name:"networkFee",render:({field:a})=>e.jsxs(D,{children:[e.jsx(w,{children:"Network fee"}),e.jsx(E,{children:e.jsx(B,{disabled:!0,placeholder:`${C} BTS`,className:"mb-3 mt-3"})}),s.id===s.referrer?e.jsxs(p,{children:["Rebate: ",Q(C*.8,5)," BTS (vesting)"]}):null,e.jsx(p,{})]})}),e.jsx(z,{className:"mt-5 mb-3",variant:"outline",type:"submit",children:"Submit"})]})}),A?e.jsx(Y,{operationName:"transfer",username:s.username,usrChain:s.chain,userID:s.id,dismissCallback:b,headerText:`Sending ${m} ${o.symbol} (${o.id}) to ${r.name} from ${s.username}`,trxJSON:[{fee:{amount:0,asset_id:"1.3.0"},from:s.id,to:r.id,amount:{amount:W(m,o.precision).toFixed(0),asset_id:o.id},extensions:[]}]},`Sending${m}${n}to${r.name}from${s.username}`):null]})]})}),e.jsxs("div",{className:"grid grid-cols-2 mt-5 gap-5",children:[r&&r.name?e.jsx("div",{className:"col-span-1",children:e.jsxs(u,{children:[e.jsxs(h,{className:"pb-0 mb-0",children:[e.jsx(x,{children:"Double check the above details!"}),e.jsx(f,{children:"Avoid heartbreak, check your inputs!"})]}),e.jsx(j,{className:"text-sm",children:e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:[e.jsx("li",{children:"Before you proceed, please double check the form inputs."}),e.jsx("li",{children:"Validate the entire Beet prompt contents before you broadcast the transaction."}),e.jsx("li",{children:e.jsx(Z,{type:"text",classnamecontents:"",hyperlink:`https://blocksights.info/#/accounts/${r.name}`,text:`Click here to view ${r.name}'s account on the
                        Blocksights blockchain explorer.`})})]})})]})}):null,r&&r.name?e.jsx("div",{className:"col-span-1",children:e.jsxs(u,{children:[e.jsxs(h,{className:"pb-0 mb-0",children:[e.jsx(x,{children:"Beware! Don't fall for scams!"}),e.jsx(f,{children:"Be vigilant against scammers!"})]}),e.jsx(j,{className:"text-sm",children:e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:[e.jsx("li",{children:"Crypto exchanges will NEVER direct message you in with special transfer instructions to follow for deposits nor withdrawals."}),e.jsx("li",{children:"Asset transfer operations are permanent and the majority of assets are irrecoverable if erroneously transferred."}),e.jsx("li",{children:"If something sounds too good to be true, then it likely is, don't fall victim to scammers tricks."})]})})]})}):null]}),e.jsx("div",{className:"grid grid-cols-1 mt-5",children:s&&s.username&&s.username.length?e.jsx(H,{usr:s}):null})]})})}export{fe as default};
