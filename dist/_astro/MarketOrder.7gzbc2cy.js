import{u as js,l as bs,j as e,c as gs,i as fs}from"./utils.CoSl1RWq.js";import{r as t}from"./index.sXsv9c-e.js";import{u as ks,F as Os,a as f,b as k,c as M,d as O,f as N,e as I}from"./form.O_r1isSb.js";import{l as Ns,m as Ss,n as Ms,o as Cs,p as ws,q as vs,L as ne,r as ie,t as ys}from"./dialog.8HOXxM8G.js";import{$ as Be,C as H,a as q,b as z,c as U,e as ce}from"./users.R3-HkUNM.js";import{S as Ts,a as Ds,b as As,c as Ls,d as V}from"./select.X9HrpY5y.js";import{H as oe,a as de,b as me}from"./hover-card.xm2hZFE_.js";import{P as R,a as Q,b as J}from"./popover.u-Mm-IT9.js";import{B as W}from"./button._UsuMLkQ.js";import{I as p}from"./input.LAd1ue8h.js";import{a as Pe,C as Fe,S as Ee}from"./checkbox.KaqqOlFB.js";import{L as C,D as $e}from"./DeepLinkDialog.euDoZ0lZ.js";import{f as _s,C as Bs}from"./calendar.GcmDcWKt.js";import{S as Ps}from"./scroll-area.zUgU1QDW.js";import{T as xe}from"./toggle.fOZgpfkx.js";import{B as he}from"./badge.KzOuQ34z.js";import{f as Ie,g as He,d as qe,e as ze,j as Ue,k as Ve,u as Fs}from"./Init.zlIhPQa1.js";import{h as Y,i as Es,e as Re,b as Ce,t as $s}from"./common.1hfIZstp.js";import{b as Is}from"./User.D7H4eiaX.js";import{a as Hs}from"./Market.wR5Geac1.js";import{A as qs}from"./Avatar.YIoG-MVg.js";import{E as zs}from"./ExternalLink.su8-pHSR.js";import{P as Us}from"./PoolDialogs._mPGjqWN.js";import"./index.uYDp4DLV.js";import"./index.QjywInIh.js";import"./index.0G9Tm10-.js";import"./index.f2GGseSc.js";import"./index.sg5Asqa-.js";import"./index.nCjDGh3z.js";import"./index.UUjOqZ5j.js";import"./index.esm.yz4690tU.js";function Cr(Vs){const{t:s,i18n:Rs}=js(bs.get(),{i18n:fs}),j=ks({defaultValues:{account:""}}),[n,Qe]=t.useState(),[a,Je]=t.useState(),[ue,We]=t.useState(0),[Z,Ge]=t.useState(0),[pe,Ke]=t.useState(0),[Xe,Ye]=t.useState(),[w,je]=t.useState("locked"),[S,ee]=t.useState("locked"),[y,B]=t.useState("locked"),[T,we]=t.useState("locked"),[Ze,ve]=t.useState(!1),[es,ye]=t.useState(!1),[P,se]=t.useState(0),[D,re]=t.useState(0),[te,F]=t.useState(0),[Te,ss]=t.useState(!1),[G,rs]=t.useState("1hr"),[ts,be]=t.useState(()=>{const c=new Date,l=60*60*1e3;return new Date(c.getTime()+l)}),[v,ae]=t.useState(new Date(Date.now()+7*24*60*60*1e3));t.useEffect(()=>{G==="specific"&&v&&be(v)},[G,v]);const[b,g]=t.useState(0),[A,De]=t.useState(!1),[E,ge]=t.useState(1),[$,fe]=t.useState(100),[Qs,as]=t.useState(1e6),[K,Ae]=t.useState(!1),i=t.useSyncExternalStore(Be.subscribe,Be.get,()=>!0),ke=t.useSyncExternalStore(Ie.subscribe,Ie.get,()=>!0),Oe=t.useSyncExternalStore(He.subscribe,He.get,()=>!0),Ne=t.useSyncExternalStore(qe.subscribe,qe.get,()=>!0),Se=t.useSyncExternalStore(ze.subscribe,ze.get,()=>!0);t.useSyncExternalStore(Ue.subscribe,Ue.get,()=>!0),t.useSyncExternalStore(Ve.subscribe,Ve.get,()=>!0);const L=t.useMemo(()=>i&&i.chain?i.chain:"bitshares",[i]);Fs(L??"bitshares",["assets","globalParams","pools"]);const Le=t.useMemo(()=>L&&(ke||Oe)?L==="bitshares"?ke:Oe:[],[ke,Oe,L]),le=t.useMemo(()=>L&&(Ne||Se)?L==="bitshares"?Ne:Se:[],[Ne,Se,L]),[_e,ls]=t.useState(0);t.useEffect(()=>{if(le&&le.length){const c=le.find(r=>r[0]===77),l=Y(c[1].fee,5);ls(l)}},[le]);const[u,ns]=t.useState();t.useEffect(()=>{async function c(){const l=new URLSearchParams(window.location.search),o=Object.fromEntries(l.entries()).id;if(!(!o||!o.includes("1.7.")))return{id:o}}i&&i.chain&&window.location.search&&c().then(({id:l})=>{ns(l)})},[i]);const[h,is]=t.useState();t.useEffect(()=>{let c;return u&&i&&i.chain&&(c=Hs([i.chain,u]).subscribe(({data:r})=>{if(r&&!r.error&&!r.loading){is(r);const o=Le.find(Me=>Me.id===r.sell_price.quote.asset_id),d=Le.find(Me=>Me.id===r.sell_price.base.asset_id);Qe(o),Je(d);const m=Y(r.sell_price.quote.amount,o.precision),x=Y(r.sell_price.base.amount,d.precision),_=Es(d.id,o.id);ss(_),We(m),Ge(x),Ke(_?x/m:x*m),Ye(r.expiration),se(x),F(m),re(_?x/m:x*m);const X=r.on_fill.length?r.on_fill[0][1]:null;X&&(De(!0),ge(X.spread_percent/100),fe(X.size_percent/100),as(X.expiration_seconds),Ae(X.repeat))}})),()=>{c&&c()}},[u,i]);const[Js,cs]=t.useState(),[os,ds]=t.useState(0),[ms,xs]=t.useState(0);t.useEffect(()=>{let c;return i&&i.id&&h&&a&&n&&(c=Is([i.chain,i.id]).subscribe(({data:r,error:o,loading:d})=>{if(r&&!o&&!d){cs(r);const m=r.find(_=>_.asset_id===a.id),x=r.find(_=>_.asset_id===n.id);xs(m?Y(m.amount,a.precision):0),ds(x?Y(x.amount,n.precision):0)}})),()=>{c&&c()}},[i,h,a,n]);const hs=t.useCallback(Re((c,l)=>{/^[0-9]*\.?[0-9]*$/.test(c)&&c>=0&&c<=100&&(ge(c),g(b+1))},25),[]),us=t.useCallback(Re((c,l)=>{/^[0-9]*\.?[0-9]*$/.test(c)&&c>=0&&c<=100&&(fe(c),g(b+1))},25),[]),ps=t.useMemo(()=>{if(i&&i.id&&u&&a&&n){const c={fee:{amount:0,asset_id:"1.3.0"},seller:i.id,order:u,new_price:w==="editable"?{base:{amount:Ce(P,a.precision),asset_id:a.id},quote:{amount:Ce(te,n.precision),asset_id:n.id}}:void 0,new_expiration:T==="editable"?v:void 0,on_fill:A?[[0,{fee_asset_id:"1.3.0",spread_percent:E?E*100:0,size_percent:$?$*100:0,expiration_seconds:1e9,repeat:K}]]:void 0,extensions:[]};if(S==="editable"){const l=parseFloat(P-Z);(l&&l<0||l&&l>0)&&(c.delta_amount_to_sell={amount:Ce(l,a.precision),asset_id:a.id})}else c.delta_amount_to_sell=void 0;return c}},[i,u,Z,te,a,ts,A,E,$,K]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container mx-auto mt-5 mb-5",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs(H,{children:[e.jsxs(q,{className:"pb-0 mb-0",children:[e.jsx(z,{className:"mb-2",children:e.jsxs("span",{className:"grid grid-cols-2",children:[e.jsx("span",{className:"col-span-1 text-left",children:s("MarketOrder:updatingLimitOrder",{limitOrderID:u})}),e.jsx("span",{className:"text-right",children:e.jsxs(Ns,{children:[e.jsx(Ss,{asChild:!0,children:e.jsx(W,{className:"h-6",children:s("MarketOrder:viewExistingLimitOrderDataButton")})}),e.jsxs(Ms,{className:"sm:max-w-[600px] bg-white",children:[e.jsxs(Cs,{children:[e.jsx(ws,{children:s("MarketOrder:existingLimitOrderDataTitle")}),e.jsx(vs,{children:s("MarketOrder:existingLimitOrderDataDescription")})]}),e.jsxs("div",{className:"grid grid-cols-1",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(Ps,{className:"h-72 rounded-md border text-sm",children:e.jsx("pre",{children:JSON.stringify(h,null,2)})})}),e.jsx("div",{className:"col-span-1 text-left mt-5",children:e.jsx(zs,{variant:"outline",classnamecontents:"",type:"button",text:s("MarketOrder:viewObjectOnBlocksightsInfo"),hyperlink:`https://blocksights.info/#/objects/${u}`})})]})]})]})})]})}),e.jsx(U,{children:s("MarketOrder:bitsharesDexSupportDescription")})]}),e.jsxs(ce,{children:[e.jsx(Os,{...j,children:e.jsxs("form",{children:[e.jsx(f,{control:j.control,name:"account",render:({field:c})=>e.jsxs(k,{children:[e.jsx(M,{children:s("MarketOrder:limitOrderOwnerLabel")}),e.jsx(O,{children:e.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[e.jsx("div",{className:"col-span-1 ml-5",children:h&&i?e.jsx(qs,{size:40,name:i.id===h.seller?i.username:h.seller.replace(".","_"),extra:"Sender",expression:{eye:i.id===h.seller?"normal":"sleepy",mouth:i.id===h.seller?"open":"unhappy"},colors:["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]},`Avatar_${i.id===h.seller?"loggedIn":"loggedOut"}`):null}),e.jsx("div",{className:"col-span-4",children:i&&h?e.jsx(p,{disabled:!0,placeholder:s("MarketOrder:bitsharesAccountPlaceholder"),className:"mb-1 mt-1",value:i&&i.id===h.seller?`${i.username} (${i.id})`:h.seller}):null})]})}),e.jsx(N,{children:s("MarketOrder:limitOrderOwnerDescription")}),h&&i&&i.id!==h.seller?e.jsx(I,{children:s("MarketOrder:limitOrderOwnerWarning")}):null]})}),e.jsx(f,{control:j.control,name:"priceAmount",render:({field:c})=>e.jsx(k,{className:"mt-4 text-xs",children:e.jsxs("span",{className:"grid grid-cols-12",children:[e.jsx("span",{className:"col-span-1",children:e.jsxs(oe,{children:[e.jsx(de,{children:e.jsx(xe,{variant:"outline",onClick:()=>{w==="editable"?(je("locked"),re(pe),S==="locked"&&(B("locked"),F(ue))):(je("editable"),B("editable"))},children:w==="editable"?e.jsx(ne,{className:"h-4 w-4"}):e.jsx(ie,{className:"h-4 w-4"})})}),e.jsx(me,{className:"w-40 text-sm text-center pt-1 pb-1",derp:s("MarketOrder:priceLockHoverCardDescription"),children:s(w==="editable"?"MarketOrder:editingThePrice":"MarketOrder:priceIsLocked")})]},"amountLockCard")}),e.jsxs("span",{className:"col-span-10",children:[e.jsx(M,{children:s(w==="editable"?"MarketOrder:updatingThePrice":"MarketOrder:wantToChangeThePrice")}),e.jsx(N,{children:w==="editable"?s("MarketOrder:existingPriceDescription",{existingPrice:pe,quoteAssetSymbol:n?n.symbol:"?",baseAssetSymbol:a?a.symbol:"?"}):s("MarketOrder:clickToUnlockDescription")})]})]})})}),w==="editable"&&n&&a?e.jsx(O,{children:e.jsxs("span",{className:"grid grid-cols-12 mt-3",children:[e.jsx("span",{className:"col-span-1"}),e.jsx("span",{className:"col-span-7",children:e.jsx(p,{label:s("MarketOrder:priceLabel"),placeholder:`${D} ${n.symbol}/${a.symbol}`,disabled:!0,readOnly:!0})}),e.jsx("span",{className:"col-span-4 ml-3 text-center",children:e.jsxs(R,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(W,{className:"w-full",onClick:()=>event.preventDefault(),variant:"outline",children:s("MarketOrder:setNewPriceButton")})}),e.jsxs(J,{children:[e.jsx(C,{children:s("MarketOrder:provideNewPriceLabel")}),e.jsx(p,{placeholder:D,className:"mb-2 mt-1",onChange:c=>{const l=c.target.value,r=/^[0-9,]*\.?[0-9]*$/;if(l&&l.length&&r.test(l)){const o=parseFloat(l.replaceAll(",",""));o&&(re(o),P&&y==="editable"&&F(parseFloat((P*(Te?1/o:o)).toFixed(n.precision))),g(b+1))}}})]})]})})]})}):null,e.jsx(f,{control:j.control,name:"sellAmount",render:({field:c})=>e.jsxs(k,{className:"mt-4 text-xs",children:[e.jsxs("span",{className:"grid grid-cols-12",children:[e.jsx("span",{className:"col-span-1",children:e.jsxs(oe,{children:[e.jsx(de,{children:e.jsx(xe,{variant:"outline",onClick:()=>{S==="editable"?(ee("locked"),w==="locked"&&B("locked")):(ee("editable"),B("editable"))},children:S==="editable"?e.jsx(ne,{className:"h-4 w-4"}):e.jsx(ie,{className:"h-4 w-4"})})}),e.jsx(me,{className:"w-40 text-sm text-center pt-1 pb-1",children:s(S==="editable"?"MarketOrder:editingAmountBeingSold":"MarketOrder:amountLocked")})]},"amountLockCard")}),e.jsxs("span",{className:"col-span-11",children:[e.jsx(M,{children:S==="editable"?s("MarketOrder:updatingAmountBeingSold",{baseAssetSymbol:a?a.symbol:"?"}):s("MarketOrder:wantToUpdateAmountBeingSold",{baseAssetSymbol:a?a.symbol:"?"})}),e.jsx(N,{children:S==="editable"?s("MarketOrder:existingAmountBeingSold",{existingBaseAmount:Z,baseAssetSymbol:a?a.symbol:"?"}):s("MarketOrder:clickToUnlockAmount")})]})]}),S==="editable"?e.jsx(O,{children:e.jsxs("span",{className:"grid grid-cols-12",children:[e.jsx("span",{className:"col-span-1"}),e.jsx("span",{className:"col-span-7",children:e.jsx(p,{label:s("MarketOrder:amountLabel"),placeholder:`${P} ${a?a.symbol:"?"}`,disabled:!0,readOnly:!0})}),e.jsx("span",{className:"col-span-4 ml-3 text-center",children:e.jsxs(R,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(W,{className:"w-full",onClick:()=>event.preventDefault(),variant:"outline",children:s("MarketOrder:setNewSellAmountButton")})}),e.jsxs(J,{children:[e.jsx(C,{children:s("MarketOrder:provideNewAmountLabel")}),e.jsx(p,{placeholder:P,className:"mb-2",onChange:l=>{const r=l.target.value,o=/^[0-9,]*\.?[0-9]*$/;if(r&&r.length&&o.test(r)){const d=parseFloat(r.replaceAll(",",""));d&&(se(d.toFixed(a.precision)),D&&F(parseFloat((d*(Te?1/D:D)).toFixed(n.precision))),g(b+1))}}})]})]})})]})}):null]})}),e.jsx(f,{control:j.control,name:"sellTotal",render:({field:c})=>e.jsxs(k,{className:"mt-4 text-xs",children:[e.jsxs("span",{className:"grid grid-cols-12",children:[e.jsx("span",{className:"col-span-1",children:e.jsxs(oe,{children:[e.jsx(de,{children:e.jsx(xe,{variant:"outline",onClick:()=>{y==="editable"?(B("locked"),F(ue),ee("locked"),se(Z),je("locked"),re(pe)):(B("editable"),ee("editable"))},children:y==="editable"?e.jsx(ne,{className:"h-4 w-4"}):e.jsx(ie,{className:"h-4 w-4"})})}),e.jsx(me,{className:"w-40 text-sm text-center pt-1 pb-1",children:s(y==="editable"?"MarketOrder:editingTotalAmountBeingSold":"MarketOrder:totalAmountLocked")})]},"sellTotalCard")}),e.jsxs("span",{className:"col-span-11",children:[e.jsx(M,{children:S==="editable"||y==="editable"?s("MarketOrder:updatingTotalAmountBeingBought"):s("MarketOrder:wantToUpdateTotalAmountBeingBought",{quoteAssetSymbol:n?n.symbol:"?"})}),e.jsx(N,{children:y==="editable"?s("MarketOrder:existingTotalAmountBeingBought",{existingQuoteAmount:ue,quoteAssetSymbol:n?n.symbol:"?"}):s("MarketOrder:clickToUnlockTotalAmount",{quoteAssetSymbol:n?n.symbol:"?"})})]})]}),y==="editable"&&a&&n?e.jsx(O,{children:e.jsxs("span",{className:"grid grid-cols-12",children:[e.jsx("span",{className:"col-span-1"}),e.jsx("span",{className:"col-span-7",children:e.jsx(p,{label:s("MarketOrder:totalLabel"),placeholder:`${te} ${n?n.symbol:"?"}`,disabled:!0,readOnly:!0})}),e.jsx("span",{className:"col-span-4 ml-3 text-center",children:e.jsxs(R,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(W,{className:"w-full",onClick:()=>event.preventDefault(),variant:"outline",children:s("MarketOrder:setNewTotalAmountButton")})}),e.jsxs(J,{children:[e.jsx(C,{children:s("MarketOrder:provideNewTotalLabel")}),e.jsx(p,{placeholder:te,className:"mb-2 mt-1",onChange:l=>{const r=l.target.value,o=/^[0-9,]*\.?[0-9]*$/;if(r&&r.length&&o.test(r)){const d=parseFloat(r.replaceAll(",",""));d&&(F(d.toFixed(n.precision)),D&&se((d/D).toFixed(a.precision)),g(b+1))}}})]})]})})]})}):null]})}),e.jsx(f,{control:j.control,name:"expiry",render:({field:c})=>e.jsxs(k,{children:[e.jsxs("span",{className:"grid grid-cols-12 mt-4 text-sm",children:[e.jsx("span",{className:"col-span-1",children:e.jsxs(oe,{children:[e.jsx(de,{children:e.jsx(xe,{variant:"outline",onClick:()=>{T==="editable"?(we("locked"),ae(new Date(Xe))):we("editable")},children:T==="editable"?e.jsx(ne,{className:"h-4 w-4"}):e.jsx(ie,{className:"h-4 w-4"})})}),e.jsx(me,{className:"w-40 text-sm text-center pt-1 pb-1",children:s(T==="editable"?"MarketOrder:editingExpiration":"MarketOrder:expirationLocked")})]},"sellTotalCard")}),e.jsxs("span",{className:"col-span-11",children:[e.jsx(M,{children:s(T==="editable"?"MarketOrder:updatingExpiration":"MarketOrder:wantToUpdateExpiration")}),e.jsx(N,{children:T==="editable"?s("MarketOrder:existingExpiration",{existingExpiration:h.expiration.replace("T"," ")}):s("MarketOrder:clickToUnlockExpiration")})]})]}),T==="editable"?e.jsx(e.Fragment,{children:e.jsxs("span",{className:"grid grid-cols-12",children:[e.jsx("span",{className:"col-span-1"}),e.jsx("span",{className:"col-span-7",children:e.jsx(O,{onValueChange:l=>{rs(l);const r=60*60*1e3,o=24*r;if(l!=="specific"){const d=new Date;let m;if(l==="1hr")m=new Date(d.getTime()+r);else if(l==="12hr"){const x=r*12;m=new Date(d.getTime()+x)}else if(l==="24hr"){const x=o;m=new Date(d.getTime()+x)}else if(l==="7d"){const x=o*7;m=new Date(d.getTime()+x)}else if(l==="30d"){const x=o*30;m=new Date(d.getTime()+x)}m&&ae(m),be(l)}else l==="specific"&&be();g(b+1)},children:e.jsxs(Ts,{children:[e.jsx(Ds,{className:"mb-3",children:e.jsx(As,{placeholder:"1hr"})}),e.jsxs(Ls,{className:"bg-white",children:[e.jsx(V,{value:"1hr",children:s("MarketOrder:oneHour")}),e.jsx(V,{value:"12hr",children:s("MarketOrder:twelveHours")}),e.jsx(V,{value:"24hr",children:s("MarketOrder:twentyFourHours")}),e.jsx(V,{value:"7d",children:s("MarketOrder:sevenDays")}),e.jsx(V,{value:"30d",children:s("MarketOrder:thirtyDays")}),e.jsx(V,{value:"specific",children:s("MarketOrder:specificDate")})]})]})})}),e.jsx("span",{className:"col-span-4 text-center ml-3",children:G==="specific"?e.jsxs(R,{children:[e.jsx(Q,{asChild:!0,children:e.jsxs(W,{variant:"outline",className:gs("w-full justify-start text-left font-normal",!v&&"text-muted-foreground"),children:[e.jsx(ys,{className:"mr-2 h-4 w-4"}),v?_s(v,"PPP"):e.jsx("span",{children:s("MarketOrder:pickADate")})]})}),e.jsx(J,{className:"w-auto p-0",align:"start",children:e.jsx(Bs,{mode:"single",selected:v,onSelect:l=>{if(new Date(l)<new Date){ae(new Date(Date.now()+1*24*60*60*1e3));return}ae(l)},initialFocus:!0})})]}):null}),e.jsx("span",{className:"col-span-1"}),e.jsx("span",{className:"col-span-11",children:e.jsx(N,{children:G!=="specific"?s("MarketOrder:limitOrderExpiry",{expiryType:G}):null})})]})}):null]})}),e.jsx(Pe,{className:"mb-2 mt-2"}),e.jsx(f,{control:j.control,name:"osoValue",render:({field:c})=>e.jsxs(k,{children:[e.jsx(O,{children:e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx(Fe,{id:"terms1",checked:A,onClick:()=>{De(!A),g(b+1)}}),e.jsx("label",{htmlFor:"terms1",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:s(A?"MarketOrder:osoEnabled":"MarketOrder:enableOso")})]})}),A?e.jsx(N,{children:s("MarketOrder:autoOsoActive")}):null]})}),A?e.jsxs(e.Fragment,{children:[e.jsx(f,{control:j.control,name:"osoSpread",render:({field:c})=>e.jsxs(k,{className:"mt-2 text-xs",children:[e.jsx(M,{className:"text-sm",children:s("MarketOrder:spreadPercentLabel")}),e.jsx(N,{children:s("MarketOrder:spreadPercentDescription")}),e.jsx(O,{children:e.jsxs("span",{className:"grid grid-cols-12",children:[e.jsxs("span",{className:"col-span-9",children:[e.jsx(p,{label:s("MarketOrder:spreadPercentInput"),placeholder:E,disabled:!0,readOnly:!0}),e.jsx(Ee,{className:"mt-3",defaultValue:[E],max:100,min:1,step:.01,onValueChange:l=>{hs(l[0])}})]}),e.jsx("span",{className:"col-span-3 ml-3 text-center",children:e.jsxs(R,{children:[e.jsx(Q,{asChild:!0,children:e.jsx("span",{onClick:()=>{event.preventDefault()},className:"inline-block border border-grey rounded pl-4 pb-1 pr-4 text-lg",children:e.jsx(C,{children:s("MarketOrder:editSpreadLabel")})})}),e.jsxs(J,{children:[e.jsx(C,{children:s("MarketOrder:provideNewSpreadPercentLabel")}),e.jsx(p,{placeholder:E,className:"mb-2 mt-1",onChange:l=>{const r=l.target.value,o=/^[0-9]*\.?[0-9]*$/;r&&r.length&&o.test(r)&&r>=1&&r<=100&&(ge(r),g(b+1))}})]})]})})]})}),e.jsx(I,{})]})}),e.jsx(f,{control:j.control,name:"osoSize",render:({field:c})=>e.jsxs(k,{className:"mt-4 text-xs",children:[e.jsx(M,{className:"text-sm",children:s("MarketOrder:sizePercentLabel")}),e.jsx(N,{children:s("MarketOrder:sizePercentDescription")}),e.jsx(O,{children:e.jsxs("span",{className:"grid grid-cols-12",children:[e.jsxs("span",{className:"col-span-9",children:[e.jsx(p,{label:s("MarketOrder:sizePercentLabel"),placeholder:$,disabled:!0,readOnly:!0}),e.jsx(Ee,{className:"mt-3",defaultValue:[$],max:100,min:0,step:.01,onValueChange:l=>{us(l[0])}})]}),e.jsx("span",{className:"col-span-3 ml-3 text-center",children:e.jsxs(R,{children:[e.jsx(Q,{asChild:!0,children:e.jsx("span",{onClick:()=>{event.preventDefault()},className:"inline-block border border-grey rounded pl-4 pb-1 pr-4 text-lg",children:e.jsx(C,{children:s("MarketOrder:editSizeLabel")})})}),e.jsxs(J,{children:[e.jsx(C,{children:s("MarketOrder:provideNewSizePercentLabel")}),e.jsx(p,{placeholder:$,className:"mb-2 mt-1",onChange:l=>{const r=l.target.value,o=/^[0-9]*\.?[0-9]*$/;r&&r.length&&o.test(r)&&r>=0&&r<=100&&(fe(r),g(b+1))}})]})]})})]})}),e.jsx(I,{})]})}),e.jsx(f,{control:j.control,name:"repeatValue",render:({field:c})=>e.jsxs(k,{className:"mt-4 text-xs",children:[e.jsx(M,{className:"text-sm",children:s("MarketOrder:setOsoRepeatLabel")}),e.jsx(N,{children:s("MarketOrder:osoRepeatDescription")}),e.jsx(O,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"terms2",checked:K,onClick:()=>{Ae(!K),g(b+1)}}),e.jsx("label",{htmlFor:"terms2",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:s(K?"MarketOrder:osoConfiguredToRepeat":"MarketOrder:osoConfiguredNotToRepeat")})]})}),e.jsx(I,{})]})})]}):null,e.jsx(Pe,{className:"mt-3"}),e.jsx(f,{control:j.control,name:"networkFee",render:({field:c})=>e.jsxs(k,{children:[e.jsx(M,{children:s("MarketOrder:networkFeeLabel")}),e.jsx(O,{children:e.jsx(p,{disabled:!0,placeholder:`${_e} BTS`,className:"mb-3 mt-3"})}),i.id===i.referrer?e.jsx(I,{children:s("MarketOrder:rebateMessage",{rebate:$s(_e*.8,5)})}):null,e.jsx(I,{})]})}),e.jsx(W,{className:"mt-5 mb-3",variant:"outline",onClick:c=>{ye(!0),c.preventDefault()},children:s("MarketOrder:submitLimitOrderChangesButton")})]})}),es?e.jsx($e,{operationName:"limit_order_update",username:i.username,usrChain:i.chain,userID:i.id,dismissCallback:ye,headerText:s("MarketOrder:updatingLimitOrderHeader",{limitOrderID:u}),trxJSON:[ps]},`limit_order_update_${u}`):null]})]}),e.jsxs("div",{className:"grid grid-cols-2 mt-3 gap-5",children:[e.jsxs(H,{children:[e.jsxs(q,{className:"pb-0",children:[e.jsxs(z,{children:[n?n.symbol:"?"," (",n?n.id:"1.3.x",")",s("MarketOrder:balance")]}),e.jsx(U,{children:s("MarketOrder:limitOrderQuoteAsset")})]}),e.jsxs(ce,{children:[os," ",n?n.symbol:"?"]})]}),e.jsxs(H,{children:[e.jsxs(q,{className:"pb-0",children:[e.jsxs(z,{children:[a?a.symbol:"?"," (",a?a.id:"1.3.x",")",s("MarketOrder:balance")]}),e.jsx(U,{children:s("MarketOrder:limitOrderBaseAsset")})]}),e.jsxs(ce,{children:[ms," ",a?a.symbol:"?"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 mt-1",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx(H,{className:"mb-3",onClick:()=>{ve(!0)},children:e.jsxs(q,{children:[e.jsx(z,{children:s("MarketOrder:cancelLimitOrderTitle")}),e.jsx(U,{children:s("MarketOrder:cancelLimitOrderDescription",{limitOrderID:u})})]})}),Ze?e.jsx($e,{operationName:"limit_order_cancel",username:i.username,usrChain:i.chain,userID:i.id,dismissCallback:ve,headerText:s("MarketOrder:cancellingLimitOrderHeader",{limitOrderID:u}),trxJSON:[{fee_paying_account:i.id,order:u,extensions:[]}]},`CancellingLimitOrder_${u}`):null,e.jsx("a",{href:`/dex/index.html?market=${n?n.symbol:"?"}_${a?a.symbol:"?"}`,children:e.jsx(H,{children:e.jsxs(q,{children:[e.jsx(z,{children:s("MarketOrder:tradeOnDexTitle")}),e.jsxs(U,{children:[s("MarketOrder:market")," ",n?n.symbol:"?","/",a?a.symbol:"?",e.jsx("br",{}),s("MarketOrder:createNewLimitOrder"),e.jsx("br",{}),s("MarketOrder:seekAdditionalMarketData")]})]})})})]}),e.jsxs(H,{children:[e.jsxs(q,{className:"pb-0",children:[e.jsx(z,{children:s("MarketOrder:borrowAssetsTitle")}),e.jsx(U,{children:s("MarketOrder:borrowAssetsDescription",{quoteAsset:n?n.symbol:"?",baseAsset:a?a.symbol:"?"})})]}),e.jsxs(ce,{children:[e.jsx(C,{children:s("MarketOrder:searchBorrowableAssetsLabel")}),e.jsx("br",{}),e.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=borrow&searchText=${n?n.symbol:""}`,children:e.jsx(he,{children:n?n.symbol:"?"})}),e.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=borrow&searchText=${a?a.symbol:""}`,children:e.jsx(he,{className:"ml-2 mt-1 mb-1",children:a?a.symbol:""})}),e.jsx("br",{}),e.jsx(C,{children:s("MarketOrder:searchAcceptedCollateralLabel")}),e.jsx("br",{}),e.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=collateral&searchText=${n?n.symbol:"?"}`,children:e.jsx(he,{children:n?n.symbol:"?"})}),e.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=collateral&searchText=${a?a.symbol:""}`,children:e.jsx(he,{className:"ml-2 mt-1",children:a?a.symbol:""})})]})]})]})]}),n&&a?e.jsx(Us,{assetA:n.symbol,assetAData:n,assetB:a.symbol,assetBData:a,chain:i.chain}):null]})})}export{Cr as default};
