import{j as X,G as be,S as St}from"./CurrentUser.fcde08c5.js";import{a as w,r as H}from"./index.178a5b5e.js";import{L as pt}from"./DeepLinkDialog.a84028eb.js";var le=e=>e.type==="checkbox",ie=e=>e instanceof Date,T=e=>e==null;const st=e=>typeof e=="object";var C=e=>!T(e)&&!Array.isArray(e)&&st(e)&&!ie(e),it=e=>C(e)&&e.target?le(e.target)?e.target.checked:e.target.value:e,kt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,nt=(e,i)=>e.has(kt(i)),Et=e=>{const i=e.constructor&&e.constructor.prototype;return C(i)&&i.hasOwnProperty("isPrototypeOf")},Te=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function B(e){let i;const t=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Te&&(e instanceof Blob||e instanceof FileList))&&(t||C(e)))if(i=t?[]:{},!t&&!Et(e))i=e;else for(const s in e)e.hasOwnProperty(s)&&(i[s]=B(e[s]));else return e;return i}var ce=e=>Array.isArray(e)?e.filter(Boolean):[],E=e=>e===void 0,d=(e,i,t)=>{if(!i||!C(e))return t;const s=ce(i.split(/[,[\].]+?/)).reduce((n,a)=>T(n)?n:n[a],e);return E(s)||s===e?E(e[i])?t:e[i]:s},J=e=>typeof e=="boolean";const he={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},P={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},z={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ut=w.createContext(null),Fe=()=>w.useContext(ut),Ct=e=>{const{children:i,...t}=e;return w.createElement(ut.Provider,{value:t},i)};var at=(e,i,t,s=!0)=>{const n={defaultValues:i._defaultValues};for(const a in e)Object.defineProperty(n,a,{get:()=>{const c=a;return i._proxyFormState[c]!==P.all&&(i._proxyFormState[c]=!s||P.all),t&&(t[c]=!0),e[c]}});return n},U=e=>C(e)&&!Object.keys(e).length,ot=(e,i,t,s)=>{t(e);const{name:n,...a}=e;return U(a)||Object.keys(a).length>=Object.keys(i).length||Object.keys(a).find(c=>i[c]===(!s||P.all))},de=e=>Array.isArray(e)?e:[e],lt=(e,i,t)=>!e||!i||e===i||de(e).some(s=>s&&(t?s===i:s.startsWith(i)||i.startsWith(s)));function Ie(e){const i=w.useRef(e);i.current=e,w.useEffect(()=>{const t=!e.disabled&&i.current.subject&&i.current.subject.subscribe({next:i.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function Lt(e){const i=Fe(),{control:t=i.control,disabled:s,name:n,exact:a}=e||{},[c,_]=w.useState(t._formState),g=w.useRef(!0),D=w.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),A=w.useRef(n);return A.current=n,Ie({disabled:s,next:V=>g.current&&lt(A.current,V.name,a)&&ot(V,D.current,t._updateFormState)&&_({...t._formState,...V}),subject:t._subjects.state}),w.useEffect(()=>(g.current=!0,D.current.isValid&&t._updateValid(!0),()=>{g.current=!1}),[t]),at(c,t,D.current,!1)}var W=e=>typeof e=="string",ct=(e,i,t,s,n)=>W(e)?(s&&i.watch.add(e),d(t,e,n)):Array.isArray(e)?e.map(a=>(s&&i.watch.add(a),d(t,a))):(s&&(i.watchAll=!0),t);function Ot(e){const i=Fe(),{control:t=i.control,name:s,defaultValue:n,disabled:a,exact:c}=e||{},_=w.useRef(s);_.current=s,Ie({disabled:a,subject:t._subjects.values,next:A=>{lt(_.current,A.name,c)&&D(B(ct(_.current,t._names,A.values||t._formValues,!1,n)))}});const[g,D]=w.useState(t._getWatch(s,n));return w.useEffect(()=>t._removeUnmounted()),g}var Me=e=>/^\w*$/.test(e),ft=e=>ce(e.replace(/["|']|\]/g,"").split(/\.|\[/));function x(e,i,t){let s=-1;const n=Me(i)?[i]:ft(i),a=n.length,c=a-1;for(;++s<a;){const _=n[s];let g=t;if(s!==c){const D=e[_];g=C(D)||Array.isArray(D)?D:isNaN(+n[s+1])?{}:[]}e[_]=g,e=e[_]}return e}function Rt(e){const i=Fe(),{name:t,disabled:s,control:n=i.control,shouldUnregister:a}=e,c=nt(n._names.array,t),_=Ot({control:n,name:t,defaultValue:d(n._formValues,t,d(n._defaultValues,t,e.defaultValue)),exact:!0}),g=Lt({control:n,name:t}),D=w.useRef(n.register(t,{...e.rules,value:_}));return D.current=n.register(t,e.rules),w.useEffect(()=>{const A=n._options.shouldUnregister||a,V=(v,$)=>{const R=d(n._fields,v);R&&(R._f.mount=$)};if(V(t,!0),A){const v=B(d(n._options.defaultValues,t));x(n._defaultValues,t,v),E(d(n._formValues,t))&&x(n._formValues,t,v)}return()=>{(c?A&&!n._state.action:A)?n.unregister(t):V(t,!1)}},[t,n,c,a]),w.useEffect(()=>{d(n._fields,t)&&n._updateDisabledField({disabled:s,fields:n._fields,name:t})},[s,t,n]),{field:{name:t,value:_,...J(s)?{disabled:s}:{},onChange:w.useCallback(A=>D.current.onChange({target:{value:it(A),name:t},type:he.CHANGE}),[t]),onBlur:w.useCallback(()=>D.current.onBlur({target:{value:d(n._formValues,t),name:t},type:he.BLUR}),[t,n]),ref:A=>{const V=d(n._fields,t);V&&A&&(V._f.ref={focus:()=>A.focus(),select:()=>A.select(),setCustomValidity:v=>A.setCustomValidity(v),reportValidity:()=>A.reportValidity()})}},formState:g,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!d(g.errors,t)},isDirty:{enumerable:!0,get:()=>!!d(g.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!d(g.touchedFields,t)},error:{enumerable:!0,get:()=>d(g.errors,t)}})}}const Tt=e=>e.render(Rt(e));var It=(e,i,t,s,n)=>i?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[s]:n||!0}}:{};const Re=(e,i,t)=>{for(const s of t||Object.keys(e)){const n=d(e,s);if(n){const{_f:a,...c}=n;if(a&&i(a.name)){if(a.ref.focus){a.ref.focus();break}else if(a.refs&&a.refs[0].focus){a.refs[0].focus();break}}else C(c)&&Re(c,i)}}};var Je=e=>({isOnSubmit:!e||e===P.onSubmit,isOnBlur:e===P.onBlur,isOnChange:e===P.onChange,isOnAll:e===P.all,isOnTouch:e===P.onTouched}),Qe=(e,i,t)=>!t&&(i.watchAll||i.watch.has(e)||[...i.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length)))),Mt=(e,i,t)=>{const s=ce(d(e,t));return x(s,"root",i[t]),x(e,t,s),e},Ue=e=>e.type==="file",Q=e=>typeof e=="function",ge=e=>{if(!Te)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},ye=e=>W(e),Ne=e=>e.type==="radio",ve=e=>e instanceof RegExp;const Xe={value:!1,isValid:!1},Ye={value:!0,isValid:!0};var dt=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!E(e[0].attributes.value)?E(e[0].value)||e[0].value===""?Ye:{value:e[0].value,isValid:!0}:Ye:Xe}return Xe};const Ze={isValid:!1,value:null};var yt=e=>Array.isArray(e)?e.reduce((i,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:i,Ze):Ze;function et(e,i,t="validate"){if(ye(e)||Array.isArray(e)&&e.every(ye)||J(e)&&!e)return{type:t,message:ye(e)?e:"",ref:i}}var se=e=>C(e)&&!ve(e)?e:{value:e,message:""},tt=async(e,i,t,s,n)=>{const{ref:a,refs:c,required:_,maxLength:g,minLength:D,min:A,max:V,pattern:v,validate:$,name:R,valueAsNumber:xe,mount:fe,disabled:Ae}=e._f,m=d(i,R);if(!fe||Ae)return{};const N=c?c[0]:a,G=F=>{s&&N.reportValidity&&(N.setCustomValidity(J(F)?"":F||""),N.reportValidity())},L={},ne=Ne(a),te=le(a),we=ne||te,j=(xe||Ue(a))&&E(a.value)&&E(m)||ge(a)&&a.value===""||m===""||Array.isArray(m)&&!m.length,Y=It.bind(null,R,t,L),K=(F,b,p,I=z.maxLength,M=z.minLength)=>{const q=F?b:p;L[R]={type:F?I:M,message:q,ref:a,...Y(F?I:M,q)}};if(n?!Array.isArray(m)||!m.length:_&&(!we&&(j||T(m))||J(m)&&!m||te&&!dt(c).isValid||ne&&!yt(c).isValid)){const{value:F,message:b}=ye(_)?{value:!!_,message:_}:se(_);if(F&&(L[R]={type:z.required,message:b,ref:N,...Y(z.required,b)},!t))return G(b),L}if(!j&&(!T(A)||!T(V))){let F,b;const p=se(V),I=se(A);if(!T(m)&&!isNaN(m)){const M=a.valueAsNumber||m&&+m;T(p.value)||(F=M>p.value),T(I.value)||(b=M<I.value)}else{const M=a.valueAsDate||new Date(m),q=ae=>new Date(new Date().toDateString()+" "+ae),Z=a.type=="time",ue=a.type=="week";W(p.value)&&m&&(F=Z?q(m)>q(p.value):ue?m>p.value:M>new Date(p.value)),W(I.value)&&m&&(b=Z?q(m)<q(I.value):ue?m<I.value:M<new Date(I.value))}if((F||b)&&(K(!!F,p.message,I.message,z.max,z.min),!t))return G(L[R].message),L}if((g||D)&&!j&&(W(m)||n&&Array.isArray(m))){const F=se(g),b=se(D),p=!T(F.value)&&m.length>+F.value,I=!T(b.value)&&m.length<+b.value;if((p||I)&&(K(p,F.message,b.message),!t))return G(L[R].message),L}if(v&&!j&&W(m)){const{value:F,message:b}=se(v);if(ve(F)&&!m.match(F)&&(L[R]={type:z.pattern,message:b,ref:a,...Y(z.pattern,b)},!t))return G(b),L}if($){if(Q($)){const F=await $(m,i),b=et(F,N);if(b&&(L[R]={...b,...Y(z.validate,b.message)},!t))return G(b.message),L}else if(C($)){let F={};for(const b in $){if(!U(F)&&!t)break;const p=et(await $[b](m,i),N,b);p&&(F={...p,...Y(b,p.message)},G(p.message),t&&(L[R]=F))}if(!U(F)&&(L[R]={ref:N,...F},!t))return L}}return G(!0),L};function Ut(e,i){const t=i.slice(0,-1).length;let s=0;for(;s<t;)e=E(e)?s++:e[i[s++]];return e}function Nt(e){for(const i in e)if(e.hasOwnProperty(i)&&!E(e[i]))return!1;return!0}function O(e,i){const t=Array.isArray(i)?i:Me(i)?[i]:ft(i),s=t.length===1?e:Ut(e,t),n=t.length-1,a=t[n];return s&&delete s[a],n!==0&&(C(s)&&U(s)||Array.isArray(s)&&Nt(s))&&O(e,t.slice(0,-1)),e}function Ee(){let e=[];return{get observers(){return e},next:n=>{for(const a of e)a.next&&a.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(a=>a!==n)}}),unsubscribe:()=>{e=[]}}}var me=e=>T(e)||!st(e);function ee(e,i){if(me(e)||me(i))return e===i;if(ie(e)&&ie(i))return e.getTime()===i.getTime();const t=Object.keys(e),s=Object.keys(i);if(t.length!==s.length)return!1;for(const n of t){const a=e[n];if(!s.includes(n))return!1;if(n!=="ref"){const c=i[n];if(ie(a)&&ie(c)||C(a)&&C(c)||Array.isArray(a)&&Array.isArray(c)?!ee(a,c):a!==c)return!1}}return!0}var ht=e=>e.type==="select-multiple",Bt=e=>Ne(e)||le(e),Ce=e=>ge(e)&&e.isConnected,gt=e=>{for(const i in e)if(Q(e[i]))return!0;return!1};function _e(e,i={}){const t=Array.isArray(e);if(C(e)||t)for(const s in e)Array.isArray(e[s])||C(e[s])&&!gt(e[s])?(i[s]=Array.isArray(e[s])?[]:{},_e(e[s],i[s])):T(e[s])||(i[s]=!0);return i}function vt(e,i,t){const s=Array.isArray(e);if(C(e)||s)for(const n in e)Array.isArray(e[n])||C(e[n])&&!gt(e[n])?E(i)||me(t[n])?t[n]=Array.isArray(e[n])?_e(e[n],[]):{..._e(e[n])}:vt(e[n],T(i)?{}:i[n],t[n]):t[n]=!ee(e[n],i[n]);return t}var Le=(e,i)=>vt(e,i,_e(i)),mt=(e,{valueAsNumber:i,valueAsDate:t,setValueAs:s})=>E(e)?e:i?e===""?NaN:e&&+e:t&&W(e)?new Date(e):s?s(e):e;function Oe(e){const i=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):i.disabled))return Ue(i)?i.files:Ne(i)?yt(e.refs).value:ht(i)?[...i.selectedOptions].map(({value:t})=>t):le(i)?dt(e.refs).value:mt(E(i.value)?e.ref.value:i.value,e)}var Pt=(e,i,t,s)=>{const n={};for(const a of e){const c=d(i,a);c&&x(n,a,c._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:s}},oe=e=>E(e)?e:ve(e)?e.source:C(e)?ve(e.value)?e.value.source:e.value:e,$t=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function rt(e,i,t){const s=d(e,t);if(s||Me(t))return{error:s,name:t};const n=t.split(".");for(;n.length;){const a=n.join("."),c=d(i,a),_=d(e,a);if(c&&!Array.isArray(c)&&t!==a)return{name:t};if(_&&_.type)return{name:a,error:_};n.pop()}return{name:t}}var jt=(e,i,t,s,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(i||e):(t?s.isOnBlur:n.isOnBlur)?!e:(t?s.isOnChange:n.isOnChange)?e:!0,qt=(e,i)=>!ce(d(e,i)).length&&O(e,i);const Wt={mode:P.onSubmit,reValidateMode:P.onChange,shouldFocusError:!0};function Ht(e={},i){let t={...Wt,...e},s={submitCount:0,isDirty:!1,isLoading:Q(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},n={},a=C(t.defaultValues)||C(t.values)?B(t.defaultValues||t.values)||{}:{},c=t.shouldUnregister?{}:B(a),_={action:!1,mount:!1,watch:!1},g={mount:new Set,unMount:new Set,array:new Set,watch:new Set},D,A=0;const V={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={values:Ee(),array:Ee(),state:Ee()},$=e.resetOptions&&e.resetOptions.keepDirtyValues,R=Je(t.mode),xe=Je(t.reValidateMode),fe=t.criteriaMode===P.all,Ae=r=>u=>{clearTimeout(A),A=setTimeout(r,u)},m=async r=>{if(V.isValid||r){const u=t.resolver?U((await j()).errors):await K(n,!0);u!==s.isValid&&v.state.next({isValid:u})}},N=r=>V.isValidating&&v.state.next({isValidating:r}),G=(r,u=[],o,y,f=!0,l=!0)=>{if(y&&o){if(_.action=!0,l&&Array.isArray(d(n,r))){const h=o(d(n,r),y.argA,y.argB);f&&x(n,r,h)}if(l&&Array.isArray(d(s.errors,r))){const h=o(d(s.errors,r),y.argA,y.argB);f&&x(s.errors,r,h),qt(s.errors,r)}if(V.touchedFields&&l&&Array.isArray(d(s.touchedFields,r))){const h=o(d(s.touchedFields,r),y.argA,y.argB);f&&x(s.touchedFields,r,h)}V.dirtyFields&&(s.dirtyFields=Le(a,c)),v.state.next({name:r,isDirty:b(r,u),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else x(c,r,u)},L=(r,u)=>{x(s.errors,r,u),v.state.next({errors:s.errors})},ne=(r,u,o,y)=>{const f=d(n,r);if(f){const l=d(c,r,E(o)?d(a,r):o);E(l)||y&&y.defaultChecked||u?x(c,r,u?l:Oe(f._f)):M(r,l),_.mount&&m()}},te=(r,u,o,y,f)=>{let l=!1,h=!1;const S={name:r};if(!o||y){V.isDirty&&(h=s.isDirty,s.isDirty=S.isDirty=b(),l=h!==S.isDirty);const k=ee(d(a,r),u);h=d(s.dirtyFields,r),k?O(s.dirtyFields,r):x(s.dirtyFields,r,!0),S.dirtyFields=s.dirtyFields,l=l||V.dirtyFields&&h!==!k}if(o){const k=d(s.touchedFields,r);k||(x(s.touchedFields,r,o),S.touchedFields=s.touchedFields,l=l||V.touchedFields&&k!==o)}return l&&f&&v.state.next(S),l?S:{}},we=(r,u,o,y)=>{const f=d(s.errors,r),l=V.isValid&&J(u)&&s.isValid!==u;if(e.delayError&&o?(D=Ae(()=>L(r,o)),D(e.delayError)):(clearTimeout(A),D=null,o?x(s.errors,r,o):O(s.errors,r)),(o?!ee(f,o):f)||!U(y)||l){const h={...y,...l&&J(u)?{isValid:u}:{},errors:s.errors,name:r};s={...s,...h},v.state.next(h)}N(!1)},j=async r=>t.resolver(c,t.context,Pt(r||g.mount,n,t.criteriaMode,t.shouldUseNativeValidation)),Y=async r=>{const{errors:u}=await j(r);if(r)for(const o of r){const y=d(u,o);y?x(s.errors,o,y):O(s.errors,o)}else s.errors=u;return u},K=async(r,u,o={valid:!0})=>{for(const y in r){const f=r[y];if(f){const{_f:l,...h}=f;if(l){const S=g.array.has(l.name),k=await tt(f,c,fe,t.shouldUseNativeValidation&&!u,S);if(k[l.name]&&(o.valid=!1,u))break;!u&&(d(k,l.name)?S?Mt(s.errors,k,l.name):x(s.errors,l.name,k[l.name]):O(s.errors,l.name))}h&&await K(h,u,o)}}return o.valid},F=()=>{for(const r of g.unMount){const u=d(n,r);u&&(u._f.refs?u._f.refs.every(o=>!Ce(o)):!Ce(u._f.ref))&&De(r)}g.unMount=new Set},b=(r,u)=>(r&&u&&x(c,r,u),!ee(Be(),a)),p=(r,u,o)=>ct(r,g,{..._.mount?c:E(u)?a:W(r)?{[r]:u}:u},o,u),I=r=>ce(d(_.mount?c:a,r,e.shouldUnregister?d(a,r,[]):[])),M=(r,u,o={})=>{const y=d(n,r);let f=u;if(y){const l=y._f;l&&(!l.disabled&&x(c,r,mt(u,l)),f=ge(l.ref)&&T(u)?"":u,ht(l.ref)?[...l.ref.options].forEach(h=>h.selected=f.includes(h.value)):l.refs?le(l.ref)?l.refs.length>1?l.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(f)?!!f.find(S=>S===h.value):f===h.value)):l.refs[0]&&(l.refs[0].checked=!!f):l.refs.forEach(h=>h.checked=h.value===f):Ue(l.ref)?l.ref.value="":(l.ref.value=f,l.ref.type||v.values.next({name:r,values:{...c}})))}(o.shouldDirty||o.shouldTouch)&&te(r,f,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&ae(r)},q=(r,u,o)=>{for(const y in u){const f=u[y],l=`${r}.${y}`,h=d(n,l);(g.array.has(r)||!me(f)||h&&!h._f)&&!ie(f)?q(l,f,o):M(l,f,o)}},Z=(r,u,o={})=>{const y=d(n,r),f=g.array.has(r),l=B(u);x(c,r,l),f?(v.array.next({name:r,values:{...c}}),(V.isDirty||V.dirtyFields)&&o.shouldDirty&&v.state.next({name:r,dirtyFields:Le(a,c),isDirty:b(r,l)})):y&&!y._f&&!T(l)?q(r,l,o):M(r,l,o),Qe(r,g)&&v.state.next({...s}),v.values.next({name:r,values:{...c}}),!_.mount&&i()},ue=async r=>{const u=r.target;let o=u.name,y=!0;const f=d(n,o),l=()=>u.type?Oe(f._f):it(r);if(f){let h,S;const k=l(),re=r.type===he.BLUR||r.type===he.FOCUS_OUT,At=!$t(f._f)&&!t.resolver&&!d(s.errors,o)&&!f._f.deps||jt(re,d(s.touchedFields,o),s.isSubmitted,xe,R),pe=Qe(o,g,re);x(c,o,k),re?(f._f.onBlur&&f._f.onBlur(r),D&&D(0)):f._f.onChange&&f._f.onChange(r);const ke=te(o,k,re,!1),wt=!U(ke)||pe;if(!re&&v.values.next({name:o,type:r.type,values:{...c}}),At)return V.isValid&&m(),wt&&v.state.next({name:o,...pe?{}:ke});if(!re&&pe&&v.state.next({...s}),N(!0),t.resolver){const{errors:Ke}=await j([o]),Dt=rt(s.errors,n,o),ze=rt(Ke,n,Dt.name||o);h=ze.error,o=ze.name,S=U(Ke)}else h=(await tt(f,c,fe,t.shouldUseNativeValidation))[o],y=Number.isNaN(k)||k===d(c,o,k),y&&(h?S=!1:V.isValid&&(S=await K(n,!0)));y&&(f._f.deps&&ae(f._f.deps),we(o,S,h,ke))}},ae=async(r,u={})=>{let o,y;const f=de(r);if(N(!0),t.resolver){const l=await Y(E(r)?r:f);o=U(l),y=r?!f.some(h=>d(l,h)):o}else r?(y=(await Promise.all(f.map(async l=>{const h=d(n,l);return await K(h&&h._f?{[l]:h}:h)}))).every(Boolean),!(!y&&!s.isValid)&&m()):y=o=await K(n);return v.state.next({...!W(r)||V.isValid&&o!==s.isValid?{}:{name:r},...t.resolver||!r?{isValid:o}:{},errors:s.errors,isValidating:!1}),u.shouldFocus&&!y&&Re(n,l=>l&&d(s.errors,l),r?f:g.mount),y},Be=r=>{const u={...a,..._.mount?c:{}};return E(r)?u:W(r)?d(u,r):r.map(o=>d(u,o))},Pe=(r,u)=>({invalid:!!d((u||s).errors,r),isDirty:!!d((u||s).dirtyFields,r),isTouched:!!d((u||s).touchedFields,r),error:d((u||s).errors,r)}),Ft=r=>{r&&de(r).forEach(u=>O(s.errors,u)),v.state.next({errors:r?s.errors:{}})},$e=(r,u,o)=>{const y=(d(n,r,{_f:{}})._f||{}).ref;x(s.errors,r,{...u,ref:y}),v.state.next({name:r,errors:s.errors,isValid:!1}),o&&o.shouldFocus&&y&&y.focus&&y.focus()},Vt=(r,u)=>Q(r)?v.values.subscribe({next:o=>r(p(void 0,u),o)}):p(r,u,!0),De=(r,u={})=>{for(const o of r?de(r):g.mount)g.mount.delete(o),g.array.delete(o),u.keepValue||(O(n,o),O(c,o)),!u.keepError&&O(s.errors,o),!u.keepDirty&&O(s.dirtyFields,o),!u.keepTouched&&O(s.touchedFields,o),!t.shouldUnregister&&!u.keepDefaultValue&&O(a,o);v.values.next({values:{...c}}),v.state.next({...s,...u.keepDirty?{isDirty:b()}:{}}),!u.keepIsValid&&m()},je=({disabled:r,name:u,field:o,fields:y})=>{if(J(r)){const f=r?void 0:d(c,u,Oe(o?o._f:d(y,u)._f));x(c,u,f),te(u,f,!1,!1,!0)}},Se=(r,u={})=>{let o=d(n,r);const y=J(u.disabled);return x(n,r,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:r}},name:r,mount:!0,...u}}),g.mount.add(r),o?je({field:o,disabled:u.disabled,name:r}):ne(r,!0,u.value),{...y?{disabled:u.disabled}:{},...t.progressive?{required:!!u.required,min:oe(u.min),max:oe(u.max),minLength:oe(u.minLength),maxLength:oe(u.maxLength),pattern:oe(u.pattern)}:{},name:r,onChange:ue,onBlur:ue,ref:f=>{if(f){Se(r,u),o=d(n,r);const l=E(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,h=Bt(l),S=o._f.refs||[];if(h?S.find(k=>k===l):l===o._f.ref)return;x(n,r,{_f:{...o._f,...h?{refs:[...S.filter(Ce),l,...Array.isArray(d(a,r))?[{}]:[]],ref:{type:l.type,name:r}}:{ref:l}}}),ne(r,!1,void 0,l)}else o=d(n,r,{}),o._f&&(o._f.mount=!1),(t.shouldUnregister||u.shouldUnregister)&&!(nt(g.array,r)&&_.action)&&g.unMount.add(r)}}},qe=()=>t.shouldFocusError&&Re(n,r=>r&&d(s.errors,r),g.mount),We=(r,u)=>async o=>{o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let y=B(c);if(v.state.next({isSubmitting:!0}),t.resolver){const{errors:f,values:l}=await j();s.errors=f,y=l}else await K(n);O(s.errors,"root"),U(s.errors)?(v.state.next({errors:{}}),await r(y,o)):(u&&await u({...s.errors},o),qe(),setTimeout(qe)),v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:U(s.errors),submitCount:s.submitCount+1,errors:s.errors})},xt=(r,u={})=>{d(n,r)&&(E(u.defaultValue)?Z(r,d(a,r)):(Z(r,u.defaultValue),x(a,r,u.defaultValue)),u.keepTouched||O(s.touchedFields,r),u.keepDirty||(O(s.dirtyFields,r),s.isDirty=u.defaultValue?b(r,d(a,r)):b()),u.keepError||(O(s.errors,r),V.isValid&&m()),v.state.next({...s}))},He=(r,u={})=>{const o=r?B(r):a,y=B(o),f=r&&!U(r)?y:a;if(u.keepDefaultValues||(a=o),!u.keepValues){if(u.keepDirtyValues||$)for(const l of g.mount)d(s.dirtyFields,l)?x(f,l,d(c,l)):Z(l,d(f,l));else{if(Te&&E(r))for(const l of g.mount){const h=d(n,l);if(h&&h._f){const S=Array.isArray(h._f.refs)?h._f.refs[0]:h._f.ref;if(ge(S)){const k=S.closest("form");if(k){k.reset();break}}}}n={}}c=e.shouldUnregister?u.keepDefaultValues?B(a):{}:B(f),v.array.next({values:{...f}}),v.values.next({values:{...f}})}g={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!_.mount&&i(),_.mount=!V.isValid||!!u.keepIsValid,_.watch=!!e.shouldUnregister,v.state.next({submitCount:u.keepSubmitCount?s.submitCount:0,isDirty:u.keepDirty?s.isDirty:!!(u.keepDefaultValues&&!ee(r,a)),isSubmitted:u.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:u.keepDirtyValues?s.dirtyFields:u.keepDefaultValues&&r?Le(a,r):{},touchedFields:u.keepTouched?s.touchedFields:{},errors:u.keepErrors?s.errors:{},isSubmitSuccessful:u.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},Ge=(r,u)=>He(Q(r)?r(c):r,u);return{control:{register:Se,unregister:De,getFieldState:Pe,handleSubmit:We,setError:$e,_executeSchema:j,_getWatch:p,_getDirty:b,_updateValid:m,_removeUnmounted:F,_updateFieldArray:G,_updateDisabledField:je,_getFieldArray:I,_reset:He,_resetDefaultValues:()=>Q(t.defaultValues)&&t.defaultValues().then(r=>{Ge(r,t.resetOptions),v.state.next({isLoading:!1})}),_updateFormState:r=>{s={...s,...r}},_subjects:v,_proxyFormState:V,get _fields(){return n},get _formValues(){return c},get _state(){return _},set _state(r){_=r},get _defaultValues(){return a},get _names(){return g},set _names(r){g=r},get _formState(){return s},set _formState(r){s=r},get _options(){return t},set _options(r){t={...t,...r}}},trigger:ae,register:Se,handleSubmit:We,watch:Vt,setValue:Z,getValues:Be,reset:Ge,resetField:xt,clearErrors:Ft,unregister:De,setError:$e,setFocus:(r,u={})=>{const o=d(n,r),y=o&&o._f;if(y){const f=y.refs?y.refs[0]:y.ref;f.focus&&(f.focus(),u.shouldSelect&&f.select())}},getFieldState:Pe}}function sr(e={}){const i=w.useRef(),t=w.useRef(),[s,n]=w.useState({isDirty:!1,isValidating:!1,isLoading:Q(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Q(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...Ht(e,()=>n(c=>({...c}))),formState:s});const a=i.current.control;return a._options=e,Ie({subject:a._subjects.state,next:c=>{ot(c,a._proxyFormState,a._updateFormState,!0)&&n({...a._formState})}}),w.useEffect(()=>{e.values&&!ee(e.values,t.current)?(a._reset(e.values,a._options.resetOptions),t.current=e.values):a._resetDefaultValues()},[e.values,a]),w.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),i.current.formState=at(s,a),i.current}const ir=Ct,_t=H.createContext({}),nr=({...e})=>X.jsx(_t.Provider,{value:{name:e.name},children:X.jsx(Tt,{...e})}),Ve=()=>{const e=H.useContext(_t),i=H.useContext(bt),{getFieldState:t,formState:s}=Fe(),n=t(e.name,s);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:a}=i;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...n}},bt=H.createContext({}),Gt=H.forwardRef(({className:e,...i},t)=>{const s=H.useId();return X.jsx(bt.Provider,{value:{id:s},children:X.jsx("div",{ref:t,className:be("space-y-2",e),...i})})});Gt.displayName="FormItem";const Kt=H.forwardRef(({className:e,...i},t)=>{const{error:s,formItemId:n}=Ve();return X.jsx(pt,{ref:t,className:be(s&&"text-destructive",e),htmlFor:n,...i})});Kt.displayName="FormLabel";const zt=H.forwardRef(({...e},i)=>{const{error:t,formItemId:s,formDescriptionId:n,formMessageId:a}=Ve();return X.jsx(St,{ref:i,id:s,"aria-describedby":t?`${n} ${a}`:`${n}`,"aria-invalid":!!t,...e})});zt.displayName="FormControl";const Jt=H.forwardRef(({className:e,...i},t)=>{const{formDescriptionId:s}=Ve();return X.jsx("p",{ref:t,id:s,className:be("text-[0.8rem] text-muted-foreground",e),...i})});Jt.displayName="FormDescription";const Qt=H.forwardRef(({className:e,children:i,...t},s)=>{const{error:n,formMessageId:a}=Ve(),c=n?String(n?.message):i;return c?X.jsx("p",{ref:s,id:a,className:be("text-[0.8rem] font-medium text-destructive",e),...t,children:c}):null});Qt.displayName="FormMessage";export{ir as F,nr as a,Gt as b,Kt as c,zt as d,Qt as e,Jt as f,sr as u};
