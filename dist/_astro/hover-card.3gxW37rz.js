import{j as D,c as H}from"./utils.PzWS3l9y.js";import{r as e}from"./index.9AF9g4V4.js";import{c as y,d as N,_ as C,b as i,e as F,$ as L,a as k}from"./index.t3_FU8mF.js";import{$ as g,a as I,b as M,c as A}from"./index.zCLUj7Vu.js";import{$ as U}from"./index.2QTpsPy6.js";let x;const O="HoverCard",[S,re]=y(O,[g]),P=g(),[K,w]=S(O),j=o=>{const{__scopeHoverCard:n,children:r,open:a,defaultOpen:c,onOpenChange:d,openDelay:p=700,closeDelay:$=300}=o,s=P(n),v=e.useRef(0),f=e.useRef(0),b=e.useRef(!1),l=e.useRef(!1),[m=!1,t]=L({prop:a,defaultProp:c,onChange:d}),u=e.useCallback(()=>{clearTimeout(f.current),v.current=window.setTimeout(()=>t(!0),p)},[p,t]),R=e.useCallback(()=>{clearTimeout(v.current),!b.current&&!l.current&&(f.current=window.setTimeout(()=>t(!1),$))},[$,t]),_=e.useCallback(()=>t(!1),[t]);return e.useEffect(()=>()=>{clearTimeout(v.current),clearTimeout(f.current)},[]),e.createElement(K,{scope:n,open:m,onOpenChange:t,onOpen:u,onClose:R,onDismiss:_,hasSelectionRef:b,isPointerDownOnContentRef:l},e.createElement(M,s,r))},z="HoverCardTrigger",B=e.forwardRef((o,n)=>{const{__scopeHoverCard:r,...a}=o,c=w(z,r),d=P(r);return e.createElement(A,C({asChild:!0},d),e.createElement(k.a,C({"data-state":c.open?"open":"closed"},a,{ref:n,onPointerEnter:i(o.onPointerEnter,h(c.onOpen)),onPointerLeave:i(o.onPointerLeave,h(c.onClose)),onFocus:i(o.onFocus,c.onOpen),onBlur:i(o.onBlur,c.onClose),onTouchStart:i(o.onTouchStart,p=>p.preventDefault())})))}),W="HoverCardPortal",[ce,G]=S(W,{forceMount:void 0}),E="HoverCardContent",V=e.forwardRef((o,n)=>{const r=G(E,o.__scopeHoverCard),{forceMount:a=r.forceMount,...c}=o,d=w(E,o.__scopeHoverCard);return e.createElement(N,{present:a||d.open},e.createElement(q,C({"data-state":d.open?"open":"closed"},c,{onPointerEnter:i(o.onPointerEnter,h(d.onOpen)),onPointerLeave:i(o.onPointerLeave,h(d.onClose)),ref:n})))}),q=e.forwardRef((o,n)=>{const{__scopeHoverCard:r,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:p,...$}=o,s=w(E,r),v=P(r),f=e.useRef(null),b=F(n,f),[l,m]=e.useState(!1);return e.useEffect(()=>{if(l){const t=document.body;return x=t.style.userSelect||t.style.webkitUserSelect,t.style.userSelect="none",t.style.webkitUserSelect="none",()=>{t.style.userSelect=x,t.style.webkitUserSelect=x}}},[l]),e.useEffect(()=>{if(f.current){const t=()=>{m(!1),s.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var u;((u=document.getSelection())===null||u===void 0?void 0:u.toString())!==""&&(s.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",t),()=>{document.removeEventListener("pointerup",t),s.hasSelectionRef.current=!1,s.isPointerDownOnContentRef.current=!1}}},[s.isPointerDownOnContentRef,s.hasSelectionRef]),e.useEffect(()=>{f.current&&J(f.current).forEach(u=>u.setAttribute("tabindex","-1"))}),e.createElement(U,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:p,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:i(d,t=>{t.preventDefault()}),onDismiss:s.onDismiss},e.createElement(I,C({},v,$,{onPointerDown:i($.onPointerDown,t=>{t.currentTarget.contains(t.target)&&m(!0),s.hasSelectionRef.current=!1,s.isPointerDownOnContentRef.current=!0}),ref:b,style:{...$.style,userSelect:l?"text":void 0,WebkitUserSelect:l?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})))});function h(o){return n=>n.pointerType==="touch"?void 0:o()}function J(o){const n=[],r=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;r.nextNode();)n.push(r.currentNode);return n}const Q=j,X=B,T=V,ae=Q,se=X,Y=e.forwardRef(({className:o,align:n="center",sideOffset:r=4,...a},c)=>D.jsx(T,{ref:c,align:n,sideOffset:r,className:H("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o),...a}));Y.displayName=T.displayName;export{ae as H,se as a,Y as b};
