import{l as Os,m as ke,n as us,_ as ae,o as xe,p as Fe,q as Bs,j as e,r as ts,s as xt,t as pt,v as ft,$ as Ss,g as _s,h as Cs,w as ks,u as bt,H as ye,a as we,e as Se,C as U,b as Q,c as Z,d as ee,i as H,A as jt,I as k,B as te,L as Me,x as cs,f as gt,D as vt,y as Nt,z as $t,E as yt,F as wt,G as St}from"./CurrentUser.1e0e4221.js";import{r as a}from"./index.178a5b5e.js";import{F as Be}from"./index.esm.60b0ed75.js";import{u as _t,F as Fs,a as O,b as B,c as q,d as V,e as G,f as ue}from"./form.19f24f8d.js";import{P as Ye,a as Ge,b as Je,S as Ps}from"./separator.4890a127.js";import{A as Ct,a as kt}from"./avatar.326a3791.js";import{$ as Ft,e as Pt,h as y,g as Xe,d as We,f as Qe,T as Mt,a as Tt,b as Ze,c as Ms}from"./common.e1bc7670.js";import{B as Ve}from"./badge.7bb8028a.js";import{L as F,D as Ts}from"./DeepLinkDialog.d4274afa.js";import{$ as Vs}from"./index.6a2b73ba.js";import{$ as Ls}from"./index.6e64f2e3.js";import{S as As}from"./scroll-area.8e441ca4.js";import{c as At}from"./User.fd878bac.js";import{c as Rt,C as E}from"./CardRow.95b51c15.js";import{E as Le}from"./ExternalLink.26cefe6b.js";const qs=["PageUp","PageDown"],zs=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ks={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},qe="Slider",[ds,Dt,Et]=Ft(qe),[Us,Pa]=Os(qe,[Et]),[Ot,as]=Us(qe),Bt=a.forwardRef((o,c)=>{const{name:i,min:u=0,max:d=100,step:h=1,orientation:j="horizontal",disabled:b=!1,minStepsBetweenThumbs:w=0,defaultValue:P=[u],value:M,onValueChange:x=()=>{},onValueCommit:t=()=>{},inverted:p=!1,...r}=o,[S,C]=a.useState(null),L=ke(c,_=>C(_)),T=a.useRef(new Set),N=a.useRef(0),g=j==="horizontal",pe=S?!!S.closest("form"):!0,le=g?Vt:Lt,[J=[],ls]=us({prop:M,defaultProp:P,onChange:_=>{var X;(X=[...T.current][N.current])===null||X===void 0||X.focus(),x(_)}}),ze=a.useRef(J);function R(_){const X=Jt(J,_);fe(_,X)}function ns(_){fe(_,N.current)}function he(){const _=ze.current[N.current];J[N.current]!==_&&t(J)}function fe(_,X,{commit:se}={commit:!1}){const Ke=Zt(h),ne=ea(Math.round((_-u)/h)*h+u,Ke),be=Vs(ne,[u,d]);ls((f=[])=>{const I=Yt(f,be,X);if(Qt(I,w*h)){N.current=I.indexOf(be);const re=String(I)!==String(f);return re&&se&&t(I),re?I:f}else return f})}return a.createElement(Ot,{scope:o.__scopeSlider,disabled:b,min:u,max:d,valueIndexToChangeRef:N,thumbs:T.current,values:J,orientation:j},a.createElement(ds.Provider,{scope:o.__scopeSlider},a.createElement(ds.Slot,{scope:o.__scopeSlider},a.createElement(le,ae({"aria-disabled":b,"data-disabled":b?"":void 0},r,{ref:L,onPointerDown:xe(r.onPointerDown,()=>{b||(ze.current=J)}),min:u,max:d,inverted:p,onSlideStart:b?void 0:R,onSlideMove:b?void 0:ns,onSlideEnd:b?void 0:he,onHomeKeyDown:()=>!b&&fe(u,0,{commit:!0}),onEndKeyDown:()=>!b&&fe(d,J.length-1,{commit:!0}),onStepKeyDown:({event:_,direction:X})=>{if(!b){const ne=qs.includes(_.key)||_.shiftKey&&zs.includes(_.key)?10:1,be=N.current,f=J[be],I=h*ne*X;fe(f+I,be,{commit:!0})}}})))),pe&&J.map((_,X)=>a.createElement(It,{key:X,name:i?i+(J.length>1?"[]":""):void 0,value:_})))}),[Hs,Is]=Us(qe,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Vt=a.forwardRef((o,c)=>{const{min:i,max:u,dir:d,inverted:h,onSlideStart:j,onSlideMove:b,onSlideEnd:w,onStepKeyDown:P,...M}=o,[x,t]=a.useState(null),p=ke(c,N=>t(N)),r=a.useRef(),S=Pt(d),C=S==="ltr",L=C&&!h||!C&&h;function T(N){const g=r.current||x.getBoundingClientRect(),pe=[0,g.width],J=hs(pe,L?[i,u]:[u,i]);return r.current=g,J(N-g.left)}return a.createElement(Hs,{scope:o.__scopeSlider,startEdge:L?"left":"right",endEdge:L?"right":"left",direction:L?1:-1,size:"width"},a.createElement(Ys,ae({dir:S,"data-orientation":"horizontal"},M,{ref:p,style:{...M.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const g=T(N.clientX);j?.(g)},onSlideMove:N=>{const g=T(N.clientX);b?.(g)},onSlideEnd:()=>{r.current=void 0,w?.()},onStepKeyDown:N=>{const pe=Ks[L?"from-left":"from-right"].includes(N.key);P?.({event:N,direction:pe?-1:1})}})))}),Lt=a.forwardRef((o,c)=>{const{min:i,max:u,inverted:d,onSlideStart:h,onSlideMove:j,onSlideEnd:b,onStepKeyDown:w,...P}=o,M=a.useRef(null),x=ke(c,M),t=a.useRef(),p=!d;function r(S){const C=t.current||M.current.getBoundingClientRect(),L=[0,C.height],N=hs(L,p?[u,i]:[i,u]);return t.current=C,N(S-C.top)}return a.createElement(Hs,{scope:o.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1},a.createElement(Ys,ae({"data-orientation":"vertical"},P,{ref:x,style:{...P.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:S=>{const C=r(S.clientY);h?.(C)},onSlideMove:S=>{const C=r(S.clientY);j?.(C)},onSlideEnd:()=>{t.current=void 0,b?.()},onStepKeyDown:S=>{const L=Ks[p?"from-bottom":"from-top"].includes(S.key);w?.({event:S,direction:L?-1:1})}})))}),Ys=a.forwardRef((o,c)=>{const{__scopeSlider:i,onSlideStart:u,onSlideMove:d,onSlideEnd:h,onHomeKeyDown:j,onEndKeyDown:b,onStepKeyDown:w,...P}=o,M=as(qe,i);return a.createElement(Fe.span,ae({},P,{ref:c,onKeyDown:xe(o.onKeyDown,x=>{x.key==="Home"?(j(x),x.preventDefault()):x.key==="End"?(b(x),x.preventDefault()):qs.concat(zs).includes(x.key)&&(w(x),x.preventDefault())}),onPointerDown:xe(o.onPointerDown,x=>{const t=x.target;t.setPointerCapture(x.pointerId),x.preventDefault(),M.thumbs.has(t)?t.focus():u(x)}),onPointerMove:xe(o.onPointerMove,x=>{x.target.hasPointerCapture(x.pointerId)&&d(x)}),onPointerUp:xe(o.onPointerUp,x=>{const t=x.target;t.hasPointerCapture(x.pointerId)&&(t.releasePointerCapture(x.pointerId),h(x))})}))}),qt="SliderTrack",zt=a.forwardRef((o,c)=>{const{__scopeSlider:i,...u}=o,d=as(qt,i);return a.createElement(Fe.span,ae({"data-disabled":d.disabled?"":void 0,"data-orientation":d.orientation},u,{ref:c}))}),Rs="SliderRange",Kt=a.forwardRef((o,c)=>{const{__scopeSlider:i,...u}=o,d=as(Rs,i),h=Is(Rs,i),j=a.useRef(null),b=ke(c,j),w=d.values.length,P=d.values.map(t=>Gs(t,d.min,d.max)),M=w>1?Math.min(...P):0,x=100-Math.max(...P);return a.createElement(Fe.span,ae({"data-orientation":d.orientation,"data-disabled":d.disabled?"":void 0},u,{ref:b,style:{...o.style,[h.startEdge]:M+"%",[h.endEdge]:x+"%"}}))}),Ds="SliderThumb",Ut=a.forwardRef((o,c)=>{const i=Dt(o.__scopeSlider),[u,d]=a.useState(null),h=ke(c,b=>d(b)),j=a.useMemo(()=>u?i().findIndex(b=>b.ref.current===u):-1,[i,u]);return a.createElement(Ht,ae({},o,{ref:h,index:j}))}),Ht=a.forwardRef((o,c)=>{const{__scopeSlider:i,index:u,...d}=o,h=as(Ds,i),j=Is(Ds,i),[b,w]=a.useState(null),P=ke(c,C=>w(C)),M=Bs(b),x=h.values[u],t=x===void 0?0:Gs(x,h.min,h.max),p=Gt(u,h.values.length),r=M?.[j.size],S=r?Xt(r,t,j.direction):0;return a.useEffect(()=>{if(b)return h.thumbs.add(b),()=>{h.thumbs.delete(b)}},[b,h.thumbs]),a.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[j.startEdge]:`calc(${t}% + ${S}px)`}},a.createElement(ds.ItemSlot,{scope:o.__scopeSlider},a.createElement(Fe.span,ae({role:"slider","aria-label":o["aria-label"]||p,"aria-valuemin":h.min,"aria-valuenow":x,"aria-valuemax":h.max,"aria-orientation":h.orientation,"data-orientation":h.orientation,"data-disabled":h.disabled?"":void 0,tabIndex:h.disabled?void 0:0},d,{ref:P,style:x===void 0?{display:"none"}:o.style,onFocus:xe(o.onFocus,()=>{h.valueIndexToChangeRef.current=u})}))))}),It=o=>{const{value:c,...i}=o,u=a.useRef(null),d=Ls(c);return a.useEffect(()=>{const h=u.current,j=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(j,"value").set;if(d!==c&&w){const P=new Event("input",{bubbles:!0});w.call(h,c),h.dispatchEvent(P)}},[d,c]),a.createElement("input",ae({style:{display:"none"}},i,{ref:u,defaultValue:c}))};function Yt(o=[],c,i){const u=[...o];return u[i]=c,u.sort((d,h)=>d-h)}function Gs(o,c,i){const h=100/(i-c)*(o-c);return Vs(h,[0,100])}function Gt(o,c){return c>2?`Value ${o+1} of ${c}`:c===2?["Minimum","Maximum"][o]:void 0}function Jt(o,c){if(o.length===1)return 0;const i=o.map(d=>Math.abs(d-c)),u=Math.min(...i);return i.indexOf(u)}function Xt(o,c,i){const u=o/2,h=hs([0,50],[0,u]);return(u-h(c)*i)*i}function Wt(o){return o.slice(0,-1).map((c,i)=>o[i+1]-c)}function Qt(o,c){if(c>0){const i=Wt(o);return Math.min(...i)>=c}return!0}function hs(o,c){return i=>{if(o[0]===o[1]||c[0]===c[1])return c[0];const u=(c[1]-c[0])/(o[1]-o[0]);return c[0]+u*(i-o[0])}}function Zt(o){return(String(o).split(".")[1]||"").length}function ea(o,c){const i=Math.pow(10,c);return Math.round(o*i)/i}const Js=Bt,sa=zt,ta=Kt,aa=Ut,ss=a.forwardRef(({className:o,...c},i)=>e.jsxs(Js,{ref:i,className:ts("relative flex w-full touch-none select-none items-center",o),...c,children:[e.jsx(sa,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(ta,{className:"absolute h-full bg-primary"})}),e.jsx(aa,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));ss.displayName=Js.displayName;const Xs="Checkbox",[la,Ma]=Os(Xs),[na,ra]=la(Xs),ia=a.forwardRef((o,c)=>{const{__scopeCheckbox:i,name:u,checked:d,defaultChecked:h,required:j,disabled:b,value:w="on",onCheckedChange:P,...M}=o,[x,t]=a.useState(null),p=ke(c,N=>t(N)),r=a.useRef(!1),S=x?!!x.closest("form"):!0,[C=!1,L]=us({prop:d,defaultProp:h,onChange:P}),T=a.useRef(C);return a.useEffect(()=>{const N=x?.form;if(N){const g=()=>L(T.current);return N.addEventListener("reset",g),()=>N.removeEventListener("reset",g)}},[x,L]),a.createElement(na,{scope:i,state:C,disabled:b},a.createElement(Fe.button,ae({type:"button",role:"checkbox","aria-checked":Ce(C)?"mixed":C,"aria-required":j,"data-state":Ws(C),"data-disabled":b?"":void 0,disabled:b,value:w},M,{ref:p,onKeyDown:xe(o.onKeyDown,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:xe(o.onClick,N=>{L(g=>Ce(g)?!0:!g),S&&(r.current=N.isPropagationStopped(),r.current||N.stopPropagation())})})),S&&a.createElement(da,{control:x,bubbles:!r.current,name:u,value:w,checked:C,required:j,disabled:b,style:{transform:"translateX(-100%)"}}))}),oa="CheckboxIndicator",ca=a.forwardRef((o,c)=>{const{__scopeCheckbox:i,forceMount:u,...d}=o,h=ra(oa,i);return a.createElement(xt,{present:u||Ce(h.state)||h.state===!0},a.createElement(Fe.span,ae({"data-state":Ws(h.state),"data-disabled":h.disabled?"":void 0},d,{ref:c,style:{pointerEvents:"none",...o.style}})))}),da=o=>{const{control:c,checked:i,bubbles:u=!0,...d}=o,h=a.useRef(null),j=Ls(i),b=Bs(c);return a.useEffect(()=>{const w=h.current,P=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(P,"checked").set;if(j!==i&&x){const t=new Event("click",{bubbles:u});w.indeterminate=Ce(i),x.call(w,Ce(i)?!1:i),w.dispatchEvent(t)}},[j,i,u]),a.createElement("input",ae({type:"checkbox","aria-hidden":!0,defaultChecked:Ce(i)?!1:i},d,{tabIndex:-1,ref:h,style:{...o.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function Ce(o){return o==="indeterminate"}function Ws(o){return Ce(o)?"indeterminate":o?"checked":"unchecked"}const Qs=ia,ma=ca,ms=a.forwardRef(({className:o,...c},i)=>e.jsx(Qs,{ref:i,className:ts("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",o),...c,children:e.jsx(ma,{className:ts("flex items-center justify-center text-current"),children:e.jsx(pt,{className:"h-4 w-4"})})}));ms.displayName=Qs.displayName;const ua=a.forwardRef((o,c)=>{const{pressed:i,defaultPressed:u=!1,onPressedChange:d,...h}=o,[j=!1,b]=us({prop:i,onChange:d,defaultProp:u});return a.createElement(Fe.button,ae({type:"button","aria-pressed":j,"data-state":j?"on":"off","data-disabled":o.disabled?"":void 0},h,{ref:c,onClick:xe(o.onClick,()=>{o.disabled||b(!j)})}))}),Zs=ua,ha=ft("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-3",sm:"h-8 px-2",lg:"h-10 px-3"}},defaultVariants:{variant:"default",size:"default"}}),_e=a.forwardRef(({className:o,variant:c,size:i,...u},d)=>e.jsx(Zs,{ref:d,className:ts(ha({variant:c,size:i,className:o})),...u}));_e.displayName=Zs.displayName;const Es={backgroundColor:"#252526",color:"white"},es={charge_market_fee:"The asset issuer can enable market fees.",white_list:"The asset issuer can create a list of approved markets",override_authority:"The asset issuer can transfer this NFT back to themselves.",transfer_restricted:"This asset may only be transferred to/from the issuer or market orders",disable_force_settle:"Users may request force-settlement of this market-issued asset.",global_settle:"The issuer of this market-issued asset has the ability to globally settle the asset",disable_confidential:"The issuer of this asset can disable stealth transactions.",witness_fed_asset:"This market-issued asset can have its price feeds supplied by Bitshares witnesses.",committee_fed_asset:"This market-issued asset can have its price feeds supplied by Bitshares committee members."};function xa(o){const c=new Date(o),u=new Date-c,d=Math.floor(u/(1e3*60*60*24));return d<1?"today":d<30?d+" days ago":Math.floor(d/30)+" months ago"}function Ta(o){const c=_t({defaultValues:{account:""}}),i=a.useSyncExternalStore(Ss.subscribe,Ss.get,()=>!0),u=a.useSyncExternalStore(_s.subscribe,_s.get,()=>!0),d=a.useSyncExternalStore(Cs.subscribe,Cs.get,()=>!0),h=a.useSyncExternalStore(ks.subscribe,ks.get,()=>!0);bt(i&&i.chain?i.chain:"bitshares",["bitAssetData","globalParams","marketSearch"]);const[j,b]=a.useState();a.useEffect(()=>{let s;return i&&i.id&&(s=At([i.chain,i.id]).subscribe(({data:n,error:m,loading:v})=>{n&&!m&&!v&&b(n)})),()=>{s&&s()}},[i]);const[w,P]=a.useState(0);a.useEffect(()=>{if(h&&h.length){const s=h.find(n=>n[0]===3),l=y(s[1].fee,5);P(l)}},[h]);const M=a.useMemo(()=>{if(d&&d.length&&window.location.search){console.log("Parsing url params");const s=new URLSearchParams(window.location.search),l=Object.fromEntries(s.entries()),n=l&&l.id?l.id:null;if(!n||!n.length||n&&!n.includes("1.3.")){console.log("Invalid parameter");return}if(!(d&&d.length?d.map(v=>v.id):[]).includes(n)){console.log("Invalid parameter");return}return n}},[d]),x=a.useMemo(()=>{if(d&&d.length&&window.location.search){const s=new URLSearchParams(window.location.search),l=Object.fromEntries(s.entries()),n=l&&l.id?l.id:null;return!n||!n.length||n&&!n.includes("1.3.")||!(d&&d.length?d.map(v=>v.id):[]).includes(n)?(console.log("Invalid parameter"),!0):!1}},[d]),t=a.useMemo(()=>M&&M.length&&d?d.find(l=>l.id===M):null,[M,d]),p=a.useMemo(()=>t&&u?u.find(l=>l.assetID===t.id):null,[t,u]),r=a.useMemo(()=>{if(p&&u)return d.find(l=>l.id===p.collateral)},[p,u]),S=a.useMemo(()=>{if(r&&u)return u.find(l=>l.assetID===r.id)},[r,u]);a.useMemo(()=>{if(S&&d)return d.find(l=>l.id===S.collateral)},[S,d]);const C=a.useMemo(()=>{if(t&&j&&j.length){const s=j.find(n=>n.asset_id===t.id);return s?y(s.amount,t.p):0}},[t,j]),L=a.useMemo(()=>{if(r&&j&&j.length){const s=j.find(n=>n.asset_id===r.id);return s?y(s.amount,r.p):0}},[r,j]),[T,N]=a.useState(),[g,pe]=a.useState(),[le,J]=a.useState(),[ls,ze]=a.useState(),[R,ns]=a.useState(),[he,fe]=a.useState(),[_,X]=a.useState(),[se,Ke]=a.useState(),[ne,be]=a.useState();a.useState("internal"),a.useEffect(()=>{let s;return p&&p&&i&&i.chain&&(s=Rt([i.chain,t.id,p.collateral,p.id,S&&S.id?S.id:"",i.id]).subscribe(({data:n})=>{n&&!n.error&&!n.loading&&(N(n[0]),J(n[1]),pe(n[2]),n[3].id&&ze(n[3]),ns(n[4]),fe(n[5]),X(n[6]),Ke(n[7].asks),be(n[7].bids))})),()=>{s&&s()}},[t,p,i]);const f=a.useMemo(()=>{if(g&&g.current_feed&&r&&t)return parseFloat((y(parseInt(g.current_feed.settlement_price.quote.amount),r.p)/y(parseInt(g.current_feed.settlement_price.base.amount),t.p)).toFixed(r.p))},[g,t,r]),I=a.useMemo(()=>{if(T&&t&&r){const s=y(parseInt(g.settlement_fund),r.p),l=parseFloat((1/(y(g.settlement_price.quote.amount,r.p)/y(g.settlement_price.base.amount,t.p))).toFixed(t.p));return{finalSettlementFund:s,finalSettlementPrice:l}}},[g,t,r]),re=a.useMemo(()=>{if(g&&t&&r){const s=y(parseInt(g.individual_settlement_debt),t.p),l=y(parseInt(g.individual_settlement_fund),r.p);return{_debt:s,_fund:l}}},[g,t,r]),et=a.useMemo(()=>{if(T){const s=Xe(T.options.flags);return Object.keys(s).map(l=>e.jsxs(ye,{children:[e.jsx(we,{children:e.jsx(Ve,{className:"mr-2",children:l})}),e.jsx(Se,{className:"w-40 text-sm text-center pt-1 pb-1",children:es[l]})]},`${l}_debtFlags`))}},[T]),st=a.useMemo(()=>{if(le){const s=Xe(le.options.flags);return Object.keys(s).map(l=>e.jsxs(ye,{children:[e.jsx(we,{children:e.jsx(Ve,{className:"mr-2",children:l})}),e.jsx(Se,{className:"w-40 text-sm text-center pt-1 pb-1",children:es[l]})]},`${l}_collateralFlags`))}},[le]),tt=a.useMemo(()=>{if(T){const s=Xe(T.options.issuer_permissions);return Object.keys(s).map(l=>e.jsxs(ye,{children:[e.jsx(we,{children:e.jsx(Ve,{className:"mr-2",children:l})}),e.jsx(Se,{className:"w-40 text-sm text-center pt-1 pb-1",children:es[l]})]},`${l}_debtPermissions`))}},[T]),at=a.useMemo(()=>{if(le){const s=Xe(le.options.issuer_permissions);return Object.keys(s).map(l=>e.jsxs(ye,{children:[e.jsx(we,{children:e.jsx(Ve,{className:"mr-2",children:l})}),e.jsx(Se,{className:"w-40 text-sm text-center pt-1 pb-1",children:es[l]})]},`${l}_collateralPermissions`))}},[le]),[rs,xs]=a.useState("buy"),[lt,Te]=a.useState(!1),[je,Ue]=a.useState("editable"),[ge,He]=a.useState("editable"),[ve,Ie]=a.useState("locked"),[ps,is]=a.useState(0),[Y,Ae]=a.useState(0),[W,Re]=a.useState(0),[z,De]=a.useState(0),[Pe,os]=a.useState(!1),[de,Ee]=a.useState(0);a.useEffect(()=>{if(p)if(R&&R.length){const s=R[0],l=y(s.collateral,r.p),n=y(s.debt,t.p),m=p.mcr/1e3,v=s.target_collateral_ratio?s.target_collateral_ratio/1e3:null,$=1/(f*n/l),A=parseFloat($.toFixed(3)),ie=s.target_collateral_ratio?parseFloat((f*(l/(n*(f*(s.target_collateral_ratio/1e3))))).toFixed(r.p)):parseFloat((f*(l/(n*(f*m)))).toFixed(r.p));Re(l),Ae(n),De(A),is(ie),v&&(os(!0),Ee(v))}else{const s=p.mcr/1e3,l=(f*s).toFixed(r.p);Re(l),Ae(1),De(s),is(parseFloat((f*(l/(Y*(f*s)))).toFixed(r.p))),os(!1),Ee(s)}},[R,p]),a.useEffect(()=>{if(f&&r&&Y&&W&&z){const s=parseFloat(de?(f*(W/(Y*(f*de)))).toFixed(r.p):(f*(W/(Y*(f*1.4)))).toFixed(r.p));is(s)}},[f,r,Y,W,z]);const nt=a.useCallback(We((s,l,n,m,v,$,A,ie,Ne)=>{Te(!1);const me=y(1,v),D=y(1,$);let oe=Math.max(parseFloat(s),me),K=parseFloat(n);const ce=parseFloat((oe*l*m).toFixed($)),$e=me*l;if(K<=0||ce<=0||K<D||ce<D){const $s=$e/Oe,ys=D/l,ws=$e;if($s>=D)oe=me,K=$s;else if(ys>=me)oe=ys,K=D;else if(ws>=D)oe=me,K=ws;else{let ht=D/$e;oe=me*ht,K=D}}else K=ce;const Oe=1/(l*oe/K);(A==="locked"||ie==="locked")&&De(Oe),Ne==="locked"&&Re(K),Ae(oe)},200),[]),rt=a.useCallback(We((s,l,n,m,v,$,A,ie,Ne,me)=>{Te(!1);const D=y(1,v),oe=y(1,$),K=parseFloat(n);let ce=Math.max(parseFloat(parseFloat(s).toFixed($)),oe),$e=parseFloat((ce/l/A).toFixed(v));if($e<D&&(ce=D*l*A,$e=D),me==="locked"&&Ae($e),ie==="locked"||Ne==="locked"){const Oe=parseFloat((1/(l*K/ce)).toFixed(3));console.log({updatedRatio:Oe}),De(Oe)}Re(ce)},200),[]),fs=a.useCallback(We((s,l,n,m,v,$,A,ie,Ne,me)=>{Te(!1);let D=parseFloat(s);D<v/1e3&&(D=v/1e3);const oe=parseFloat(m);if(me==="locked"||Ne==="locked"){const K=parseFloat((oe/(l*D)).toFixed($));Ae(K)}if(ie==="locked"){const K=parseFloat(n),ce=parseFloat((K*l*D).toFixed(A));console.log({before:K*l*D,newCollateralAmount:ce,collateralPrecision:A}),Re(ce)}De(D)},5),[]),bs=a.useCallback(We((s,l)=>{/^[0-9]*\.?[0-9]*$/.test(s)&&(s<l/1e3?Ee(l/1e3):s>20?Ee(20):Ee(s))},5),[]),it=a.useMemo(()=>{if(!R||!R.length)return null;const s=R[0].debt,l=R[0].collateral;return{funding_account:i.id,delta_collateral:{amount:0-l,asset_id:p.collateral},delta_debt:{amount:0-s,asset_id:p.assetID},extensions:{}}},[R]),js=a.useMemo(()=>{if(!t||!r)return null;if(R&&R.length){const s=R[0].debt,l=R[0].collateral,n=parseInt(Qe(Y,t.p)),m=parseInt(Qe(W,r.p));let v=0;n>s?v=n-s:n<s&&(v=s-n);let $=0;return m>l?$=m-l:m<l&&($=l-m),v===0||$===0?null:{funding_account:i.id,delta_collateral:{amount:v,asset_id:p.collateral},delta_debt:{amount:$,asset_id:p.assetID},extensions:Pe&&de?{target_collateral_ratio:de}:{}}}else return{funding_account:i.id,delta_collateral:{amount:parseInt(Qe(W,r.p)),asset_id:p.collateral},delta_debt:{amount:parseInt(Qe(Y,t.p)),asset_id:p.assetID},extensions:Pe&&de?{target_collateral_ratio:de}:{}}},[R,t,r,W,Y,Pe,de]),[ot,gs]=a.useState(!1),ct=()=>{const s=R[0],l=y(s.collateral,r.p),n=y(s.debt,t.p),m=s.target_collateral_ratio?`${s.target_collateral_ratio/10}%`:null,v=1/(f*n/l),$=parseFloat(v.toFixed(3)),A=s.target_collateral_ratio?parseFloat((f*(l/(n*(f*(s.target_collateral_ratio/1e3))))).toFixed(r.p)):parseFloat((f*(l/(n*(f*1.4)))).toFixed(r.p));return e.jsxs(U,{className:"mt-2",children:[e.jsxs(Q,{className:"pb-2",children:[e.jsxs(Z,{children:["Your current ",t.s," (",t.id,") margin position"]}),e.jsx(ee,{children:"You have an ongoing margin position for this smartcoin."})]}),e.jsxs(H,{className:"text-sm",children:["Balance: ",e.jsx("b",{children:C??0}),t?` ${t.s}`:" ?",e.jsx("br",{}),"Debt: ",e.jsx("b",{children:y(R[0].debt,t.p)})," ",t.s,e.jsx("br",{}),"Collateral at risk: ",e.jsx("b",{children:y(R[0].collateral,r.p)})," ",r.s,e.jsx("br",{}),"Current ratio: ",e.jsx("b",{children:$}),e.jsx("br",{}),"Margin call price: ",e.jsx("b",{children:A})," ",r.s," (",(1/A).toFixed(t.p)," ",t.s,"/",r.s,")",m?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"Target collateral ratio:",e.jsx("b",{children:m})]}):null,e.jsx("br",{}),e.jsx(te,{className:"mt-3 mr-2",onClick:()=>gs(!0),children:"Close position"}),e.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=borrow&searchText=${t.s}`,children:e.jsxs(te,{className:"mr-2",children:["Borrow ",t.s]})}),e.jsx("a",{href:`/dex/index.html?market=${t.s}_${r.s}`,children:e.jsxs(te,{className:"mr-2",children:["Buy ",t.s," with ",r.s]})}),ot?e.jsx(Ts,{operationName:"call_order_update",username:i.username,usrChain:i.chain,userID:i.id,dismissCallback:gs,headerText:`Closing your ${t.s} debt position`,trxJSON:[it]},`Closing${t.s}debtposition`):null]})]})},vs=({assetInfo:s,bitassetInfo:l,fullAssetInfo:n,fullBitassetInfo:m,type:v,assetInfoFlags:$,assetPermissions:A})=>e.jsxs(U,{className:"mt-2",children:[e.jsxs(Q,{className:"pb-2",children:[e.jsx(Z,{children:e.jsxs("div",{className:"grid grid-cols-8",children:[e.jsx("div",{className:"col-span-6",children:v==="debt"?e.jsxs(e.Fragment,{children:["About the ",l.issuer.id==="1.2.0"?"Bitasset":"Smartcoin"," ",s.s," (",s.id,")"]}):e.jsxs(e.Fragment,{children:["About the backing collateral ",s.s," (",s.id,")"]})}),e.jsx("div",{className:"col-span-2 text-right",children:e.jsxs(vt,{children:[e.jsx(Nt,{asChild:!0,children:e.jsx(te,{variant:"outline",className:"h-5",children:"View JSON"})}),e.jsxs($t,{className:"sm:max-w-[600px] bg-white",children:[e.jsxs(yt,{children:[e.jsxs(wt,{children:[s.s," JSON summary data"]}),e.jsx(St,{children:"The data used to render this card"})]}),e.jsx("div",{className:"grid grid-cols-1",children:e.jsx("div",{className:"col-span-1",children:e.jsx(As,{className:"h-72 rounded-md border text-sm",children:e.jsx("pre",{children:JSON.stringify({fullAssetInfo:n,fullBitassetInfo:m},null,2)})})})})]})]})})]})}),e.jsx(ee,{children:v==="debt"?e.jsxs(e.Fragment,{children:["Use this information to improve your understanding of ",s.s,".",e.jsx("br",{}),"Thoroughly do your own research before proceeding to borrow any smartcoins."]}):e.jsxs(e.Fragment,{children:["Use this information to improve your understanding of ",s.s,".",e.jsx("br",{}),"Thoroughly do your own research before using this asset as smartcoin backing collateral."]})})]}),e.jsxs(H,{children:[e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(F,{children:"General asset info"})}),e.jsx("div",{className:"col-span-1 text-right",children:e.jsx(Le,{classNameContents:"h-5 mb-2",variant:"outline",type:"button",text:"View asset on blocksights.info",hyperlink:`https://blocksights.info/#/assets/${s.id}`})})]}),e.jsxs("div",{className:"grid grid-cols-11 gap-1 w-full text-sm",children:[e.jsx("div",{className:"col-span-5",children:e.jsxs("div",{className:"grid grid-cols-1 gap-1 w-full text-sm",children:[e.jsx(E,{title:"Issuer",button:s.u.split(" ")[0],dialogtitle:`${s.s}'s issuer`,dialogdescription:e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:[e.jsx("li",{children:"This is the blockchain account which created this asset. Pay attention to such a detail to understand what it is you're buying and from whom."}),e.jsx("li",{children:"Asset issuer can change over time as the issuer can easily transfer ownership."}),e.jsx("li",{children:"Committee account owned assets are usually the core bitassets maintained by the committee."}),e.jsx("li",{children:"If the issuer is 'null-account' then the ownership of the asset has effectively been burned."}),e.jsx(Le,{classNameContents:"h-8 mb-2 mt-3",type:"button",text:"View issuer on blocksights.info",hyperlink:`https://blocksights.info/#/accounts/${s.u.split(" ")[0]}`})]}),tooltip:"More about asset issuer"}),e.jsx(E,{title:"Maximum supply",button:y(n.options.max_supply,n.precision),dialogtitle:`${s.s}'s maximum supply`,dialogdescription:e.jsx("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:e.jsx("li",{children:"This is the max supply of this asset"})}),tooltip:"More info on max supply"}),e.jsx(E,{title:"Min quantity",button:y(1,n.precision),dialogtitle:`${s.s}'s minimum quantity`,dialogdescription:e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:[e.jsx("li",{children:"This is the smallest amount of this asset that can be borrowed or used as collateral."}),e.jsx("li",{children:'This is effectively 1 "satoshi" of this asset.'})]}),tooltip:"More about asset precision"}),e.jsx(E,{title:"Precision",button:n.precision,dialogtitle:`${s.s}'s precision`,dialogdescription:e.jsx("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:e.jsx("li",{children:"This is the number of decimal places this asset supports for its quantity."})}),tooltip:"More about asset precision"})]})}),e.jsx("div",{className:"col-span-1 flex justify-center items-center",children:e.jsx(Ps,{orientation:"vertical"})}),e.jsx("div",{className:"col-span-5",children:e.jsxs("div",{className:"grid grid-cols-1 gap-1 w-full text-sm",children:[e.jsx(E,{title:"Market fee",button:`${n.options.market_fee_percent?n.options.market_fee_percent/100:0}%`,dialogtitle:`${s.s}'s market fee`,dialogdescription:e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:[e.jsx("li",{children:"Asset creators can introduce market fees to passively earn as trades occur."}),e.jsx("li",{children:"The market fee only applies to one side of the trade."}),e.jsx("li",{children:"Make sure that the market fee is reasonable before proceeding."})]}),tooltip:"More about the market fee"}),e.jsx(E,{title:"Taker fee percent",button:`${n.options.extensions.taker_fee_percent?n.options.extensions.taker_fee_percent/100:0}%`,dialogtitle:`${s.s}'s taker fee percent`,dialogdescription:e.jsx("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:e.jsx("li",{children:"This is the number of decimal places this asset supports for its quantity."})}),tooltip:"More about taker fee percent"}),e.jsx(E,{title:"Reward percent",button:n.options.extensions.reward_percent?n.options.extensions.reward_percent/100:0,dialogtitle:`${s.s}'s reward percent`,dialogdescription:e.jsx("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:e.jsx("li",{children:"This is the share of the market fee that is paid to the account registrar."})}),tooltip:"More about asset market fee reward percent"})]})})]}),l&&l.id?e.jsxs(e.Fragment,{children:[e.jsx(F,{}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(F,{children:l.issuer.id==="1.2.0"?"Bitasset info":"Smartcoin info"})}),e.jsx("div",{className:"col-span-1 text-right",children:e.jsx(Le,{classNameContents:"h-5 mb-2",variant:"outline",type:"button",text:"View bitasset on blocksights.info",hyperlink:`https://blocksights.info/#/objects/${l.id}`})})]}),e.jsxs("div",{className:"grid grid-cols-11 gap-1 w-full text-sm",children:[e.jsx("div",{className:"col-span-5",children:e.jsxs("div",{className:"grid grid-cols-1 gap-1 w-full text-sm",children:[e.jsx(E,{title:"Collateral asset",button:r?r.s:"?",dialogtitle:`${s.s} smartcoin backing collateral asset`,dialogdescription:e.jsx("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:e.jsx("li",{children:"This is the asset which is used as collateral for issuing this smartcoin."})}),tooltip:"More about smartcoin backing collateral assets"}),e.jsx(E,{title:"MCR",button:`${l?l.mcr/10:0} %`,dialogtitle:`${s.s} minimum collateral requirements`,dialogdescription:e.jsx("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:e.jsx("li",{children:"The minimum collateral requirement is set by the issuer, any margin position which fails to maintain a backing collateral ratio above this value will face margin call."})}),tooltip:"More about smartcoin minimum collateral requirements"}),e.jsx(E,{title:"MSSR",button:`${l?l.mssr/10:0} %`,dialogtitle:`${s.s} maximum Short Squeeze Ratio`,dialogdescription:e.jsx("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:e.jsx("li",{children:"Maximum Short Squeeze Ratio (MSSR): Max. liquidation penalty."})}),tooltip:"More about smartcoin Maximum Short Squeeze Ratio"}),e.jsx(E,{title:"ICR",button:`${l?l.icr/10:0} %`,dialogtitle:`${s.s} Initial Collateral Ratio`,dialogdescription:e.jsx("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:e.jsx("li",{children:"Initial Collateral Ratio (ICR): Minimum CR for updating margin position."})}),tooltip:"More about smartcoin Initial Collateral Ratio"}),e.jsx(E,{title:"Feed qty",button:l?l.feeds.length:0,dialogtitle:`${s.s} smartcoin price feed quantity`,dialogdescription:e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:[e.jsx("li",{children:"This is the quantity of unique recently published price feeds."}),e.jsx("li",{children:"The more feeds, the more decentralized the price feed arguably is."}),e.jsx("li",{children:"Some assets are fed by the committee or the witnesses, such as the bitassets."}),e.jsx("li",{children:"Private smartcoins can be fed by custom price feed publishers."}),e.jsx("li",{children:"You should verify the correctness and the trustworthiness of price feeds to reduce your risk exposure."})]}),tooltip:"More about smartcoin price feed quantities"}),m&&m.options.force_settlement_offset_percent?e.jsx(E,{title:"Settlement offset",button:`${m.options.force_settlement_offset_percent/100}%`,dialogtitle:`${s.s} force settlement offset`,dialogdescription:e.jsx("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:e.jsx("li",{children:"How much a force settlement order will be offset by."})}),tooltip:"More about force settlement offset"}):null]})}),e.jsx("div",{className:"col-span-1 flex justify-center items-center",children:e.jsx(Ps,{orientation:"vertical"})}),e.jsx("div",{className:"col-span-5",children:e.jsxs("div",{className:"grid grid-cols-1 gap-1 w-full text-sm",children:[m&&m.options.extensions&&m.options.extensions.force_settle_fee_percent?e.jsx(E,{title:"Settlement fee",button:`${m.options.extensions.force_settle_fee_percent/100}%`,dialogtitle:`${s.s} force settlement fee`,dialogdescription:e.jsx("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:e.jsx("li",{children:"If you choose to force settle a smartcoin in return for its backing collateral, you will pay this fee."})}),tooltip:"More about smartcoin force settlement fees"}):null,m&&m.options.extensions&&m.options.extensions.margin_call_fee_ratio?e.jsx(E,{title:"Margin call fee",button:`${m.options.extensions.margin_call_fee_ratio/100}%`,dialogtitle:`${s.s} margin call fee`,dialogdescription:e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:[e.jsx("li",{children:"If your call order is margin called, this fee will be applied."}),e.jsx("li",{children:"Bear such a fee in mind before you enter into a margin position."})]}),tooltip:"More about smartcoin margin call fees"}):null,m&&m.options.extensions&&m.options.extensions.black_swan_response_method?e.jsx(E,{title:"BSRM",button:m.options.extensions.black_swan_response_method,dialogtitle:`${s.s} black swan response method`,dialogdescription:e.jsx(As,{className:"h-72",children:e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-2 text-sm",children:[e.jsx("li",{children:'This is the method chosen by the smartcoin owner for how to handle "black swan" events, such as the undercollateralization of the smartcoin.'}),e.jsxs("li",{children:[e.jsx("b",{children:"global_settlement"})," (the default method)",e.jsx("br",{}),"All debt positions are closed, all or some collateral is moved to a global-settlement fund.",e.jsx("br",{}),"Debt asset holders can claim collateral via force-settlement.",e.jsx("br",{}),"It is not allowed to create new debt positions when the fund is not empty"]}),e.jsxs("li",{children:[e.jsx("b",{children:"no_settlement"}),' aka "Global Settlement Protection"',e.jsx("br",{}),"No debt position is closed, and the derived settlement price is dynamically capped at the collateral ratio of the debt position with the least collateral ratio so that all debt positions are able to pay off their debt when being margin called or force-settled.",e.jsx("br",{}),"Able to adjust existing debt positions or create new debt positions."]}),e.jsxs("li",{children:[e.jsx("b",{children:"individual_settlement_to_fund"}),e.jsx("br",{}),"Only the undercollateralized debt positions are closed and their collateral is moved to a fund which can be claimed via force-settlement. The derived settlement price is capped at the fund's collateral ratio so that remaining debt positions will not be margin called or force-settled at a worse price.",e.jsx("br",{}),"Able to adjust existing debt positions or create new debt positions."]}),e.jsxs("li",{children:[e.jsx("b",{children:"individual_settlement_to_order"}),e.jsx("br",{}),"Only the undercollateralized debt positions are closed and their collateral is moved to a limit order on the order book which can be bought. The derived settlement price is NOT capped, which means remaining debt positions could be margin called at a worse price.",e.jsx("br",{}),"Able to adjust existing debt positions or create new debt positions."]})]})}),tooltip:"More about the black swan response method"}):null,m&&m.options.extensions&&m.options.extensions.initial_collateral_ratio?e.jsx(E,{title:"Manual ICR",button:m.options.extensions.initial_collateral_ratio,dialogtitle:`${s.s} manually configured initial collateral ratio`,dialogdescription:e.jsx("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:e.jsx("li",{children:"This is the initial collateral ratio (ICR) set by the asset owner."})}),tooltip:"More about manual ICR"}):null,m&&m.options.extensions&&m.options.extensions.maintenance_collateral_ratio?e.jsx(E,{title:"Manual MCR",button:m.options.extensions.maintenance_collateral_ratio,dialogtitle:`${s.s} manually configured minimum collateral ratio`,dialogdescription:e.jsx("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:e.jsx("li",{children:"This is the minimum collateral ratio (MCR) set by the asset owner."})}),tooltip:"More about manual MCR"}):null,m&&m.options.extensions&&m.options.extensions.maximum_short_squeeze_ratio?e.jsx(E,{title:"Manual MSSR",button:m.options.extensions.maximum_short_squeeze_ratio,dialogtitle:`${s.s} manually configured maximum short squeeze ratio`,dialogdescription:e.jsx("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:e.jsx("li",{children:"This is the maximum short squeeze ratio (MSSR) set by the asset owner."})}),tooltip:"More about manual MSSR"}):null]})})]})]}):null,e.jsx(F,{className:"pb-0",children:"Asset flags"}),e.jsx("br",{}),$&&$.length?$:e.jsx("span",{className:"text-sm",children:"No flags enabled"}),e.jsx("br",{}),e.jsx(F,{children:"Asset permissions"}),e.jsx("br",{}),A&&A.length?A:e.jsx("span",{className:"text-sm",children:"No permissions enabled"})]})]}),dt=({index:s,style:l})=>{const n=he[s],m=y(n.collateral,r.p),v=y(n.debt,t.p),$=n.target_collateral_ratio?`${n.target_collateral_ratio/10}%`:"0%",A=1/(f*v/m),ie=parseFloat(A.toFixed(3)),Ne=n.target_collateral_ratio?parseFloat((f*(m/(v*(f*(n.target_collateral_ratio/1e3))))).toFixed(r.p)):parseFloat((f*(m/(v*(f*1.4)))).toFixed(r.p));return e.jsxs("div",{className:"grid grid-cols-6 text-sm",style:l,children:[e.jsx("div",{className:"col-span-1",children:e.jsx(Le,{classNameContents:"text-blue-500",type:"text",text:n.borrower,hyperlink:`https://blocksights.info/#/accounts/${n.borrower}`})}),e.jsx("div",{className:"col-span-1",children:m}),e.jsx("div",{className:"col-span-1",children:v}),e.jsx("div",{className:"col-span-1",children:Ne}),e.jsx("div",{className:"col-span-1",children:$}),e.jsx("div",{className:"col-span-1",children:ie})]})},Ns=({index:s,style:l})=>{let n,m,v;return rs==="buy"?(n=se,m=se[s],v=t.p):(n=ne,m=ne[s],v=r.p),e.jsxs("div",{className:"grid grid-cols-4 text-sm",style:l,children:[e.jsx("div",{className:"col-span-1",children:parseFloat(m.price).toFixed(v)}),e.jsx("div",{className:"col-span-1",children:m.base}),e.jsx("div",{className:"col-span-1",children:m.quote}),e.jsx("div",{className:"col-span-1",children:n.slice(0,s+1).map($=>parseFloat($.base)).reduce(($,A)=>$+A,0).toFixed(v)})]})},mt=({index:s,style:l})=>{let n=_[s];return e.jsxs("div",{className:"grid grid-cols-3 text-sm",style:l,children:[e.jsx("div",{className:"col-span-1",children:n.account_id_type??"?"}),e.jsx("div",{className:"col-span-1",children:n.asset??"?"}),e.jsx("div",{className:"col-span-1",children:n.time_point_sec??"?"})]})},ut=({index:s,style:l})=>{let n=g.feeds[s];const m=n[0],v=n[1][0],$=n[1][1],A=(1/(y($.core_exchange_rate.base.amount,t.p)/y($.core_exchange_rate.quote.amount,r.p))).toFixed(r.p),ie=(1/(y($.settlement_price.base.amount,t.p)/y($.settlement_price.quote.amount,r.p))).toFixed(r.p);return e.jsxs("div",{className:"grid grid-cols-11 text-sm",style:l,children:[e.jsx("div",{className:"col-span-2 mr-1",children:e.jsx(Le,{classNameContents:"text-blue-500",type:"text",text:m,hyperlink:`https://blocksights.info/#/accounts/${m}`})}),e.jsx("div",{className:"col-span-2 ml-1",children:xa(v)}),e.jsx("div",{className:"col-span-2",children:A}),e.jsx("div",{className:"col-span-2",children:ie}),e.jsx("div",{className:"col-span-1",children:$.initial_collateral_ratio}),e.jsx("div",{className:"col-span-1",children:$.maintenance_collateral_ratio}),e.jsx("div",{className:"col-span-1",children:$.maximum_short_squeeze_ratio})]})};return e.jsxs("div",{className:"container mx-auto mt-5 mb-5",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[d&&x?e.jsxs(U,{children:[e.jsxs(Q,{children:[e.jsx(Z,{children:"⚠️ Invalid smartcoin id provided"}),e.jsx(ee,{children:"Unfortunately an invalid smartcoin id has been provided; unable to proceed with smartcoin issuance."})]}),e.jsxs(H,{children:["Please"," ",e.jsx("a",{className:"text-blue-500",href:"/smartcoins/index.html",children:"return to the overview"})," ","and select another bitasset to proceed."]})]}):null,!x&&p?e.jsxs(U,{children:[e.jsxs(Q,{className:"pb-2",children:[e.jsx(Z,{children:"💵 Collateral debt position form"}),e.jsxs(ee,{children:["You can use this form to borrow this smartcoin into existence, given sufficient collateral.",e.jsx("br",{}),"Thoroughly research assets before continuing, know your risk exposure and tolerances."]})]}),e.jsx(H,{children:e.jsx(Fs,{...c,children:e.jsxs("form",{onSubmit:()=>{Te(!0),event.preventDefault()},children:[e.jsx(O,{control:c.control,name:"account",render:({field:s})=>e.jsxs(B,{children:[e.jsx(q,{children:"Borrowing account"}),e.jsx(V,{children:e.jsxs("div",{className:"grid grid-cols-8 mt-4",children:[e.jsx("div",{className:"col-span-1 ml-5",children:i&&i.username?e.jsx(jt,{size:40,name:i.username,extra:"Target",expression:{eye:"normal",mouth:"open"},colors:["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]}):e.jsx(Ct,{children:e.jsx(kt,{children:"?"})})}),e.jsx("div",{className:"col-span-7",children:e.jsx(k,{disabled:!0,placeholder:"Bitshares account (1.2.x)",className:"mb-3",value:`${i.username} (${i.id})`,readOnly:!0})})]})}),e.jsx(G,{})]})}),e.jsx(O,{control:c.control,name:"borrowAsset",render:({field:s})=>e.jsxs(B,{children:[e.jsx(q,{children:"Asset to borrow"}),e.jsx(V,{children:e.jsxs("span",{className:"grid grid-cols-8",children:[e.jsx("span",{className:"col-span-6",children:e.jsx(k,{disabled:!0,placeholder:"Bitshares smartcoin (1.3.x)",className:"mb-1",value:`${t?t.s:"?"} (${t?t.id:"?"})`,readOnly:!0})}),e.jsx("span",{className:"col-span-2",children:e.jsx("a",{href:"/smartcoins/index.html",children:e.jsx(te,{className:"ml-3",variant:"outline",children:"Change asset"})})})]})}),e.jsx(G,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[e.jsx(U,{children:e.jsx(H,{children:e.jsx(O,{control:c.control,name:"feedPrice",render:({field:s})=>e.jsxs(B,{children:[e.jsxs(q,{children:[t?`${t.s}'s`:""," current feed price"]}),e.jsx(ue,{children:"The price determined by the recently published price feeds"}),e.jsx(V,{children:e.jsxs("span",{children:[e.jsx(k,{disabled:!0,className:"mb-3 mt-3",value:f?`${f} ${r.s}/${t.s}`:"?",readOnly:!0}),e.jsx(k,{disabled:!0,className:"mt-3",value:f?`${(1/f).toFixed(t.p)} ${t.s}/${r.s}`:"?",readOnly:!0})]})}),e.jsx(G,{})]})})})}),e.jsx(U,{children:e.jsx(H,{children:e.jsx(O,{control:c.control,name:"callPrice",render:({field:s})=>e.jsxs(B,{children:[e.jsxs(q,{children:["Your ",t?t.s:""," margin call price"]}),e.jsx(ue,{children:"The price at which your margin position will be called if undercollateralized"}),e.jsx(V,{children:e.jsxs("span",{children:[e.jsx(k,{disabled:!0,className:"mb-3 mt-3",value:`${ps.toFixed(r.p)} ${r.s}/${t.s}`,readOnly:!0}),e.jsx(k,{disabled:!0,className:"mt-3",value:`${(1/ps).toFixed(t.p)} ${t.s}/${r.s}`,readOnly:!0})]})}),e.jsx(G,{})]})})})})]}),e.jsx(O,{control:c.control,name:"debtAmount",render:({field:s})=>e.jsxs(B,{className:"mt-2",children:[e.jsx(q,{children:"Debt amount"}),e.jsx(ue,{style:{marginTop:0,paddingTop:0},children:e.jsxs("span",{className:"grid grid-cols-3 mt-0 pt-0",children:[e.jsxs("span",{className:"col-span-2 mt-0 pt-0",children:["The amount of ",t?t.s:"?"," you intend to borrow into existence."]}),e.jsxs("span",{className:"col-span-1 text-right",children:["Balance: ",C??0," ",t?t.s:"?"]})]})}),e.jsx(V,{children:e.jsxs("span",{className:"grid grid-cols-12",children:[e.jsx("span",{className:"col-span-1",children:e.jsxs(ye,{children:[e.jsx(we,{asChild:!0,children:e.jsx(_e,{variant:"outline",onClick:()=>{je==="editable"&&(Ue("locked"),Ie("editable"),He("editable"))},children:je==="editable"?e.jsx(Me,{className:"h-4 w-4"}):e.jsx(cs,{className:"h-4 w-4"})})}),e.jsx(Se,{className:"w-40 text-sm text-center pt-1 pb-1",children:je==="editable"?"Lock debt amount":"Debt amount locked"})]},"poolExchange")}),e.jsx("span",{className:"col-span-7",children:e.jsx(k,{label:"Amount of debt to issue",value:Y?`${Y} ${t.s}`:`0 ${t.s}`,disabled:!0,readOnly:!0,className:"mb-3"})}),e.jsx("span",{className:"col-span-4 ml-3",children:e.jsxs(Ye,{children:[e.jsx(Ge,{children:e.jsx("span",{onClick:()=>{event.preventDefault()},className:"inline-block border border-grey rounded pl-4 pb-1 pr-4",children:e.jsx(F,{children:"Change debt amount"})})}),e.jsxs(Je,{children:[e.jsx(F,{children:"Provide a new debt amount"}),e.jsx(k,{placeholder:Y,className:"mb-2 mt-1",onChange:l=>{const n=l.target.value,m=/^[0-9]*\.?[0-9]*$/;n&&n.length&&m.test(n)&&nt(n,f,W,z,t.p,r.p,je,ge,ve)}})]})]})})]})}),e.jsx(G,{})]})}),e.jsx(O,{control:c.control,name:"collateralAmount",render:({field:s})=>e.jsxs(B,{children:[e.jsx(q,{children:"Collateral amount"}),e.jsx(ue,{style:{marginTop:0,paddingTop:0},children:e.jsxs("span",{className:"grid grid-cols-3 mt-0 pt-0",children:[e.jsxs("span",{className:"col-span-2 mt-0 pt-0",children:["The amount of ",r.s," backing collateral you'll need to provide."]}),e.jsxs("span",{className:"col-span-1 text-right",children:["Balance: ",L??0," ",r?r.s:"?"]})]})}),e.jsx(V,{children:e.jsxs("span",{className:"grid grid-cols-12",children:[e.jsx("span",{className:"col-span-1",children:e.jsxs(ye,{children:[e.jsx(we,{asChild:!0,children:e.jsx(_e,{variant:"outline",onClick:()=>{ge==="editable"&&(Ue("editable"),Ie("editable"),He("locked"))},children:ge==="editable"?e.jsx(Me,{className:"h-4 w-4"}):e.jsx(cs,{className:"h-4 w-4"})})}),e.jsx(Se,{className:"w-40 text-sm text-center pt-1 pb-1",children:ge==="editable"?"Lock collateral amount":"Collateral amount locked"})]},"poolExchange")}),e.jsx("span",{className:"col-span-7",children:e.jsx(k,{label:"Amount of collateral to commit",placeholder:`${W} ${r.s}`,readOnly:!0,disabled:!0,className:"mb-3"})}),e.jsx("span",{className:"col-span-4 ml-3",children:e.jsxs(Ye,{children:[e.jsx(Ge,{children:e.jsx("span",{onClick:()=>{event.preventDefault()},className:"inline-block border border-grey rounded pl-4 pb-1 pr-4",children:e.jsx(F,{children:"Change collateral amount"})})}),e.jsxs(Je,{children:[e.jsx(F,{children:"Provide a new collateral amount"}),e.jsx(k,{placeholder:W,className:"mb-2 mt-1",onChange:l=>{const n=l.target.value,m=/^[0-9]*\.?[0-9]*$/;n&&n.length&&m.test(n)&&rt(n,f,Y,W,t.p,r.p,z,je,ge,ve)}})]})]})})]})})]})}),e.jsx(O,{control:c.control,name:"ratioValue",render:({field:s})=>e.jsxs(B,{children:[e.jsx(q,{children:"Ratio of collateral to debt"}),e.jsx(ue,{children:e.jsxs("span",{className:"grid grid-cols-3 mt-0 pt-0",children:[e.jsx("span",{className:"col-span-2 mt-0 pt-0",children:"The level of collateralization you wish to maintain for this margin position."}),e.jsxs("span",{className:"col-span-1 text-right",children:["Min: ",p.mcr/1e3]})]})}),e.jsx(V,{children:e.jsxs("span",{className:"grid grid-cols-12",children:[e.jsx("span",{className:"col-span-1",children:e.jsxs(ye,{children:[e.jsx(we,{asChild:!0,children:e.jsx(_e,{variant:"outline",onClick:()=>{ve==="editable"?(Ue("editable"),Ie("locked"),He("editable")):(Ue("editable"),Ie("editable"),He("locked"))},children:ve==="editable"?e.jsx(Me,{className:"h-4 w-4"}):e.jsx(cs,{className:"h-4 w-4"})})}),e.jsx(Se,{className:"w-40 text-sm text-center pt-1 pb-1",children:ve==="editable"?"Lock the ratio value":"Unlock ratio value"})]},"poolExchange")}),e.jsxs("span",{className:"col-span-7",children:[z?e.jsx(k,{label:"Ratio of collateral to debt",placeholder:z,className:"mb-3",disabled:!0,readOnly:!0}):e.jsx(k,{label:"Ratio of collateral to debt",className:"mb-3",disabled:!0,readOnly:!0}),z&&p&&f?e.jsx(ss,{defaultValue:[z],value:[z],max:20,min:p.mcr/1e3,step:.01,onValueChange:l=>{fs(l[0],f,Y,W,p.mcr,t.p,r.p,je,ge,ve)}}):null]}),e.jsx("span",{className:"col-span-4 ml-3",children:e.jsxs(Ye,{children:[e.jsx(Ge,{children:e.jsx("span",{onClick:()=>{event.preventDefault()},className:"inline-block border border-grey rounded pl-4 pb-1 pr-4",children:e.jsx(F,{children:"Change ratio value"})})}),e.jsxs(Je,{children:[e.jsx(F,{children:"Provide a new ratio"}),e.jsx(k,{placeholder:z,className:"mb-2 mt-1",onChange:l=>{const n=l.target.value,m=/^[0-9]*\.?[0-9]*$/;n&&n.length&&m.test(n)&&fs(n,f,Y,W,p.mcr,t.p,r.p,je,ge,ve)}})]})]})})]})}),z&&p&&z<p.mcr/1e3?e.jsxs(G,{children:["Warning: Your debt collateral ratio is below the minimum collateral ratio of ",p.mcr/1e3]}):null]})}),e.jsx("br",{}),e.jsx(O,{control:c.control,name:"tcrValue",render:({field:s})=>e.jsxs(B,{children:[e.jsx(V,{children:e.jsxs(e.Fragment,{children:[e.jsx(ms,{id:"terms1",className:"mr-2",value:Pe,onClick:()=>{os(!Pe)}}),"Enable Target Collateral Ratio"]})}),e.jsx(G,{})]})}),Pe?e.jsx(O,{control:c.control,name:"tcrValue",render:({field:s})=>e.jsxs(B,{className:"mt-0",children:[e.jsx(q,{children:"Target collateral ratio value"}),e.jsx(ue,{children:e.jsxs("span",{className:"grid grid-cols-4 mt-0 pt-0",children:[e.jsx("span",{className:"col-span-3 mt-0 pt-0",children:"Provide a ratio for the blockchain to automatically maintain through collateral sales."}),e.jsxs("span",{className:"col-span-1 text-right",children:["Min: ",p.mcr/1e3]})]})}),e.jsx(V,{children:e.jsxs("span",{className:"grid grid-cols-12",children:[e.jsxs("span",{className:"col-span-8",children:[e.jsx(k,{label:"Ratio of collateral to debt",placeholder:de,disabled:!0,readOnly:!0}),e.jsx(ss,{className:"mt-3",defaultValue:[de??p.mcr/1e3],max:20,min:p.mcr/1e3,step:.1,onValueChange:l=>{bs(l[0],p.mcr)}})]}),e.jsx("span",{className:"col-span-4 ml-3",children:e.jsxs(Ye,{children:[e.jsx(Ge,{children:e.jsx("span",{onClick:()=>{event.preventDefault()},className:"inline-block border border-grey rounded pl-4 pb-1 pr-4",children:e.jsx(F,{children:"Change TCR value"})})}),e.jsxs(Je,{children:[e.jsx(F,{children:"Provide a new target collateral ratio"}),e.jsx(k,{placeholder:de,className:"mb-2 mt-1",onChange:l=>{const n=l.target.value,m=/^[0-9]*\.?[0-9]*$/;n&&n.length&&m.test(n)&&bs(n,p.mcr)}})]})]})})]})}),e.jsx(G,{})]})}):null,e.jsx(O,{control:c.control,name:"networkFee",render:({field:s})=>e.jsxs(B,{className:"mb-1 mt-3",children:[e.jsx(q,{children:"Network broadcast fee"}),e.jsx(ue,{children:"The fee required to broadcast your call order update operation onto the blockchain"}),e.jsx(V,{children:e.jsx(k,{disabled:!0,placeholder:`${w??"?"} BTS`,readOnly:!0})}),e.jsx(G,{})]})}),!Y||!W||!z||z<p.mcr/1e3?e.jsx(te,{className:"mt-5 mb-3",variant:"outline",disabled:!0,type:"submit",children:"Submit"}):e.jsx(te,{className:"mt-5 mb-3",type:"submit",children:"Submit"})]})})})]}):null,!x&&!p?e.jsxs(U,{children:[e.jsxs(Q,{children:[e.jsx(Z,{children:"💵 Collateral debt position form"}),e.jsxs(ee,{children:["You can use this form to borrow this smartcoin into existence, given sufficient collateral.",e.jsx("br",{}),"Thoroughly research assets before continuing, know your risk exposure and tolerances."]})]}),e.jsx(H,{children:e.jsx(Fs,{...c,children:e.jsxs("form",{children:[e.jsx(O,{control:c.control,name:"account",render:({field:s})=>e.jsxs(B,{children:[e.jsx(q,{children:"Account"}),e.jsx(V,{children:e.jsx(k,{disabled:!0,placeholder:"Bitshares account (1.2.x)",className:"mb-3 mt-3",readOnly:!0})})]})}),e.jsx(O,{control:c.control,name:"borrowAsset",render:({field:s})=>e.jsxs(B,{children:[e.jsx(q,{children:e.jsxs("span",{className:"grid grid-cols-2 mt-2",children:[e.jsx("span",{className:"col-span-1 mt-1",children:"Asset to borrow"}),e.jsx("span",{className:"col-span-1 text-right",children:e.jsx(Ve,{children:"Change asset"})})]})}),e.jsx(V,{children:e.jsx(k,{disabled:!0,placeholder:"Bitshares smartcoin (1.3.x)",className:"mb-3 mt-3",readOnly:!0})})]})}),e.jsx(O,{control:c.control,name:"feedPrice",render:({field:s})=>e.jsxs(B,{children:[e.jsx(q,{children:"current feed price"}),e.jsx(V,{children:e.jsx(k,{disabled:!0,className:"mb-3 mt-3",placeholder:"?",readOnly:!0})}),e.jsx(G,{})]})}),e.jsx(O,{control:c.control,name:"callPrice",render:({field:s})=>e.jsxs(B,{children:[e.jsx(q,{children:"Your margin call price"}),e.jsx(V,{children:e.jsx(k,{disabled:!0,className:"mb-3 mt-3",value:"call price placeholder",readOnly:!0})}),e.jsx(G,{})]})}),e.jsx(O,{control:c.control,name:"debtAmount",render:({field:s})=>e.jsxs(B,{children:[e.jsx(q,{children:"Debt amount"}),e.jsx(ue,{style:{marginTop:0,paddingTop:0},children:e.jsxs("span",{className:"grid grid-cols-3 mt-0 pt-0",children:[e.jsx("span",{className:"col-span-2 mt-0 pt-0 text-sm",children:"The amount of ? you intend to borrow into existence."}),e.jsx("span",{className:"col-span-1 text-right text-sm",children:"Available: 0 ?"})]})}),e.jsx(V,{children:e.jsxs("span",{className:"grid grid-cols-12 gaps-2",children:[e.jsx("span",{className:"col-span-1",children:e.jsx(_e,{variant:"outline",children:e.jsx(Me,{className:"h-4 w-4"})})}),e.jsx("span",{className:"col-span-9",children:e.jsx(k,{label:"Amount of debt to issue",placeholder:"0",className:"mb-3",disabled:!0,readOnly:!0})}),e.jsx("span",{className:"col-span-2 ml-3",children:e.jsx(te,{variant:"outline",children:"Change"})})]})}),e.jsx(G,{})]})}),e.jsx(O,{control:c.control,name:"collateralAmount",render:({field:s})=>e.jsxs(B,{children:[e.jsx(q,{children:"Collateral amount"}),e.jsx(ue,{style:{marginTop:0,paddingTop:0},children:e.jsxs("span",{className:"grid grid-cols-3 mt-0 pt-0",children:[e.jsx("span",{className:"col-span-2 mt-0 pt-0 text-sm",children:"The amount of ? backing collateral you'll need to provide."}),e.jsx("span",{className:"col-span-1 text-right text-sm",children:"Available: 0 ?"})]})}),e.jsx(V,{children:e.jsxs("span",{className:"grid grid-cols-12 gaps-2",children:[e.jsx("span",{className:"col-span-1",children:e.jsx(_e,{variant:"outline",children:e.jsx(Me,{className:"h-4 w-4"})})}),e.jsx("span",{className:"col-span-9",children:e.jsx(k,{label:"Amount of collateral to commit",placeholder:"0",className:"mb-3",disabled:!0,readOnly:!0})}),e.jsx("span",{className:"col-span-2 ml-3",children:e.jsx(te,{variant:"outline",children:"Change"})})]})}),e.jsx(G,{})]})}),e.jsx(O,{control:c.control,name:"ratioValue",render:({field:s})=>e.jsxs(B,{children:[e.jsx(q,{children:"Ratio of collateral to debt"}),e.jsx(V,{children:e.jsxs("span",{className:"grid grid-cols-12",children:[e.jsx("span",{className:"col-span-1",children:e.jsx(_e,{variant:"outline",children:e.jsx(Me,{className:"h-4 w-4"})})}),e.jsx("span",{className:"col-span-11",children:e.jsx(k,{label:"Ratio of collateral to debt",value:z,placeholder:z,className:"mb-3",disabled:!0,readOnly:!0})})]})}),e.jsx(G,{})]})}),e.jsx(ss,{defaultValue:[2],max:20,min:1.4,step:.01}),e.jsx("br",{}),e.jsxs("span",{className:"items-top flex space-x-2",children:[e.jsx(ms,{id:"terms1"}),e.jsx("span",{className:"grid gap-1.5 leading-none",children:e.jsx("label",{htmlFor:"terms1",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Enable Target Collateral Ratio"})})]}),e.jsx(O,{control:c.control,name:"networkFee",render:({field:s})=>e.jsxs(B,{className:"mb-1 mt-3",children:[e.jsx(q,{children:"Network broadcast fee"}),e.jsx(ue,{children:"The fee required to broadcast your call order update operation onto the blockchain"}),e.jsx(V,{children:e.jsx(k,{disabled:!0,readOnly:!0})}),e.jsx(G,{})]})}),e.jsx(te,{className:"mt-5 mb-3",variant:"outline",disabled:!0,type:"submit",children:"Submit"})]})})})]}):null,!x&&r&&t&&I&&I.finalSettlementFund&&I.finalSettlementFund>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 mt-2 mb-2",children:e.jsxs(U,{children:[e.jsxs(Q,{className:"pb-3",children:[e.jsxs(Z,{children:[T.symbol," settlement fund"]}),e.jsxs(ee,{children:["This smartcoin currently has a settlement fund and so is likely in a form of global settlement.",e.jsx("br",{}),"Borrowing may be unavailable until settlement is complete."]})]}),e.jsxs(H,{children:[e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsxs("div",{className:"col-span-1",children:["Fund",e.jsx("br",{}),e.jsxs("span",{className:"text-sm",children:[I.finalSettlementFund,e.jsx("br",{}),r.s]})]}),e.jsxs("div",{className:"col-span-1",children:["Settlement price",e.jsx("br",{}),e.jsxs("span",{className:"text-sm",children:[I.finalSettlementPrice,e.jsx("br",{}),t.s,"/",r.s]})]}),e.jsxs("div",{className:"col-span-1",children:["Current price",e.jsx("br",{}),e.jsx("span",{className:"text-sm",children:(1/f).toFixed(t.p)})]}),e.jsxs("div",{className:"col-span-1",children:["Funding ratio",e.jsx("br",{}),e.jsxs("span",{className:"text-sm",children:[(1/f/I.finalSettlementPrice*100).toFixed(2)," % (",e.jsxs("span",{className:"text-red-500",children:["-",(100-1/f/I.finalSettlementPrice*100).toFixed(2)," %"]}),")"]})]})]}),e.jsx("a",{href:"/bid/index.html",children:e.jsxs(te,{className:"mt-3 pb-2",children:["Bid on ",T.symbol,"'s settlement fund"]})})]})]})})}):null,re&&re._debt?e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 mt-2 mb-2",children:e.jsxs(U,{children:[e.jsxs(Q,{className:"pb-3",children:[e.jsxs(Z,{children:[T.symbol," individual settlement fund"]}),e.jsxs(ee,{children:["This smartcoin currently has an individual settlement fund.",e.jsx("br",{}),"These funds can be bid on."]})]}),e.jsxs(H,{children:[e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsxs("div",{className:"col-span-1",children:["Fund",e.jsx("br",{}),e.jsxs("span",{className:"text-sm",children:[re._fund,e.jsx("br",{}),r.s]})]}),e.jsxs("div",{className:"col-span-1",children:["Debt",e.jsx("br",{}),e.jsxs("span",{className:"text-sm",children:[re._debt,e.jsx("br",{}),t.s]})]}),e.jsxs("div",{className:"col-span-1",children:["Feed price",e.jsx("br",{}),e.jsx("span",{className:"text-sm",children:f.toFixed(t.p)})]}),e.jsxs("div",{className:"col-span-1",children:["Funding ratio",e.jsx("br",{}),e.jsxs("span",{className:"text-sm",children:[(re._debt*f/re._fund*100).toFixed(2)," % (",e.jsxs("span",{className:"text-red-500",children:["-",(100-re._debt*f/re._fund*100).toFixed(2)," %"]}),")"]})]})]}),e.jsx("a",{href:"/bid/index.html",children:e.jsxs(te,{className:"mt-3 pb-2",children:["Bid on ",T.symbol,"'s settlement fund"]})})]})]})})}):null,R&&R.length?e.jsx(ct,{}):null,!x&&T&&t&&p?e.jsx(vs,{assetInfo:t,bitassetInfo:p,fullAssetInfo:T,fullBitassetInfo:g,type:"debt",assetInfoFlags:et,assetPermissions:tt}):null,!x&&(!T||!t||!p)?e.jsxs(U,{className:"mt-2",children:[e.jsxs(Q,{className:"pb-2",children:[e.jsx(Z,{children:"About this asset (1.3.x)"}),e.jsxs(ee,{children:["Use this information to improve your understanding",e.jsx("br",{}),"Thoroughly do your own research before proceeding to borrow any smartcoins."]})]}),e.jsxs(H,{children:[e.jsx(F,{children:"General asset info (more info)"}),e.jsx("br",{}),"Loading...",e.jsx("br",{}),e.jsx(F,{children:"Smartcoin info (more info)"}),e.jsx("br",{}),"Loading...",e.jsx("br",{}),e.jsx(F,{children:"Asset flags"}),e.jsx("br",{}),"Loading...",e.jsx("br",{}),e.jsx(F,{children:"Asset permissions"}),e.jsx("br",{}),"Loading..."]})]}):null,!x&&le&&r?e.jsx(vs,{assetInfo:r,bitassetInfo:S??{},fullAssetInfo:le,fullBitassetInfo:ls??{},type:"collateral",assetInfoFlags:st,assetPermissions:at}):null,!x&&(!le||!r)?e.jsxs(U,{className:"mt-2",children:[e.jsxs(Q,{className:"pb-2",children:[e.jsx(Z,{children:"About the backing collateral ? (1.3.x)"}),e.jsxs(ee,{children:["Use this information to improve your understanding of ?.",e.jsx("br",{}),"Thoroughly do your own research before proceeding to borrow any smartcoins."]})]}),e.jsxs(H,{children:[e.jsx(F,{children:"General asset info (more info)"}),e.jsx("br",{}),"Loading...",e.jsx("br",{}),e.jsx(F,{className:"pb-0",children:"Asset flags"}),e.jsx("br",{}),"Loading...",e.jsx("br",{}),e.jsx(F,{children:"Asset permissions"}),e.jsx("br",{}),"Loading..."]})]}):null,lt&&js?e.jsx(Ts,{operationName:"call_order_update",username:i.username,usrChain:i.chain,userID:i.id,dismissCallback:Te,headerText:`Borrowing ${t.s} with ${r.s} backing collateral`,trxJSON:[js]},`Borrowing${t.s}with${r.s}backingcollateral`):null]}),x?null:e.jsx("div",{className:"grid grid-cols-1 mt-5",children:e.jsxs(U,{children:[e.jsx(Q,{className:"pb-3",children:e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx(Z,{children:t&&r?`Order book for ${t.s}/${r.s}`:"Order book loading..."}),e.jsx(ee,{children:"Note: Only displaying the top 10 buy/sell orders"})]}),e.jsx("div",{className:"col-span-1 text-right",children:e.jsx("a",{href:t&&r?`/dex/index.html?market=${t.s}_${r.s}`:"",children:e.jsx(te,{children:"Go to market"})})})]})}),e.jsx(H,{children:e.jsxs(Mt,{defaultValue:"buy",className:"w-full",children:[e.jsxs(Tt,{className:"grid w-full grid-cols-2 gap-2",children:[rs==="buy"?e.jsx(Ze,{value:"buy",style:Es,children:"Viewing buy orders"}):e.jsx(Ze,{value:"buy",onClick:()=>xs("buy"),children:"View buy orders"}),rs==="sell"?e.jsx(Ze,{value:"sell",style:Es,children:"Viewing sell orders"}):e.jsx(Ze,{value:"sell",onClick:()=>xs("sell"),children:"View sell orders"})]}),e.jsxs(Ms,{value:"buy",children:[se&&se.length?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("div",{className:"col-span-1",children:"Price"}),e.jsx("div",{className:"col-span-1",children:r.s}),e.jsx("div",{className:"col-span-1",children:t.s}),e.jsx("div",{className:"col-span-1",children:"Total"})]}),e.jsx(Be,{height:260,itemCount:se.length,itemSize:25,className:"w-full",children:Ns})]}):null,se&&!se.length?"No buy orders found":null,se?null:"Loading..."]}),e.jsxs(Ms,{value:"sell",children:[ne&&ne.length?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("div",{className:"col-span-1",children:"Price"}),e.jsx("div",{className:"col-span-1",children:t.s}),e.jsx("div",{className:"col-span-1",children:r.s}),e.jsx("div",{className:"col-span-1",children:"Total"})]}),e.jsx(Be,{height:260,itemCount:ne.length,itemSize:25,className:"w-full",children:Ns})]}):null,ne&&!ne.length?"No sell orders found":null,ne?null:"Loading..."]})]})})]})}),x?null:e.jsx("div",{className:"grid grid-cols-1 mt-5",children:e.jsxs(U,{children:[e.jsxs(Q,{className:"pb-3",children:[e.jsx(Z,{children:t&&r?`${t.s} call orders`:"Call orders loading..."}),e.jsx(ee,{children:"Check out other users margin positions on the dex"})]}),e.jsxs(H,{children:[he&&he.length?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6",children:[e.jsx("div",{className:"col-span-1",children:"Borrower"}),e.jsx("div",{className:"col-span-1",children:"Collateral"}),e.jsx("div",{className:"col-span-1",children:"Debt"}),e.jsx("div",{className:"col-span-1",children:"Call price"}),e.jsx("div",{className:"col-span-1",children:"TCR"}),e.jsx("div",{className:"col-span-1",children:"Ratio"})]}),e.jsx(Be,{height:260,itemCount:he.length,itemSize:25,className:"w-full",children:dt})]}):null,he&&!he.length?"No call orders found":null,he?null:"Loading..."]})]})}),x?null:e.jsx("div",{className:"grid grid-cols-1 mt-5",children:e.jsxs(U,{children:[e.jsxs(Q,{className:"pb-3",children:[e.jsx(Z,{children:t&&r?`${t.s} settle orders`:"Settle orders loading..."}),e.jsx(ee,{children:"Check out other users settle orders on the dex"})]}),e.jsxs(H,{children:[_&&_.length?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6",children:[e.jsx("div",{className:"col-span-1",children:"Owner"}),e.jsx("div",{className:"col-span-1",children:"Balance"}),e.jsx("div",{className:"col-span-1",children:"Settlement date"})]}),e.jsx(Be,{height:260,itemCount:_.length,itemSize:25,className:"w-full",children:mt})]}):null,_&&!_.length?"No settle orders found":null,_?null:"Loading..."]})]})}),x?null:e.jsx("div",{className:"grid grid-cols-1 mt-5",children:e.jsxs(U,{children:[e.jsxs(Q,{className:"pb-3",children:[e.jsx(Z,{children:t&&r?`${t.s} price feeds`:"Price feeds loading..."}),e.jsx(ee,{children:"Check out the latest published price feeds for this smartcoin"})]}),e.jsxs(H,{children:[g&&g.feeds?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-11",children:[e.jsx("div",{className:"col-span-2",children:"User"}),e.jsx("div",{className:"col-span-2",children:"Date"}),e.jsx("div",{className:"col-span-2",children:"CER"}),e.jsx("div",{className:"col-span-2",children:"Settlement"}),e.jsx("div",{className:"col-span-1",children:"ICR"}),e.jsx("div",{className:"col-span-1",children:"MCR"}),e.jsx("div",{className:"col-span-1",children:"MSSR"})]}),e.jsx(Be,{height:260,itemCount:g.feeds.length,itemSize:25,className:"w-full",children:ut})]}):null,g&&!g.feeds.length?"No smartcoin feeds found...":null,g?null:"Loading..."]})]})}),e.jsx("div",{className:"grid grid-cols-1 mt-5",children:e.jsxs(U,{children:[e.jsxs(Q,{className:"pb-3",children:[e.jsx(Z,{children:"Risks associated with collateral debt positions"}),e.jsx(ee,{children:"Please thouroughly do your own research into smartcoins/bitassets before proceeding."})]}),e.jsxs(H,{children:["Internal risk factors to consider",e.jsx("br",{}),e.jsxs("span",{className:"text-sm",children:[e.jsx(F,{className:"mb-0 pb-0 text-lg",children:"Risks associated with the debt and collateral assets"}),e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-1 pl-2",children:[e.jsx("li",{children:"By opening a margin position you accept the risk loss of some or all of your collateral."}),e.jsx("li",{children:"By holding a smartcoin you accept the risk that the backing collateral will fail to reflect the intended reference feed price, leading to loss of smartcoin value."}),e.jsx("li",{children:"These assets can be user created, as such their settings and published price feeds will be radically different. Thoroughly research each asset using the blocksights explorer, and through word of mouth, before opening margin positions."}),e.jsx("li",{children:'The committee-owned "bitAssets", which are the original branded smartcoins, can be considered to have a more stable smartcoin settings as a committee of Bitshares users need to come to an agreement on all configurations. These are elected roles however, so you should participate in the voting system to ensure the decentralization of the committee.'}),e.jsx("li",{children:"Smartcoins which use other smartcoins as backing collateral are possible, however you should be aware of the additional risks you're exposing yourself to."}),e.jsx("li",{children:"If you purchase a smartcoin which uses an exchange backed asset (EBA) as backing collateral, and then claim the backing collateral, the gateway may impose additional KYC/AML requirements on you."})]})]}),e.jsx("br",{}),"External risk factors to consider",e.jsx("br",{}),e.jsxs("span",{className:"text-sm",children:[e.jsx(F,{className:"mb-0 pb-0 text-lg",children:"Price feed exposure"}),e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-2 pl-2",children:[e.jsx("li",{children:"Smartcoin price feed calculations reference the value of an external asset in terms of backing collateral, as such if either the reference or collateral assets price fluctuates then you are directly exposed to this risk."}),e.jsx("li",{children:"If the reference asset were to cease to exist, then the smartcoin external reference asset value will become invalid; global settlement could be the smartcoin owner's response."})]}),e.jsx(F,{className:"mb-0 pb-0 text-lg",children:"Price feed publisher activity"}),e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-2 pl-2",children:[e.jsx("li",{children:"Price feed publishing scripts could run into issues if external asset reference sources go offline, potentially resulting in a period of price feed inactivity."}),e.jsx("li",{children:"Privately owned smartcoins require the development of custom price feed scripts, such code could be unstable if the smartcoin's price feeding strategy rollout is rushed. Before creating a margin position, look into the price feed publishing strategy and feed scripts in use, this will reduce your risk exposure."}),e.jsx("li",{children:"Publishing a price feed has an associated fee, which could cause a price feed publisher to stop publishing if they exhaust their BTS balance, resulting in a lack of price feeds until they replenish their account's balance."}),e.jsx("li",{children:"Price feed publishers may disagree on the how to calculate the price feed, resulting in unexected price feed volatility. There are several privatized smartcoins which attempt to use different smartcoin collateralization strategies for this reason."})]}),e.jsx(F,{className:"mb-0 pb-0 text-lg",children:"Exposure to EBA backing asset blockchain downtime"}),e.jsx("ul",{className:"ml-2 list-disc [&>li]:mt-2 pl-2",children:e.jsx("li",{children:"If you've used an EBA as backing collateral and want to close/adjust your margin position at a later date, if the gateway deposit service is down you may be unable to deposit sufficient collateral to avoid being margin called."})})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 mt-5",children:i&&i.username&&i.username.length?e.jsx(gt,{usr:i}):null})]})}export{Ta as default};
