import{r as a,c as tt}from"./index.ebYJtNMn.js";import{u as n,v as X,$ as st,a as ze,b as nt,_ as re,e as L,d as rt,i as ot,j as at,s as ct,n as it,o as lt,k as dt,aa as M,ab as ut,ac as ht,ad as Te,ae as ft,Z as fe,a0 as me,a1 as pe,I as Le,J as He,K as P,P as Ke,Q as mt,S as pt,T as xt,U as gt,V as bt,W as St}from"./button.GNxhEuHR.js";let le=0,je=[];function vt(){return le+=1,()=>{if(le-=1,le===0){let e=je;je=[];for(let t of e)t()}}}function yt(e,t,s){let r=new Set([...t,void 0]);return e.listen((o,i)=>{r.has(i)&&s(o,i)})}const F=a.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:X("rounded-xl border bg-card text-card-foreground shadow",e),...t}));F.displayName="Card";const B=a.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:X("flex flex-col space-y-1.5 p-6",e),...t}));B.displayName="CardHeader";const z=a.forwardRef(({className:e,...t},s)=>n.jsx("h3",{ref:s,className:X("font-semibold leading-none tracking-tight",e),...t}));z.displayName="CardTitle";const K=a.forwardRef(({className:e,...t},s)=>n.jsx("p",{ref:s,className:X("text-sm text-muted-foreground",e),...t}));K.displayName="CardDescription";const J=a.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:X("p-6 pt-0",e),...t}));J.displayName="CardContent";const ne=a.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:X("flex items-center p-6 pt-0",e),...t}));ne.displayName="CardFooter";let de;const Ve="HoverCard",[Xe,Ss]=st(Ve,[ze]),$e=ze(),[Ct,we]=Xe(Ve),$t=e=>{const{__scopeHoverCard:t,children:s,open:r,defaultOpen:o,onOpenChange:i,openDelay:l=700,closeDelay:d=300}=e,c=$e(t),m=a.useRef(0),p=a.useRef(0),C=a.useRef(!1),b=a.useRef(!1),[w=!1,x]=ct({prop:r,defaultProp:o,onChange:i}),g=a.useCallback(()=>{clearTimeout(p.current),m.current=window.setTimeout(()=>x(!0),l)},[l,x]),_=a.useCallback(()=>{clearTimeout(m.current),!C.current&&!b.current&&(p.current=window.setTimeout(()=>x(!1),d))},[d,x]),h=a.useCallback(()=>x(!1),[x]);return a.useEffect(()=>()=>{clearTimeout(m.current),clearTimeout(p.current)},[]),a.createElement(Ct,{scope:t,open:w,onOpenChange:x,onOpen:g,onClose:_,onDismiss:h,hasSelectionRef:C,isPointerDownOnContentRef:b},a.createElement(it,c,s))},wt="HoverCardTrigger",Tt=a.forwardRef((e,t)=>{const{__scopeHoverCard:s,...r}=e,o=we(wt,s),i=$e(s);return a.createElement(lt,re({asChild:!0},i),a.createElement(dt.a,re({"data-state":o.open?"open":"closed"},r,{ref:t,onPointerEnter:L(e.onPointerEnter,oe(o.onOpen)),onPointerLeave:L(e.onPointerLeave,oe(o.onClose)),onFocus:L(e.onFocus,o.onOpen),onBlur:L(e.onBlur,o.onClose),onTouchStart:L(e.onTouchStart,l=>l.preventDefault())})))}),jt="HoverCardPortal",[vs,Et]=Xe(jt,{forceMount:void 0}),xe="HoverCardContent",At=a.forwardRef((e,t)=>{const s=Et(xe,e.__scopeHoverCard),{forceMount:r=s.forceMount,...o}=e,i=we(xe,e.__scopeHoverCard);return a.createElement(nt,{present:r||i.open},a.createElement(Nt,re({"data-state":i.open?"open":"closed"},o,{onPointerEnter:L(e.onPointerEnter,oe(i.onOpen)),onPointerLeave:L(e.onPointerLeave,oe(i.onClose)),ref:t})))}),Nt=a.forwardRef((e,t)=>{const{__scopeHoverCard:s,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:l,...d}=e,c=we(xe,s),m=$e(s),p=a.useRef(null),C=rt(t,p),[b,w]=a.useState(!1);return a.useEffect(()=>{if(b){const x=document.body;return de=x.style.userSelect||x.style.webkitUserSelect,x.style.userSelect="none",x.style.webkitUserSelect="none",()=>{x.style.userSelect=de,x.style.webkitUserSelect=de}}},[b]),a.useEffect(()=>{if(p.current){const x=()=>{w(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var g;((g=document.getSelection())===null||g===void 0?void 0:g.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",x),()=>{document.removeEventListener("pointerup",x),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),a.useEffect(()=>{p.current&&_t(p.current).forEach(g=>g.setAttribute("tabindex","-1"))}),a.createElement(ot,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:l,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:L(i,x=>{x.preventDefault()}),onDismiss:c.onDismiss},a.createElement(at,re({},m,d,{onPointerDown:L(d.onPointerDown,x=>{x.currentTarget.contains(x.target)&&w(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:C,style:{...d.style,userSelect:b?"text":void 0,WebkitUserSelect:b?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})))});function oe(e){return t=>t.pointerType==="touch"?void 0:e()}function _t(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;s.nextNode();)t.push(s.currentNode);return t}const kt=$t,Mt=Tt,Ye=At,Ot=kt,Dt=Mt,qe=a.forwardRef(({className:e,align:t="center",sideOffset:s=4,...r},o)=>n.jsx(Ye,{ref:o,align:t,sideOffset:s,className:X("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));qe.displayName=Ye.displayName;let Rt=()=>({emit(e,...t){let s=this.events[e]||[];for(let r=0,o=s.length;r<o;r++)s[r](...t)},events:{},on(e,t){return this.events[e]?.push(t)||(this.events[e]=[t]),()=>{this.events[e]=this.events[e]?.filter(s=>t!==s)}}});const Pt=({cache:e=new Map,fetcher:t,...s}={})=>{const r=Rt();let o=!0;ke("visibilitychange",()=>{o=!document.hidden,o&&r.emit(Ae)}),ke("online",()=>r.emit(Ne));const i=new Map,l=new Map,d=new Map;let c={};const m=async([h,N],S,f,u)=>{var j;if(!o)return;const v=y=>{S.key===h&&(S.set(y),r.emit(ue,h,y,!0))},T=()=>{v({...S.value,...Oe,promise:d.get(h)})},{dedupeTime:O=4e3,fetcher:D}={...f,...c},k=Me();if(d.has(h)){S.value.loading||T();return}if(!u){const y=e.get(h);y&&S.value.data!==y&&v({data:y,...H});const $=l.get(h);if($&&$+O>k)return}const Y=vt();try{const y=D(...N);l.set(h,k),d.set(h,y),T();const $=await y;e.set(h,$),v({data:$,...H}),l.set(h,Me())}catch(y){(j=f.onError)==null||j.call(f,y),v({data:S.value.data,error:y,...H})}finally{Y(),d.delete(h)}},p=(h,{fetcher:N=t,...S}={})=>{const f=M({...H}),u={...s,...S,fetcher:N};f._=We,f.invalidate=()=>{const{key:$}=f;$&&w($)},f.mutate=$=>{const{key:R}=f;R&&x(R,$)};let j,v,T,O,D,k=[];ut(f,()=>{const $=!j;[D,j]=It(h),O=D.subscribe(U=>{if(U){const[E,W]=U;f.key=E,m([E,W],f,u),v=E,T=W}else f.key=v=T=void 0,f.set({...H})});const R=D.get();R&&([v,T]=R,$&&Y());const{refetchInterval:Z=0,refetchOnFocus:ce,refetchOnReconnect:ie}=u,q=()=>{v&&m([v,T],f,u)};Z>0&&i.set(h,setInterval(q,Z)),ce&&k.push(r.on(Ae,q)),ie&&k.push(r.on(Ne,q)),k.push(r.on(_e,U=>{v&&he(v,U)&&m([v,T],f,u,!0)}),r.on(ue,(U,E,W)=>{v&&he(v,U)&&f.value!==E&&f.value.data!==E&&f.set(W?E:{data:E,...H})}))});const Y=()=>{v&&T&&m([v,T],f,u)},y=f.listen;return f.listen=$=>{const R=y($);return $(f.value),Y(),R},ht(f,()=>{f.value={...H},j?.(),k.forEach(R=>R()),k=[],O?.();const $=i.get(h);$&&clearInterval($)}),f},C=h=>{e.delete(h),l.delete(h)},b=(h,N)=>{for(const S of e.keys())he(S,h)&&N(S)},w=h=>{b(h,C),r.emit(_e,h)},x=(h,N)=>{b(h,S=>{N===void 0?C(S):e.set(S,N)}),r.emit(ue,h,N)};function g(h){const N=async f=>{var u;const j=c.fetcher??h,v=[];try{S.set({error:void 0,data:void 0,mutate:N,...Oe});const T=await j({data:f,invalidate:O=>{v.push(O)},getCacheUpdater:(O,D=!0)=>[k=>{x(O,k),D&&v.push(O)},e.get(O)]});return S.setKey("data",T),T}catch(T){(u=s?.onError)==null||u.call(s,T),S.setKey("error",T)}finally{S.setKey("loading",!1),v.forEach(w)}},S=M({mutate:N,...H});return S.mutate=N,S}return[p,g,{__unsafeOverruleSettings:h=>{console.warn("You should only use __unsafeOverruleSettings in test environment"),c=h},invalidateKeys:w,mutateCache:x}]};function Ee(e){return typeof e=="string"||typeof e=="number"||e===!0}const It=e=>{if(Ee(e))return[Te([""+e,[e]]),()=>{}];let t=Te(null),s=[];const r=()=>{s.some(i=>i==null||i===!1)?t.set(null):t.set([s.join(""),s])},o=[];for(let i=0;i<e.length;i++){const l=e[i];Ee(l)?s.push(l):o.push(l.subscribe(d=>{s[i]=Ut(l)?l.value&&"data"in l.value?l.key:null:d,r()}))}return r(),[t,()=>o.forEach(i=>i())]};function Ut(e){return e._===We}const Ae=1,Ne=2,_e=3,ue=4,ke=(e,t)=>{typeof window>"u"||addEventListener(e,t)},he=(e,t)=>Array.isArray(t)?t.includes(e):typeof t=="function"?t(e):e===t,Me=()=>new Date().getTime(),We=Symbol(),Oe={loading:!0},H={loading:!1};function Ft(e,t={}){let s=a.useCallback(o=>t.keys?yt(e,t.keys,o):e.listen(o),[t.keys,e]),r=e.get.bind(e);return a.useSyncExternalStore(s,r,r)}const ge=M([]),De=M([]);function Re(e){return e.map(t=>({id:`1.3.${t.id}`,symbol:t.s,precision:t.p,issuer:`1.2.${t.i}`,market_fee_percent:t.mfp,max_market_fee:t.mmf,max_supply:t.ms}))}function Bt(e){const t=ge.get();(!t||!t.length)&&ge.set(Re(e.bitshares));const s=De.get();(!s||!s.length)&&De.set(Re(e.bitshares_testnet))}const be=M([]),Pe=M([]);function Ie(e){return e.map(t=>({id:`1.19.${t.id}`,asset_a_id:`1.3.${t.a}`,asset_a_symbol:t.as,asset_b_id:`1.3.${t.b}`,asset_b_symbol:t.bs,share_asset_symbol:t.sa,balance_a:t.ba,balance_b:t.bb,taker_fee_percent:t.tfp}))}function zt(e){const t=be.get();if(!t||!t.length){const r=Ie(e.bitshares);be.set(r)}const s=Pe.get();if(!s||!s.length){const r=Ie(e.bitshares_testnet);Pe.set(r)}}const Se=M([]),Ue=M([]);function Lt(e){const t=Se.get();if(!t||!t.length){const r=e.bitshares;Se.set(r)}const s=Ue.get();if(!s||!s.length){const r=e.bitshares_testnet;Ue.set(r)}}const ve=M([]),Fe=M([]);function Ht(e){const t=ve.get();(!t||!t.length)&&ve.set(e.bitshares);const s=Fe.get();(!s||!s.length)&&Fe.set(e.bitshares_testnet)}const Je=M(null),Kt=M(null);function Vt(e){Je.set(e.bitshares),Kt.set(e.bitshares_testnet)}const Ge=M([]),Xt=M([]);function Yt(e){Ge.set(e.bitshares),Xt.set(e.bitshares_testnet)}const Q=M({username:"",id:"",chain:"",referrer:""});function G(e,t,s,r){Q.set({username:e,id:t,chain:r,referrer:s});try{Qe(e,t,s,r)}catch(o){console.log(o)}}const I=ft("storedUsers:",{users:[],lastAccount:[]},{encode(e){return JSON.stringify(e)},decode(e){try{return JSON.parse(e)}catch(t){return console.log(t),e}}});function Qe(e,t,s,r){const o=I.get().users,i={username:e,id:t,referrer:s,chain:r};if(I.setKey("lastAccount",[i]),o.find(d=>d.id===t))return;const l=[...o,i];I.setKey("users",l)}function qt(e){const s=I.get().users.filter(o=>o.id!==e);I.setKey("users",s);const r=I.get().lastAccount;r&&r.length&&r[0].id===e&&I.setKey("lastAccount",[])}const[Wt]=Pt({fetcher:async e=>{const t=e?e.split(","):[],s=[t.includes("marketSearch")&&!ve.get().length?fetch("http://localhost:8080/cache/marketSearch/bitshares",{method:"GET"}):null,t.includes("assets")&&!ge.get().length?fetch("http://localhost:8080/cache/minAssets/bitshares",{method:"GET"}):null,t.includes("pools")&&!be.get().length?fetch("http://localhost:8080/cache/minPools/bitshares",{method:"GET"}):null,t.includes("globalParams")&&!Je.get()?fetch("http://localhost:8080/cache/feeSchedule/bitshares",{method:"GET"}):null,t.includes("offers")&&!Se.get().length?fetch("http://localhost:8080/cache/offers/bitshares",{method:"GET"}):null,t.includes("bitAssetData")&&!Ge.get().length?fetch("http://localhost:8080/cache/bitassets/bitshares",{method:"GET"}):null];return await Promise.all(s)}});async function ys(e,t){const s=a.useMemo(()=>Wt([t.join(",")]),[e]),{data:r,loading:o,error:i}=Ft(s);if(a.useEffect(()=>{async function l(){await Promise.all(r.map(async(d,c)=>{if(!d)return;if(!d.ok){console.log("Failed to fetch data");return}const m=await d.json();if(!m||!m.result){console.log("Failed to fetch data");return}const p=fe(me(m.result.bitshares,!0)),C=fe(me(m.result.bitshares_testnet,!0)),b={bitshares:JSON.parse(pe(p)),bitshares_testnet:JSON.parse(pe(C))};switch(c){case 0:Ht(b);break;case 1:Bt(b);break;case 2:zt(b);break;case 3:Vt(b);break;case 4:Lt(b);break;case 5:Yt(b);break}}))}r&&!o&&!i&&l()},[r,o,i]),!Q||!Q.get().username){const l=I.get().users,d=I.get().lastAccount,c=l.find(m=>m.chain===e);if(!l||!l.length||!c)Qe("null-account","1.2.3","1.2.3","bitshares"),G("null-account","1.2.3","1.2.3","bitshares");else if(d&&d.length){const m=d[0];G(m.username,m.id,m.referrer,m.chain)}else c&&G(c.username,c.id,c.referrer,c.chain)}}var Jt=Object.defineProperty,Gt=(e,t,s)=>t in e?Jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ee=(e,t,s)=>(Gt(e,typeof t!="symbol"?t+"":t,s),s),ye=new Map,te=new WeakMap,Be=0,Qt=void 0;function Zt(e){return e?(te.has(e)||(Be+=1,te.set(e,Be.toString())),te.get(e)):"0"}function es(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?Zt(e.root):e[t]}`).toString()}function ts(e){let t=es(e),s=ye.get(t);if(!s){const r=new Map;let o;const i=new IntersectionObserver(l=>{l.forEach(d=>{var c;const m=d.isIntersecting&&o.some(p=>d.intersectionRatio>=p);e.trackVisibility&&typeof d.isVisible>"u"&&(d.isVisible=m),(c=r.get(d.target))==null||c.forEach(p=>{p(m,d)})})},e);o=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),s={id:t,observer:i,elements:r},ye.set(t,s)}return s}function ss(e,t,s={},r=Qt){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const c=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:typeof s.threshold=="number"?s.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:o,observer:i,elements:l}=ts(s);let d=l.get(e)||[];return l.has(e)||l.set(e,d),d.push(t),i.observe(e),function(){d.splice(d.indexOf(t),1),d.length===0&&(l.delete(e),i.unobserve(e)),l.size===0&&(i.disconnect(),ye.delete(o))}}function ns(e){return typeof e.children!="function"}var rs=class extends a.Component{constructor(e){super(e),ee(this,"node",null),ee(this,"_unobserveCb",null),ee(this,"handleNode",t=>{this.node&&(this.unobserve(),!t&&!this.props.triggerOnce&&!this.props.skip&&this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=t||null,this.observeNode()}),ee(this,"handleChange",(t,s)=>{t&&this.props.triggerOnce&&this.unobserve(),ns(this.props)||this.setState({inView:t,entry:s}),this.props.onChange&&this.props.onChange(t,s)}),this.state={inView:!!e.initialInView,entry:void 0}}componentDidMount(){this.unobserve(),this.observeNode()}componentDidUpdate(e){(e.rootMargin!==this.props.rootMargin||e.root!==this.props.root||e.threshold!==this.props.threshold||e.skip!==this.props.skip||e.trackVisibility!==this.props.trackVisibility||e.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve()}observeNode(){if(!this.node||this.props.skip)return;const{threshold:e,root:t,rootMargin:s,trackVisibility:r,delay:o,fallbackInView:i}=this.props;this._unobserveCb=ss(this.node,this.handleChange,{threshold:e,root:t,rootMargin:s,trackVisibility:r,delay:o},i)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){const{children:e}=this.props;if(typeof e=="function"){const{inView:w,entry:x}=this.state;return e({inView:w,entry:x,ref:this.handleNode})}const{as:t,triggerOnce:s,threshold:r,root:o,rootMargin:i,onChange:l,skip:d,trackVisibility:c,delay:m,initialInView:p,fallbackInView:C,...b}=this.props;return a.createElement(t||"div",{ref:this.handleNode,...b},e)}};const os=e=>{const t=a.useRef(e);return a.useEffect(()=>{t.current=e}),t},as=os,cs=typeof performance<"u"?performance:Date,is=()=>cs.now();function ls(e,t=30,s=!1){const r=as(e),o=1e3/t,i=a.useRef(0),l=a.useRef(),d=()=>l.current&&clearTimeout(l.current),c=[t,s,r];function m(){i.current=0,d()}return a.useEffect(()=>m,c),a.useCallback(function(){const p=arguments,C=is(),b=()=>{i.current=C,d(),r.current.apply(null,p)},w=i.current;if(s&&w===0)return b();if(C-w>o){if(w>0)return b();i.current=C}d(),l.current=setTimeout(()=>{b(),i.current=0},o)},c)}function ds(e,t,s){const r=a.useState(e);return[r[0],ls(r[1],t,s)]}const us=e=>{let t=0;for(const s of e)t=(t<<5)-t+s.charCodeAt(0),t&=t;return Math.abs(t)},hs=e=>{const t=e.slice(1),[s,r,o]=[0,2,4].map(l=>parseInt(t.slice(l,l+2),16));return(s*299+r*587+o*114)/1e3>=128?"#000000":"#FFFFFF"};class V{constructor(t){this._seed=t,(this._seed<=0||this._seed===Number.MAX_VALUE)&&(this._seed=1)}nextDouble(){const t=Math.floor(this._seed/V.q),s=this._seed%V.q;return this._seed=V.a*s-V.r*t,this._seed<=0&&(this._seed+=V.m),Number(this._seed)/V.m}nextInt(t,s){const r=Math.round(s)-Math.round(t);return t+Math.round(r*this.nextDouble())}nextNumber(t,s){const r=s-t;return t+r*this.nextDouble()}nextBoolean(){return this.nextDouble()>=.5}nextChoice(t){if(t.length===0)return;const s=this.nextInt(0,t.length-1);return t[s]}nextUnit=(t,s)=>this.nextNumber(s?-t:0,t);static a=16807;static m=2147483647;static q=127773;static r=2836}const A=36,fs=["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"],se=(e,t)=>({rightEye:e,leftEye:t??e}),Ce={normal:se(e=>n.jsx("rect",{x:e.x+e.eyeSpread,y:e.y,width:e.eyeSize,height:2,rx:1,fill:e.eyeColor})),happy:se(e=>n.jsx("path",{d:`M${e.x+e.eyeSpread-e.eyeSize},${e.y+e.eyeSize} Q${e.x+e.eyeSpread},${e.y} ${e.x+e.eyeSpread+e.eyeSize},${e.y+e.eyeSize}`,fill:"none",stroke:e.eyeColor,strokeWidth:1,strokeLinecap:"round"})),sleepy:se(e=>n.jsx("path",{d:`M${e.x+e.eyeSpread-e.eyeSize},${e.y} Q${e.x+e.eyeSpread},${e.y+e.eyeSize} ${e.x+e.eyeSpread+e.eyeSize},${e.y}`,fill:"none",stroke:e.eyeColor,strokeWidth:1,strokeLinecap:"round"})),mischief:se(e=>n.jsx("path",{d:`M${e.x+e.eyeSpread},${e.y} l${e.eyeSize},${e.eyeSize} l-${e.eyeSize},${e.eyeSize}`,fill:"none",stroke:e.eyeColor,strokeWidth:1,strokeLinecap:"round"}),e=>n.jsx("path",{d:`M${e.x+e.eyeSpread},${e.y} l-${e.eyeSize},${e.eyeSize} l${e.eyeSize},${e.eyeSize}`,fill:"none",stroke:e.eyeColor,strokeWidth:1,strokeLinecap:"round"}))},Ze={smile:e=>n.jsx("path",{d:`M13,${19+e.mouthSpread} a1,0.75 0 0,0 10,0`,fill:e.mouthColor}),open:e=>n.jsx("path",{d:`M15 ${19+e.mouthSpread}c2 1 4 1 6 0`,stroke:e.mouthColor,fill:"none",strokeLinecap:"round"}),surprise:e=>n.jsx("circle",{cx:20,cy:19+e.mouthSpread,r:e.mouthSize,fill:e.mouthColor}),unhappy:e=>n.jsx("path",{d:`M15 ${19+e.mouthSpread}c2 -1 4 -1 6 0`,stroke:e.mouthColor,fill:"none",strokeLinecap:"round"})},ms=e=>{let t="#";for(let s=0;s<6;s++){const r=Math.floor(e.nextUnit(16,!1));t+=r.toString(16)}return t};function ps(e,t=fs,s={}){let r=us(e);const o=new V(r),i=o?ms(o):t[0],l=o.nextUnit(10,!0),d=l<5?l+A/9:l,c=o.nextUnit(10,!0),m=c<5?c+A/9:c,p=s.eye??o?.nextChoice(Object.keys(Ce)),C=s.mouth??o?.nextChoice(Object.keys(Ze));return{wrapperColor:i,faceColor:hs(i),backgroundColor:o.nextChoice(t)??t[1],wrapperTranslateX:d,wrapperTranslateY:m,wrapperRotate:o.nextUnit(360,!1),wrapperScale:1+o.nextUnit(A/12,!1)/10,eyeSpread:o.nextUnit(5,!1)??0,eyeSize:1.5+(o.nextUnit(1,!1)??0),mouthSpread:o.nextUnit(5,!1)??0,mouthSize:1.5+(o.nextUnit(1,!0)??0),eyeType:p,mouthType:C}}const ae=({name:e,extra:t,colors:s,size:r,title:o,square:i,expression:l,...d})=>{const c=a.useMemo(()=>ps(e,s,l),[e,s,l]),m=a.useId(),[p,C]=ds({mouseX:null,mouseY:null},30),b=y=>{C({mouseX:y.clientX,mouseY:y.clientY})};a.useEffect(()=>(window.addEventListener("mousemove",b),()=>{window.removeEventListener("mousemove",b)}),[]);const[w,x]=a.useState(),[g,_]=a.useState(0),[h,N]=a.useState(0);a.useEffect(()=>{function y(){const $=document.querySelector(`#avatar${t}_${e.replace(".","")}`),{left:R,top:Z,width:ce,height:ie}=$.getBoundingClientRect(),q=R+ce/2,U=Z+ie/2;let E=Math.atan2(p.mouseY-U,p.mouseX-q)*180/Math.PI+90;E||(E=0),E<0&&(E=360+E),E===0&&(E=1),E=parseInt(E.toFixed(0));const W=Math.sqrt(Math.pow(p.mouseX-q,2)+Math.pow(p.mouseY-U,2));x(p.mouseX<=R?"left":"right"),N(W),_(E)}y()},[p]);const[S,f]=a.useState(1);a.useEffect(()=>{g?g>=0&&g<=15?f(15):g>20&&g<=95?f(g):g>95&&g<=180?f(95):g>180&&g<=275?f(275):g>275&&g<345?f(g):g>=345&&g<=360&&f(345):f(15)},[w,h,g]);const[u,j]=a.useState(!1),[v,T]=a.useState(c.mouthType),[O,D]=a.useState(c.eyeType);a.useEffect(()=>{const y=setInterval(()=>{if(u){D("sleepy"),T("surprise");return}D(c.eyeType!=="sleepy"?"sleepy":"normal"),setTimeout(()=>{D(c.eyeType)},Math.max(100,Math.random()*500))},Math.max(3e3,Math.random()*1e4));return()=>clearInterval(y)},[u]);const[k,Y]=a.useState();return a.useEffect(()=>{function y(){j(!0)}function $(){k&&clearTimeout(k),u&&(j(!1),D(c.eyeType),T(c.mouthType)),Y(setTimeout(y,3e4))}return p.mouseX&&p.mouseY&&$(),()=>{k&&clearTimeout(k)}},[p]),n.jsxs("svg",{viewBox:`0 0 ${A} ${A}`,fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:r,height:r,...d,children:[o&&n.jsx("title",{children:o}),n.jsx("mask",{id:m,maskUnits:"userSpaceOnUse",x:0,y:0,width:A,height:A,children:n.jsx("rect",{width:A,height:A,rx:i?void 0:A*2,fill:"#FFFFFF"})}),n.jsxs("g",{mask:`url(#${m})`,children:[n.jsx("rect",{width:A,height:A,fill:c.backgroundColor}),n.jsx("rect",{x:"0",y:"0",width:A,height:A,transform:`translate(${c.wrapperTranslateX} ${c.wrapperTranslateY}) rotate(${c.wrapperRotate} ${A/2} ${A/2}) scale(${c.wrapperScale})`,fill:c.wrapperColor,rx:A}),n.jsxs("g",{id:`avatar${t}_${e.replace(".","")}`,transform:`rotate(${w==="left"?S+65:S-65}, ${A/2} ${A/2})`,children:[Ce[O].leftEye({eyeSize:c.eyeSize,eyeSpread:Math.min(h/20,5)*(w==="left"?-1:1),eyeColor:c.faceColor,x:20,y:14}),Ce[O].rightEye({eyeSize:c.eyeSize,eyeSpread:Math.min(h/20,5)*(w==="left"?-1:1),eyeColor:c.faceColor,x:14,y:14}),Ze[v]({mouthSpread:Math.min(h/50,5),mouthSize:c.mouthSize,mouthColor:c.faceColor})]})]})]})};ae.displayName="Avatar";const et=a.forwardRef(({className:e,type:t,...s},r)=>n.jsx("input",{type:t,className:X("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));et.displayName="Input";function xs(e){const{t,i18n:s}=Le(He.get(),{i18n:Ke}),r=a.useSyncExternalStore(Q.subscribe,Q.get,()=>!0),[o,i]=a.useState(),[l,d]=a.useState(),[c,m]=a.useState(),[p,C]=a.useState(),[b,w]=a.useState();a.useEffect(()=>I.subscribe(j=>{w(j.users)}),[I]);const[x,g]=a.useState(!1),[_,h]=a.useState();async function N(){const u=await fetch(`http://localhost:8080/api/accountLookup/${o}/${c}`,{method:"GET"});if(!u.ok){console.log({error:new Error(`${u.status} ${u.statusText}`),msg:t("AccountSelect:noAccount")}),g(!1);return}const j=await u.json();if(j&&j.result){const v=fe(me(j.result,!0)),T=JSON.parse(pe(v));g(!1),h(T);return}g(!1),C(t("AccountSelect:noAccount"))}const S=_?n.jsx(F,{className:"w-1/2",onClick:()=>{G(_.name,_.id,_.referrer,o)},children:n.jsxs("div",{className:"grid grid-cols-4",children:[n.jsx("div",{className:"col-span-1 pt-6 pl-4",children:n.jsx(ae,{size:40,name:_.name,extra:"",expression:{eye:"normal",mouth:"open"},colors:["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]})}),n.jsx("div",{className:"col-span-3",children:n.jsxs(B,{children:[n.jsx(z,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:_.name}),n.jsx(K,{children:_.id})]})})]})},_.id):null,f=({user:u})=>n.jsxs(Ot,{children:[n.jsx(Dt,{asChild:!0,children:n.jsx(F,{onClick:()=>{G(u.username,u.id,u.referrer,u.chain)},children:n.jsxs("div",{className:"grid grid-cols-4",children:[n.jsx("div",{className:"col-span-1 pt-6 pl-2",children:n.jsx(ae,{size:40,name:u.username,extra:"",expression:{eye:"normal",mouth:"open"},colors:["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]})}),n.jsx("div",{className:"col-span-3",children:n.jsxs(B,{children:[n.jsx(z,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:u.username}),n.jsx(K,{children:u.id})]})})]})})}),n.jsxs(qe,{className:"w-80",children:[t("AccountSelect:forgetPrompt",{user:u.username}),n.jsx("br",{}),n.jsx(P,{className:"w-full mt-2 text-bold text-white",variant:"destructive",onClick:()=>{qt(u.id)},children:t("AccountSelect:forgetButton")})]})]},u.id);return n.jsxs("div",{className:"grid grid-cols-1",children:[o?null:n.jsxs(F,{children:[n.jsxs(B,{children:[n.jsx(z,{children:t("AccountSelect:noChain.title")}),n.jsx(K,{children:t("AccountSelect:noChain.description")})]}),n.jsxs(J,{children:[n.jsx(P,{className:"mr-2",onClick:()=>i("bitshares"),children:"Bitshares (BTS)"}),n.jsxs(P,{onClick:()=>i("bitshares_testnet"),children:["Bitshares ",t("AccountSelect:noChain.testnet")," (TEST)"]})]})]}),o&&!l?n.jsxs(F,{children:[n.jsxs(B,{children:[n.jsx(z,{children:t(o==="bitshares"?"AccountSelect:noMode.titleBTS":"AccountSelect:noMode.titleTEST")}),n.jsx(K,{children:t("AccountSelect:noMode.description")})]}),n.jsxs(J,{children:[n.jsx(P,{className:"mr-2",onClick:()=>d("new"),children:t("AccountSelect:noMode.new")}),n.jsx(P,{onClick:()=>d("existing"),children:t("AccountSelect:noMode.existing")}),n.jsx("br",{}),n.jsx(P,{className:"mt-2",onClick:()=>i(null),children:t("AccountSelect:noMode.back")})]})]}):null,o&&l&&l==="new"&&!_?n.jsxs(F,{children:[n.jsxs(B,{children:[n.jsx(z,{children:o==="bitshares"?"🔐 Bitshares (BTS)":"🔐 Bitshares testnet (TEST)"}),n.jsx(K,{children:t("AccountSelect:new.initDesc")})]}),n.jsxs(J,{children:[n.jsx(et,{value:c||"",placeholder:"Account name or ID",onKeyDown:u=>{u.key==="Enter"&&!x&&(g(!0),N())},onChange:u=>{/^[a-zA-Z0-9.-]*$/.test(u.target.value)&&(m(u.target.value),C(),h())}}),p?n.jsx("p",{className:"text-red-500 text-xs italic",children:p||"ERROR"}):null]}),n.jsxs(ne,{children:[n.jsx(P,{className:"mr-2",onClick:()=>d(null),children:t("AccountSelect:new.back")}),c&&!x?n.jsx(P,{onClick:()=>N(),children:t("AccountSelect:new.continue")}):n.jsx(P,{disabled:!0,children:t("AccountSelect:new.continue")})]})]}):null,_?n.jsxs(F,{children:[n.jsxs(B,{children:[n.jsxs(z,{children:[o==="bitshares"?"🔐 Bitshares (BTS) ":"🔐 Bitshares testnet (TEST) ",t("AccountSelect:new.title")]}),n.jsx(K,{children:t("AccountSelect:new.description")})]}),n.jsx(J,{children:r&&o!==r.chain?n.jsx("a",{href:window.location.pathname,children:S}):S}),n.jsx(ne,{children:n.jsx(P,{variant:"outline",className:"mr-2",onClick:()=>{C(),h()},children:t("AccountSelect:new.back")})})]}):null,l&&l==="existing"?n.jsxs(F,{children:[n.jsxs(B,{children:[n.jsx(z,{children:o==="bitshares"?"Bitshares (BTS)":"Bitshares testnet (TEST)"}),n.jsx(K,{children:t("AccountSelect:existing.description")})]}),n.jsx(J,{children:n.jsx("div",{className:"grid grid-cols-3 gap-3",children:b.filter(u=>u.chain===o).length?b.filter(u=>u.chain===o).map(u=>r&&o!==r.chain?n.jsx("a",{href:window.location.pathname,children:n.jsx(f,{user:u})}):n.jsx(f,{user:u})):n.jsx("p",{className:"text-red-500 text-xs italic",children:t("AccountSelect:existing.none")})})}),n.jsx(ne,{children:n.jsx(P,{className:"mr-2",onClick:()=>d(null),children:t("AccountSelect:noMode.back")})})]}):null]})}function Cs(e){const{usr:t}=e,{t:s,i18n:r}=Le(He.get(),{i18n:Ke}),[o,i]=tt.useState(!1);if(!t||!t.id||!t.id.length)return null;const[l,d]=a.useState(!1);return a.useEffect(()=>{t&&t.id&&t.id.length&&d(!1)},[t]),n.jsx("div",{className:"flex justify-center",children:n.jsxs("div",{className:"grid grid-cols-1 mt-3",children:[n.jsx(F,{className:"w-full",style:{transform:"scale(0.75)"},children:n.jsx(B,{children:n.jsx(z,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n.jsxs("div",{className:"grid grid-cols-3",children:[n.jsx("div",{className:"col-span-1 pr-3 pt-3",children:n.jsx(rs,{onChange:i,children:o?n.jsx(ae,{size:50,name:t.username,extra:"",expression:{eye:"normal",mouth:"open"},colors:["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]}):null})}),n.jsxs("div",{className:"col-span-2 pl-3",children:[n.jsx("span",{className:"text-xl",children:t.username}),n.jsx("br",{}),n.jsxs("span",{className:"text-sm",children:[t.chain,n.jsx("br",{}),t.id]})]})]})})})},t.id),n.jsxs(mt,{open:l,onOpenChange:c=>{d(c)},children:[n.jsx(pt,{asChild:!0,children:n.jsx(P,{className:"h-5 p-3",children:s("CurrentUser:dialogContent.switchAccountChain")})}),n.jsxs(xt,{className:"sm:max-w-[600px] bg-white",children:[n.jsxs(gt,{children:[n.jsx(bt,{children:s("CurrentUser:dialogContent.replacingUser")}),n.jsx(St,{children:s("CurrentUser:dialogContent.selectChainAccount")})]}),n.jsx(xs,{})]})]})]})})}export{Q as $,ae as A,F as C,Ot as H,et as I,Dt as a,B as b,z as c,K as d,qe as e,Cs as f,Ge as g,Xt as h,ve as i,Fe as j,Je as k,Kt as l,J as m,ge as n,De as o,ne as p,Se as q,Ue as r,be as s,Pe as t,ys as u,Pt as v,Ft as w};
