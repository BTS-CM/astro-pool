import{u as e,I as M}from"./hover-card.e7ea2833.js";import{r as t}from"./index.33c77f1d.js";import{u as _,F as z,a as v,b as k,c as y,d as F,f as H,e as u}from"./form.0dac8970.js";import{$,i as B,j as D,f as w,u as J,C as h,a as x,b as f,c as j,g as p,A as q,I as E,d as G}from"./CurrentUser.a6c6908b.js";import"./avatar.c69d07d1.js";import{h as K,t as Q,e as W}from"./common.760824ab.js";import{c as X}from"./User.92772f34.js";import{D as Y}from"./DeepLinkDialog.7792d306.js";import{E as Z}from"./ExternalLink.b2ec4386.js";import"./index.0d05e5a3.js";function pe(ee){const d=_({defaultValues:{account:""}}),[A,b]=t.useState(!1),[g,U]=t.useState(),[r,se]=t.useState(),[n,te]=t.useState(),[m,re]=t.useState(0),s=t.useSyncExternalStore($.subscribe,$.get,()=>!0),S=t.useSyncExternalStore(B.subscribe,B.get,()=>!0),i=t.useSyncExternalStore(D.subscribe,D.get,()=>!0);t.useSyncExternalStore(w.subscribe,w.get,()=>!0),J(s&&s.chain?s.chain:"bitshares",["assets","globalParams","marketSearch"]);const[C,T]=t.useState(0);t.useEffect(()=>{if(i&&i.length){const a=i.find(l=>l[0]===0),N=K(a[1].fee,5);T(N)}},[i]);const[I,ae]=t.useState(0),[ne,P]=t.useState();t.useEffect(()=>{let a;return s&&s.id&&(a=X([s.chain,s.id]).subscribe(({data:l,error:O,loading:V})=>{l&&!O&&!V&&P(l)})),()=>{a&&a()}},[s,I]);const[o,R]=t.useState(),c=t.useMemo(()=>n?S.filter(a=>a.symbol===n):[],[n,S]);t.useEffect(()=>{c&&c.length&&R(c[0])},[c]);const[ie,L]=t.useState(!1);return t.useEffect(()=>{g&&U(!1)},[g]),t.useEffect(()=>{r&&L(!1)},[r]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container mx-auto mt-5 mb-5",children:[e.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.jsxs(h,{children:[e.jsxs(x,{children:[e.jsx(f,{children:"Transfer assets"}),e.jsxs(j,{children:[e.jsx("p",{children:"Send funds from an account you control to another BitShares account holder."}),e.jsxs("p",{className:"mt-1",children:["⛔ Doesn't yet support a memo, so don't use this form when transfering to external services.",e.jsx("br",{}),"✅ Use for simple transfers between accounts."]})]})]}),e.jsxs(p,{children:[e.jsx(z,{...d,children:e.jsxs("form",{onSubmit:()=>{b(!0),event.preventDefault()},children:[e.jsx(v,{control:d.control,name:"account",render:({field:a})=>e.jsxs(k,{children:[e.jsx(y,{children:"Sending account"}),e.jsx(F,{children:e.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[e.jsx("div",{className:"col-span-1 ml-5",children:e.jsx(q,{size:40,name:s&&s.username?s.username:"x",extra:"Sender",expression:{eye:"normal",mouth:"open"},colors:["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]})}),e.jsx("div",{className:"col-span-7",children:e.jsx(E,{disabled:!0,placeholder:"Bitshares account (1.2.x)",className:"mb-1 mt-1",value:`${s&&s.username?s.username:"?"} (${s&&s.id?s.id:"?"})`})})]})}),e.jsx(H,{children:"This is the account that owns the market order which is being updated."}),e.jsx(u,{})]})}),e.jsx(v,{control:d.control,name:"networkFee",render:({field:a})=>e.jsxs(k,{children:[e.jsx(y,{children:"Network fee"}),e.jsx(F,{children:e.jsx(E,{disabled:!0,placeholder:`${C} BTS`,className:"mb-3 mt-3"})}),s.id===s.referrer?e.jsxs(u,{children:["Rebate: ",Q(C*.8,5)," BTS (vesting)"]}):null,e.jsx(u,{})]})}),e.jsx(M,{className:"mt-5 mb-3",variant:"outline",type:"submit",children:"Submit"})]})}),A?e.jsx(Y,{operationName:"transfer",username:s.username,usrChain:s.chain,userID:s.id,dismissCallback:b,headerText:`Sending ${m} ${o.symbol} (${o.id}) to ${r.name} from ${s.username}`,trxJSON:[{fee:{amount:0,asset_id:"1.3.0"},from:s.id,to:r.id,amount:{amount:W(m,o.precision).toFixed(0),asset_id:o.id},extensions:[]}]},`Sending${m}${n}to${r.name}from${s.username}`):null]})]})}),e.jsxs("div",{className:"grid grid-cols-2 mt-5 gap-5",children:[r&&r.name?e.jsx("div",{className:"col-span-1",children:e.jsxs(h,{children:[e.jsxs(x,{className:"pb-0 mb-0",children:[e.jsx(f,{children:"Double check the above details!"}),e.jsx(j,{children:"Avoid heartbreak, check your inputs!"})]}),e.jsx(p,{className:"text-sm",children:e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:[e.jsx("li",{children:"Before you proceed, please double check the form inputs."}),e.jsx("li",{children:"Validate the entire Beet prompt contents before you broadcast the transaction."}),e.jsx("li",{children:e.jsx(Z,{type:"text",classnamecontents:"",hyperlink:`https://blocksights.info/#/accounts/${r.name}`,text:`Click here to view ${r.name}'s account on the
                        Blocksights blockchain explorer.`})})]})})]})}):null,r&&r.name?e.jsx("div",{className:"col-span-1",children:e.jsxs(h,{children:[e.jsxs(x,{className:"pb-0 mb-0",children:[e.jsx(f,{children:"Beware! Don't fall for scams!"}),e.jsx(j,{children:"Be vigilant against scammers!"})]}),e.jsx(p,{className:"text-sm",children:e.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-2",children:[e.jsx("li",{children:"Crypto exchanges will NEVER direct message you in with special transfer instructions to follow for deposits nor withdrawals."}),e.jsx("li",{children:"Asset transfer operations are permanent and the majority of assets are irrecoverable if erroneously transferred."}),e.jsx("li",{children:"If something sounds too good to be true, then it likely is, don't fall victim to scammers tricks."})]})})]})}):null]}),e.jsx("div",{className:"grid grid-cols-1 mt-5",children:s&&s.username&&s.username.length?e.jsx(G,{usr:s}):null})]})})}export{pe as default};
