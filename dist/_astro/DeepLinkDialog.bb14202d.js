import{E as k,a1 as N,j as e,D as S,l as b,B as n}from"./CurrentUser.6e688dc0.js";import{r as d}from"./index.178a5b5e.js";import{c as D}from"./common.6cf182e8.js";let h=[];const[y]=k({fetcher:(...a)=>fetch(`http://localhost:8080/api/deeplink/${a[0]}/${a[1]}`,{method:"POST",body:JSON.stringify(h)}).then(async r=>{if(!r.ok)throw console.log("Failed to generate deeplink"),new Error("Failed to generate deeplink");let t;try{t=await r.json()}catch{throw console.log("Failed to parse JSON"),new Error("Failed to parse JSON")}return t}).then(r=>{if(r&&r.result&&r.result.generatedDeepLink)return r.result.generatedDeepLink;throw new Error("No deep link generated")})});function B(a){const{trxJSON:r,operationName:t,usrChain:o,headerText:g,dismissCallback:u,username:x,userID:m}=a,p=d.useMemo(()=>(h=r,y([o,t])),[o,t,r]),{data:l,loading:s,error:f}=N(p),[i,c]=d.useState(!1),w=()=>{i||(c(!0),setTimeout(()=>{c(!1)},1e4))};return e.jsx(S,{open:!0,onOpenChange:j=>{u(j)},children:e.jsx(b,{className:"sm:max-w-[425px] bg-white",children:e.jsxs(e.Fragment,{children:[s?e.jsx("h1",{className:"scroll-m-20 text-2xl font-extrabold tracking-tight",children:"Generating deeplink..."}):e.jsx("h1",{className:"scroll-m-20 text-2xl font-extrabold tracking-tight",children:g}),f?e.jsx("h2",{children:"An error occurred, sorry. Please close this dialog and try again."}):null,e.jsxs("h3",{className:"scroll-m-20 text-1xl font-semibold tracking-tight mb-3 mt-1",children:["With the account: ",x," (",m,")",e.jsx("br",{}),s?null:e.jsxs(e.Fragment,{children:["Your Bitshares create limit order operation is ready!",e.jsx("br",{}),"Use the links below to interact with the Beet wallet."]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx(n,{color:"gray",className:"w-full",onClick:()=>{D(JSON.stringify(r,null,4))},variant:"outline",children:"Copy operation JSON"}),i?e.jsx(n,{variant:"outline",disabled:!0,children:"Downloading..."}):e.jsx("a",{href:`data:text/json;charset=utf-8,${l}`,download:`${t}.json`,target:"_blank",rel:"noreferrer",onClick:w,children:e.jsx(n,{variant:"outline",className:"w-full",children:"Download Beet operation JSON"})}),e.jsx("a",{href:`rawbeet://api?chain=BTS&request=${l}`,children:e.jsx(n,{variant:"outline",className:"w-full",children:"Trigger raw Beet deeplink"})})]})]})})})}export{B as D};
