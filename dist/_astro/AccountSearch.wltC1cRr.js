import{u as N,l as R,j as e,d as k,s as E,a as w,i as T}from"./utils.PzWS3l9y.js";import{r as i}from"./index.9AF9g4V4.js";import{C as y,a as I,b,c as B}from"./users.yqNUHc1D.js";import{I as F}from"./input.Y7dPqOuy.js";import{B as d}from"./button.BfLaDv1I.js";import{A as $}from"./Avatar.ynruXzIt.js";function H(g){const{chain:p,excludedUsers:m,setChosenAccount:x}=g,{t:s,i18n:D}=N(R.get(),{i18n:T}),[a,A]=i.useState(),[j,o]=i.useState(),[v,n]=i.useState(!1),[r,h]=i.useState();async function S(){const c=m.map(t=>t.username),f=m.map(t=>t.id);if(c.includes(a)||f.includes(a)){n(!1),o(s("AccountSearch:noSearch.selfError"));return}const l=await fetch(`http://localhost:8080/api/accountLookup/${p}/${a}`,{method:"GET"});if(!l.ok){console.log({error:new Error(`${l.status} ${l.statusText}`),msg:s("AccountSearch:noSearch.error")}),n(!1);return}const u=await l.json();if(u&&u.result){const t=k(E(u.result,!0)),C=JSON.parse(w(t));n(!1),h(C);return}n(!1),o(s("AccountSearch:noSearch.error"))}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[r?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-1",children:s("AccountSearch:noSearch.prompt")}),e.jsxs("div",{className:"col-span-1",children:[e.jsx(F,{value:a||"",placeholder:s("AccountSearch:noSearch.placeholder"),onKeyDown:c=>{c.key==="Enter"&&!v&&(n(!0),S())},onChange:c=>{/^[a-zA-Z0-9.-]*$/.test(c.target.value)&&(A(c.target.value),o(),h())}}),j?e.jsx("p",{className:"text-red-500 text-xs italic",children:j||"ERROR"}):null]}),e.jsx("div",{className:"col-span-1",children:a?e.jsx(d,{onClick:()=>S(),children:s("AccountSearch:noSearch.continue")}):e.jsx(d,{disabled:!0,children:s("AccountSearch:noSearch.continue")})})]}),r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-1",children:s(p==="bitshares"?"AccountSearch:searchResponse.promptBTS":"AccountSearch:searchResponse.promptTEST")}),e.jsx("div",{className:"col-span-1",children:e.jsx(y,{className:"mb-2 mt-1 text-center",onClick:()=>{x({name:r.name,id:r.id})},children:e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("div",{className:"col-span-1 pt-6 pl-7",children:e.jsx($,{size:40,name:r.name,extra:"AS",expression:{eye:"normal",mouth:"open"},colors:["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]})}),e.jsx("div",{className:"col-span-3",children:e.jsxs(I,{children:[e.jsx(b,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.name}),e.jsx(B,{children:r.id})]})})]})},r.id)}),e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("div",{children:e.jsx(d,{variant:"outline",className:"mr-2",onClick:()=>{o(),h()},children:s("AccountSearch:searchResponse.back")})}),e.jsx("div",{className:"text-right",children:e.jsx(d,{variant:"outline",onClick:()=>{x({name:r.name,id:r.id})},children:s("AccountSearch:searchResponse.proceed")})})]})})]}):null]})})}export{H as A};
