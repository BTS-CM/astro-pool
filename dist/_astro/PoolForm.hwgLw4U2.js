import{u as je,l as fe,j as s,i as ye}from"./utils.f2cWa0M5.js";import{r as t}from"./index.sXsv9c-e.js";import{F as ge}from"./fuse.aCsZfKX4.js";import{u as Ne,F as _e,a as V,b as I,c as J,d as q,e as K,f as Z}from"./form.lZWYRzQu.js";import{F as ys}from"./index.esm.MzjYIzP_.js";import{$ as Rs,C as F,a as P,b as T,c as D,d as v}from"./users.jrnbX0_8.js";import{D as gs,e as Ns,a as _s,b as Ss,c as Fs,d as Ps}from"./dialog.syK3Ff39.js";import{S as Se,a as Fe,b as Pe,c as Te,d as ve}from"./select.jGoYDpMA.js";import{D as De,L as as}from"./DeepLinkDialog.hhX-uqsX.js";import{B as U}from"./badge.003_V-VC.js";import{B as k}from"./button.a7-WOX-8.js";import{I as z}from"./input.hzHoVlAt.js";import{S as Os}from"./scroll-area.1An-4fTu.js";import{S}from"./skeleton.e15pNxy9.js";import{T as we}from"./toggle.w1qcogAL.js";import{h as Ts,T as Ce,a as Ae,b as os,c as Is,d as Js}from"./common.hInvFuHt.js";import{A as ke,a as Be}from"./avatar.6-Vbudo0.js";import{A as $e}from"./Avatar.ayrde5G3.js";import{$ as qs,a as Us,f as zs,g as Hs,h as Vs,i as Ks,d as Zs,e as Gs,u as Ee}from"./Init.DukeMtId.js";import{c as vs,a as Qs}from"./Assets.Bwm3_wwj.js";import{c as Me}from"./Pools.IogGQ9gr.js";import{c as Le}from"./User.zQvnfFk2.js";import{P as Re}from"./PoolDialogs.AtGK2vJ-.js";import{M as Ds}from"./MarketAssetCard.7Hu1LYWa.js";import{E as ws}from"./ExternalLink.iv_ddFeE.js";import"./index.LDFW_GCY.js";import"./index.QjywInIh.js";import"./index.x6Fbg0gz.js";import"./index.f2GGseSc.js";import"./index.u8nr6ruA.js";import"./index.reIbhit3.js";import"./index.lLhWZhZj.js";import"./hover-card.rVxnnVoR.js";import"./CardRow.IOiLog6o.js";function gl(){const{t:e,i18n:Oe}=je(fe.get(),{i18n:ye}),B=Ne({defaultValues:{account:""}}),[h,$]=t.useState(""),r=t.useSyncExternalStore(Rs.subscribe,Rs.get,()=>!0),ts=t.useSyncExternalStore(qs.subscribe,qs.get,()=>!0),rs=t.useSyncExternalStore(Us.subscribe,Us.get,()=>!0),is=t.useSyncExternalStore(zs.subscribe,zs.get,()=>!0),ns=t.useSyncExternalStore(Hs.subscribe,Hs.get,()=>!0),cs=t.useSyncExternalStore(Vs.subscribe,Vs.get,()=>!0),ms=t.useSyncExternalStore(Ks.subscribe,Ks.get,()=>!0),ds=t.useSyncExternalStore(Zs.subscribe,Zs.get,()=>!0),hs=t.useSyncExternalStore(Gs.subscribe,Gs.get,()=>!0),y=t.useMemo(()=>r&&r.chain?r.chain:"bitshares",[r]);Ee(y??"bitshares",["marketSearch","assets","pools","globalParams"]);const N=t.useMemo(()=>y&&(ts||rs)?y==="bitshares"?ts:rs:[],[ts,rs,y]),b=t.useMemo(()=>y&&(is||ns)?y==="bitshares"?is:ns:[],[is,ns,y]),G=t.useMemo(()=>y&&(cs||ms)?y==="bitshares"?cs:ms:[],[cs,ms,y]),Q=t.useMemo(()=>y&&(ds||hs)?y==="bitshares"?ds:hs:[],[ds,hs,y]),[Cs,Ws]=t.useState();t.useEffect(()=>{if(Q&&Q.length){const n=Q.find(i=>i[0]===63),c=Ts(n[1].fee,5);Ws(c)}},[Q]);const[W,As]=t.useState("asset"),bs=t.useMemo(()=>!b||!b.length?null:new ge(b,{includeScore:!0,threshold:.2,keys:W==="asset"?["asset_a_symbol","asset_b_symbol"]:["share_asset_symbol"]}),[b,W]),[Xs,ks]=t.useState(!1),[us,Ys]=t.useState(),[C,xs]=t.useState();t.useEffect(()=>{if(bs&&us){const n=bs.search(us);xs(n)}},[bs,us]);const Bs=({index:n,style:c})=>{const i=C[n].item;return s.jsxs("div",{style:{...c},className:"grid grid-cols-12",onClick:()=>{$(i.id),ks(!1),xs()},children:[s.jsx("div",{className:"col-span-2",children:i.id}),s.jsx("div",{className:"col-span-3",children:i.share_asset_symbol}),s.jsxs("div",{className:"col-span-3",children:[i.asset_a_symbol," (",i.asset_a_id,")"]}),s.jsxs("div",{className:"col-span-3",children:[i.asset_b_symbol," (",i.asset_b_id,")"]}),s.jsxs("div",{className:"col-span-1",children:[i.taker_fee_percent/100,"%"]})]},`acard-${i.id}`)},$s={backgroundColor:"#252526",color:"white"};t.useEffect(()=>{async function n(){if(window.location.search){const c=new URLSearchParams(window.location.search),i=Object.fromEntries(c.entries()),m=i&&i.pool?i.pool:null;if(!m||!m.length){console.log("Invalid pool parameters"),$("1.19.0");return}if(m&&m.length&&!m.includes("1.19.")){console.log("Invalid pool parameters"),$("1.19.0");return}if(!(b&&b.length?b.map(x=>x.id):[]).includes(m)){console.log("Replacing unknown pool with first pool in list"),$("1.19.0");return}$(m)}}b&&b.length&&n()},[b]);const[g,Es]=t.useState(0),[d,se]=t.useState(),[l,ee]=t.useState(""),[a,le]=t.useState(""),[ae,X]=t.useState(!1),oe=ae?{transition:"transform 0.5s",transform:"rotate(360deg)"}:{};t.useEffect(()=>{if(b&&h&&N){const n=b.find(m=>m.id===h);if(!n){console.log("Invalid pool");return}se(n);const c=N.find(m=>m.id===n.asset_a_id),i=N.find(m=>m.id===n.asset_b_id);ee(c),le(i),Es(1)}},[h,b,N]);const[u,te]=t.useState();t.useEffect(()=>{let n;return r&&r.chain&&d&&l&&a&&N&&(n=Me([r.chain,d.id]).subscribe(({data:i,error:m,loading:_})=>{if(i&&!m&&!_){let x=i;x.asset_a_symbol=l.symbol,x.asset_a_precision=l.precision,x.asset_b_symbol=a.symbol,x.asset_b_precision=a.precision,x.share_asset_symbol=d.share_asset_symbol,x.readable_balance_a=`${Ts(x.balance_a,l.precision)} ${l.symbol}`,x.readable_balance_b=`${Ts(x.balance_b,a.precision)} ${a.symbol}`,x.share_asset_details=N.find(R=>R.id===x.share_asset),te(x)}})),()=>{n&&n()}},[r,d,l,a,N]);const[E,re]=t.useState(null),[M,ie]=t.useState(null),[ps,ne]=t.useState(null),[Y,ce]=t.useState(null),[ss,me]=t.useState(null);t.useEffect(()=>{let n,c,i,m,_;if(r&&r.id&&N&&l&&a&&d){n=vs([r.chain,l.id.replace("1.3.","2.3.")]).subscribe(({data:p,error:f,loading:j})=>{p&&!f&&!j&&re(p)}),c=vs([r.chain,a.id.replace("1.3.","2.3.")]).subscribe(({data:p,error:f,loading:j})=>{p&&!f&&!j&&ie(p)});const w=N.find(p=>p.symbol===d.share_asset_symbol);i=vs([r.chain,w.id.replace("1.3.","2.3.")]).subscribe(({data:p,error:f,loading:j})=>{p&&!f&&!j&&ne(p)}),l.bitasset_data_id&&(m=Qs([r.chain,l.bitasset_data_id]).subscribe(({data:f,error:j,loading:O})=>{f&&!j&&!O&&ce(f)})),a.bitasset_data_id&&(_=Qs([r.chain,a.bitasset_data_id]).subscribe(({data:f,error:j,loading:O})=>{f&&!j&&!O&&me(f)}))}return()=>{n&&n(),c&&c(),i&&i(),m&&m(),_&&_()}},[r,l,a,d,N]);const[H,de]=t.useState();t.useEffect(()=>{let n;return r&&r.id&&l&&a&&(n=Le([r.chain,r.id]).subscribe(({data:i,error:m,loading:_})=>{i&&!m&&!_&&de(i)})),()=>{n&&n()}},[r,l,a]);const[o,Ms]=t.useState(!1),L=t.useMemo(()=>{if(l&&a&&u){let n=function(){if(w===0)return 0;if(w>0)return Math.min(Number(p),Math.ceil(Number(g)*Number(_)*(Number(w)/1e4)))},c=function(){if(ls===0)return 0;if(ls>0)return Math.min(Number(f),Math.ceil(Number(g)*Number(R)*(Number(ls)/1e4)))},i=function(){return typeof j>"u"&&w>0?Number(w)/1e4:typeof j>"u"&&w===0?0:Number(j)/1e4},m=Number(u.balance_a),_=Number(10**l.precision),x=Number(u.balance_b),R=Number(10**a.precision);const w=l.market_fee_percent,ls=a.market_fee_percent,p=l.max_market_fee,f=a.max_market_fee,j=u.taker_fee_percent;let O=Number(i()),js;if(l&&d&&!o){let A=Number(x)-Math.ceil(Number(x)*Number(m)/(Number(m)+(Number(g)*Number(_)-Number(n())))),fs=Number(A)*Number(j)/1e4;js=(Number(A)-Math.floor(Number(fs))-Math.ceil(Math.min(Number(f),Math.ceil(Number(A)*Number(O)))))/Number(R)}else{let A=Number(m)-Math.ceil(Number(m)*Number(x)/(Number(x)+(Number(g)*Number(R)-Number(c())))),fs=Number(A)*Number(j)/1e4;js=(Number(A)-Math.floor(Number(fs))-Math.ceil(Math.min(Number(p),Math.ceil(Number(A)*Number(O)))))/Number(_)}return js}},[g,l,a,o,u]),[he,be]=t.useState();t.useEffect(()=>{be(s.jsx(z,{readOnly:!0,value:L??0,disabled:!0,className:"mb-3"}))},[L]);const[es,Ls]=t.useState(!1),[ue,xe]=t.useState("default_pool_key");t.useEffect(()=>{h&&h.length&&window.history.replaceState({},"",`?pool=${h}`),xe(`pool_key${Date.now()}`)},[h]);const pe=({index:n,style:c})=>{const i=b[n];return s.jsx(ve,{value:i.id,style:c,children:`${i.id} - ${i.share_asset_symbol} - ${i.asset_a_symbol}:${i.asset_b_symbol}`})};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"container mx-auto mt-5 mb-5",children:[s.jsx("div",{className:"grid grid-cols-1 gap-3",children:s.jsxs(F,{className:"p-2",children:[s.jsxs(P,{children:[s.jsx(T,{children:e("PoolForm:title")}),s.jsx(D,{children:e("PoolForm:description")})]}),s.jsxs(v,{children:[b?null:s.jsx("p",{children:e("PoolForm:loadingPoolData")}),N?null:s.jsx("p",{children:e("PoolForm:loadingAssetData")}),b&&N?s.jsxs(s.Fragment,{children:[s.jsx(_e,{...B,children:s.jsxs("form",{onSubmit:()=>{Ls(!0),event.preventDefault()},children:[s.jsx(V,{control:B.control,name:"account",render:({field:n})=>s.jsxs(I,{children:[s.jsx(J,{children:e("PoolForm:accountLabel")})," ",s.jsx(q,{children:s.jsxs("div",{className:"grid grid-cols-8",children:[s.jsx("div",{className:"col-span-1 ml-5",children:r&&r.username?s.jsx($e,{size:40,name:r.username,extra:"Target",expression:{eye:"normal",mouth:"open"},colors:["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]}):s.jsx(ke,{children:s.jsx(Be,{children:"?"})})}),s.jsx("div",{className:"col-span-7",children:s.jsx(z,{disabled:!0,readOnly:!0,placeholder:"Bitshares account (1.2.x)",className:"mb-3 mt-1",value:`${r.username} (${r.id})`})})]})})]})}),s.jsx(V,{control:B.control,name:"pool",render:({field:n})=>s.jsxs(I,{children:[s.jsx(J,{children:e("PoolForm:liquidityPoolLabel")}),s.jsx(K,{style:{marginTop:"0px"},children:e(u?"PoolForm:foundPoolDetails":"PoolForm:noPoolDetails")}),s.jsx(q,{onChange:c=>{$(c.target.value)},children:s.jsxs("div",{className:"grid grid-cols-5 mt-3",children:[s.jsx("div",{className:"mt-1 col-span-4",children:s.jsxs(Se,{children:[s.jsx(Fe,{className:"mb-3",children:s.jsx(Pe,{placeholder:d?`${d.id} - ${d.share_asset_symbol} - ${d.asset_a_symbol}:${d.asset_b_symbol}`:e("PoolForm:selectPoolPlaceholder")})}),s.jsx(Te,{className:"bg-white",children:b&&b.length?s.jsx(ys,{height:150,itemCount:b.length,itemSize:35,className:"w-full",initialScrollOffset:b.map(c=>c.id).indexOf(h)*35,children:pe}):null})]},ue)}),s.jsx("div",{className:"text-gray-500 text-right col-span-1 ml-3",children:s.jsxs(gs,{open:Xs,onOpenChange:c=>{c||xs(),ks(c)},children:[s.jsx(Ns,{asChild:!0,children:s.jsx(k,{variant:"outline",className:"h-9 mt-1 p-3 w-full",children:e("PoolForm:searchButton")})}),s.jsxs(_s,{className:"sm:max-w-[900px] bg-white",children:[s.jsxs(Ss,{children:[s.jsx(Fs,{children:e("PoolForm:searchDialogTitle")}),s.jsx(Ps,{children:e("PoolForm:searchDialogDescription")})]}),s.jsx("div",{className:"grid grid-cols-1",children:s.jsx("div",{className:"col-span-1",children:s.jsxs(Ce,{defaultValue:"asset",children:[s.jsxs(Ae,{className:"grid max-w-[400px] grid-cols-2 mb-1 gap-3",children:[W==="asset"?s.jsx(os,{style:$s,value:"asset",children:e("PoolForm:swappableAssetsTab")}):s.jsx(os,{value:"asset",onClick:()=>As("asset"),children:e("PoolForm:swappableAssetsTab")}),W==="share"?s.jsx(os,{style:$s,value:"share",children:e("PoolForm:poolShareAssetTab")}):s.jsx(os,{value:"share",onClick:()=>As("share"),children:e("PoolForm:poolShareAssetTab")})]}),s.jsx(z,{name:"assetSearch",placeholder:"Enter search text",className:"mb-3 max-w-[400px]",onChange:c=>{Ys(c.target.value),c.preventDefault(),c.stopPropagation()}}),s.jsx(Is,{value:"share",children:C&&C.length?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-2",children:e("PoolForm:idColumnTitle")}),s.jsx("div",{className:"col-span-3",children:s.jsx("b",{children:e("PoolForm:shareAssetColumnTitle")})}),s.jsx("div",{className:"col-span-3",children:e("PoolForm:assetAColumnTitle")}),s.jsx("div",{className:"col-span-3",children:e("PoolForm:assetBColumnTitle")}),s.jsx("div",{className:"col-span-1",children:e("PoolForm:takerFeeColumnTitle")})]}),s.jsx(ys,{height:400,itemCount:C.length,itemSize:45,className:"w-full",children:Bs})]}):null}),s.jsx(Is,{value:"asset",children:C&&C.length?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-2",children:e("PoolForm:idColumnTitle")}),s.jsx("div",{className:"col-span-3",children:e("PoolForm:shareAssetColumnTitle")}),s.jsx("div",{className:"col-span-3",children:s.jsx("b",{children:e("PoolForm:assetAColumnTitle")})}),s.jsx("div",{className:"col-span-3",children:s.jsx("b",{children:e("PoolForm:assetBColumnTitle")})}),s.jsx("div",{className:"col-span-1",children:e("PoolForm:takerFeeColumnTitle")})]}),s.jsx(ys,{height:400,itemCount:C.length,itemSize:45,className:"w-full",children:Bs})]}):null})]})})})]})]})})]})})]})}),s.jsx("div",{className:"grid grid-cols-11 gap-5 mt-1 mb-1",children:h&&u&&l&&a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-5",children:s.jsxs(F,{children:[s.jsx(P,{className:"pb-0",children:s.jsxs(T,{className:"text-sm pt-0",children:[e("PoolForm:swappable")," ",s.jsx(ws,{classnamecontents:"text-blue-500",type:"text",text:o?a.symbol:l.symbol,hyperlink:`https://blocksights.info/#/assets/${o?a.id:l.id}`})]})}),s.jsx(v,{className:"text-lg mt-0 pt-0",children:u[o?"readable_balance_b":"readable_balance_a"].split(" ")[0]})]})}),s.jsx("div",{className:"col-span-1 text-center mt-8",children:s.jsx(we,{variant:"outline",onClick:()=>{Ms(!o),X(!0),setTimeout(()=>X(!1),500)},children:s.jsx("svg",{style:oe,width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M1.90321 7.29677C1.90321 10.341 4.11041 12.4147 6.58893 12.8439C6.87255 12.893 7.06266 13.1627 7.01355 13.4464C6.96444 13.73 6.69471 13.9201 6.41109 13.871C3.49942 13.3668 0.86084 10.9127 0.86084 7.29677C0.860839 5.76009 1.55996 4.55245 2.37639 3.63377C2.96124 2.97568 3.63034 2.44135 4.16846 2.03202L2.53205 2.03202C2.25591 2.03202 2.03205 1.80816 2.03205 1.53202C2.03205 1.25588 2.25591 1.03202 2.53205 1.03202L5.53205 1.03202C5.80819 1.03202 6.03205 1.25588 6.03205 1.53202L6.03205 4.53202C6.03205 4.80816 5.80819 5.03202 5.53205 5.03202C5.25591 5.03202 5.03205 4.80816 5.03205 4.53202L5.03205 2.68645L5.03054 2.68759L5.03045 2.68766L5.03044 2.68767L5.03043 2.68767C4.45896 3.11868 3.76059 3.64538 3.15554 4.3262C2.44102 5.13021 1.90321 6.10154 1.90321 7.29677ZM13.0109 7.70321C13.0109 4.69115 10.8505 2.6296 8.40384 2.17029C8.12093 2.11718 7.93465 1.84479 7.98776 1.56188C8.04087 1.27898 8.31326 1.0927 8.59616 1.14581C11.4704 1.68541 14.0532 4.12605 14.0532 7.70321C14.0532 9.23988 13.3541 10.4475 12.5377 11.3662C11.9528 12.0243 11.2837 12.5586 10.7456 12.968L12.3821 12.968C12.6582 12.968 12.8821 13.1918 12.8821 13.468C12.8821 13.7441 12.6582 13.968 12.3821 13.968L9.38205 13.968C9.10591 13.968 8.88205 13.7441 8.88205 13.468L8.88205 10.468C8.88205 10.1918 9.10591 9.96796 9.38205 9.96796C9.65819 9.96796 9.88205 10.1918 9.88205 10.468L9.88205 12.3135L9.88362 12.3123C10.4551 11.8813 11.1535 11.3546 11.7585 10.6738C12.4731 9.86976 13.0109 8.89844 13.0109 7.70321Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})})}),s.jsx("div",{className:"col-span-5",children:s.jsxs(F,{children:[s.jsx(P,{className:"pb-0",children:s.jsxs(T,{className:"text-sm pt-0",children:[e("PoolForm:swappable")," ",s.jsx(ws,{classnamecontents:"text-blue-500",type:"text",text:o?l.symbol:a.symbol,hyperlink:`https://blocksights.info/#/assets/${o?l.id:a.id}`})]})}),s.jsx(v,{className:"text-lg",children:u[o?"readable_balance_a":"readable_balance_b"].split(" ")[0]})]})})]}):null}),h&&h.length?s.jsx(s.Fragment,{children:s.jsxs(I,{children:[s.jsx(J,{children:o?e("PoolForm:amountToSwap",{symbol:a?a.symbol:"???"}):e("PoolForm:amountToSwap",{symbol:l?l.symbol:"???"})}),s.jsx(K,{style:{marginTop:"0px"},children:o?e("PoolForm:enterAmountToSwap",{symbolA:a?a.symbol:"???",symbolB:l?l.symbol:"???"}):e("PoolForm:enterAmountToSwap",{symbolA:l?l.symbol:"???",symbolB:a?a.symbol:"???"})}),s.jsx(q,{onChange:n=>{const c=n.target.value;/^[0-9]*\.?[0-9]*$/.test(c)&&Es(c)},children:s.jsx("div",{className:"grid grid-cols-2",children:s.jsx("div",{className:"col-span-1",children:s.jsx(z,{label:o?e("PoolForm:amountToSwap",{symbol:a?a.symbol:"???"}):e("PoolForm:amountToSwap",{symbol:l?l.symbol:"???"}),value:g,placeholder:g,className:"mb-3"})})})}),s.jsx(Z,{})]})}):null,u?s.jsx(s.Fragment,{children:s.jsx(V,{control:B.control,name:"buyAmount",render:({field:n})=>s.jsxs(I,{children:[s.jsx(J,{children:e("PoolForm:totalAmount")}),s.jsx(K,{style:{marginTop:"0px"},children:o?e("PoolForm:totalAmountDescription",{symbolA:a?a.symbol:"???",symbolB:l?l.symbol:"???"}):e("PoolForm:totalAmountDescription",{symbolA:l?l.symbol:"???",symbolB:a?a.symbol:"???"})}),s.jsx(q,{children:s.jsx("div",{className:"grid grid-cols-2 mb-3 mt-3",children:s.jsx("div",{className:"col-span-1",children:he})})}),s.jsx(Z,{})]})})}):null,g&&u&&u.taker_fee_percent?s.jsx(s.Fragment,{children:s.jsx(V,{control:B.control,name:"poolFee",render:({field:n})=>s.jsxs(I,{children:[s.jsx(J,{children:e("PoolForm:poolFee")}),s.jsx(K,{style:{marginTop:"0px"},children:e("PoolForm:poolFeeDescription")}),s.jsx(q,{children:s.jsx("div",{className:"grid grid-cols-2 mb-3 mt-3",children:s.jsx("div",{className:"col-span-1",children:s.jsx(z,{disabled:!0,readOnly:!0,placeholder:"0",value:`${(u.taker_fee_percent/1e4*g).toFixed(o?a.precision:l.precision)} (${o?a.symbol:l.symbol}) (${u.taker_fee_percent/100}% ${e("PoolForm:fee")})`})})})}),s.jsx(Z,{})]})})}):null,d?s.jsx(V,{control:B.control,name:"networkFee",render:({field:n})=>s.jsxs(I,{children:[s.jsx(J,{children:e("PoolForm:networkFee")}),s.jsx(K,{style:{marginTop:"0px"},children:e("PoolForm:networkFeeDescription")}),s.jsx(q,{children:s.jsx("div",{className:"grid grid-cols-2 mb-3 mt-3",children:s.jsx("div",{className:"col-span-1",children:s.jsx(z,{disabled:!0,readOnly:!0,placeholder:`${Cs} ${e("PoolForm:feeCurrency")}`})})})}),r.id===r.referrer?s.jsx(Z,{children:e("PoolForm:rebate",{rebate:Cs*.8,currency:"BTS"})}):null,s.jsx(Z,{})]})}):null,!h||!g||!L||es!==!1?s.jsx(k,{className:"mt-5 mb-3",variant:"outline",disabled:!0,type:"submit",children:e("PoolForm:submit")}):s.jsx(k,{className:"mt-5 mb-3",variant:"outline",type:"submit",children:e("PoolForm:submit")})]})}),es?s.jsx(De,{operationName:"liquidity_pool_exchange",username:r.username,usrChain:r.chain,userID:r.id,dismissCallback:Ls,headerText:e("PoolForm:exchangeHeader",{sellAmount:g,symbolA:o?a.symbol:l.symbol,buyAmount:L,symbolB:o?l.symbol:a.symbol}),trxJSON:[{account:r.id,pool:h,amount_to_sell:{amount:Js(g,o?a.precision:l.precision),asset_id:o?a.id:l.id},min_to_receive:{amount:Js(L,o?l.precision:a.precision),asset_id:o?l.id:a.id},extensions:[]}]},`Exchanging${g}${o?a.symbol:l.symbol}for${L}${o?l.symbol:a.symbol}`):null,h&&!es?s.jsx(k,{variant:"outline",mt:"xl",onClick:()=>{Ms(!o),X(!0),setTimeout(()=>X(!1),500)},children:e("PoolForm:swapBuySell")}):null,h&&es?s.jsx(k,{variant:"outline",mt:"xl",disabled:!0,children:e("PoolForm:swapBuySell")}):null,h?s.jsx(ws,{variant:"outline",classnamecontents:"ml-2",type:"button",text:e("PoolForm:blocksightsPoolExplorer"),hyperlink:`https://blocksights.info/#/pools/${h}${r.chain!=="bitshares"?"?network=testnet":""}`}):null,u?s.jsxs(gs,{children:[s.jsx(Ns,{asChild:!0,children:s.jsx(k,{className:"ml-2",variant:"outline",children:e("PoolForm:poolJsonButton")})}),s.jsxs(_s,{className:"sm:max-w-[550px] bg-white",children:[s.jsxs(Ss,{children:[s.jsx(Fs,{children:e("PoolForm:liquidityPoolJsonTitle")}),s.jsx(Ps,{children:e("PoolForm:liquidityPoolJsonDescription")})]}),s.jsx("div",{className:"grid grid-cols-1",children:s.jsx("div",{className:"col-span-1",children:s.jsx(Os,{className:"h-72 rounded-md border",children:s.jsx("pre",{children:JSON.stringify(u,null,2)})})})})]})]}):null,E&&M?s.jsxs(gs,{children:[s.jsx(Ns,{asChild:!0,children:s.jsx(k,{className:"ml-2",variant:"outline",children:e("PoolForm:swappableAssetJsonButton")})}),s.jsxs(_s,{className:"sm:max-w-[550px] bg-white",children:[s.jsxs(Ss,{children:[s.jsx(Fs,{children:e("PoolForm:swappableAssetJsonTitle")}),s.jsx(Ps,{children:e("PoolForm:swappableAssetJsonDescription")})]}),s.jsx("div",{className:"grid grid-cols-1",children:s.jsx("div",{className:"col-span-1",children:s.jsx(Os,{className:"h-72 rounded-md border",children:s.jsx("pre",{children:l&&E&&a&&M&&ps?JSON.stringify({assetA:o?a:l,assetADetails:o?M:E,aBitassetData:o?ss:Y,assetB:o?l:a,assetBDetails:o?E:M,bBitassetData:o?Y:ss,poolShareDetails:ps},null,2):"Loading..."})})})})]})]}):null]}):null]})]})}),l&&a?s.jsx(Re,{assetA:o?a.symbol:l.symbol,assetAData:o?a:l,assetB:o?l.symbol:a.symbol,assetBData:o?l:a,chain:r.chain}):null,s.jsxs("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[h?s.jsx("div",{className:"grid grid-cols-1 gap-3",children:H&&u?s.jsxs(s.Fragment,{children:[s.jsx(Ds,{asset:o?l.symbol:a.symbol,assetData:o?l:a,assetDetails:o?E:M,bitassetData:o?Y:ss,marketSearch:G,chain:r.chain,usrBalances:H,type:"buy"}),s.jsx(Ds,{asset:o?a.symbol:l.symbol,assetData:o?a:l,assetDetails:o?M:E,bitassetData:o?ss:Y,marketSearch:G,chain:r.chain,usrBalances:H,type:"sell"})]}):s.jsxs(s.Fragment,{children:[s.jsxs(F,{children:[s.jsxs(P,{className:"pb-2 pt-4",children:[s.jsx(T,{children:e("PoolForm:quoteAsset")}),s.jsx(D,{className:"text-lg",children:e("PoolForm:loading")})]}),s.jsx(v,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(S,{className:"h-4 w-[250px]"}),s.jsx(S,{className:"h-4 w-[200px]"}),s.jsx(S,{className:"h-4 w-[250px]"}),s.jsx(S,{className:"h-4 w-[200px]"})]})})]}),s.jsxs(F,{children:[s.jsxs(P,{className:"pb-2 pt-4",children:[s.jsx(T,{children:e("PoolForm:baseAsset")}),s.jsx(D,{className:"text-lg",children:e("PoolForm:loading")})]}),s.jsx(v,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(S,{className:"h-4 w-[250px]"}),s.jsx(S,{className:"h-4 w-[200px]"}),s.jsx(S,{className:"h-4 w-[250px]"}),s.jsx(S,{className:"h-4 w-[200px]"})]})})]})]})}):null,s.jsx("div",{className:"grid grid-cols-1 gap-3",children:h&&l&&a?s.jsxs(s.Fragment,{children:[s.jsx("a",{href:o?`/dex/index.html?market=${a.symbol}_${l.symbol}`:`/dex/index.html?market=${l.symbol}_${a.symbol}`,children:s.jsxs(F,{children:[s.jsxs(P,{className:"pb-2 pt-4",children:[s.jsx(T,{children:e("PoolForm:tradeOnDex")}),s.jsx(D,{className:"text-sm",children:o?e("PoolForm:market",{symbolA:a.symbol,symbolB:l.symbol}):e("PoolForm:market",{symbolA:l.symbol,symbolB:a.symbol})})]}),s.jsx(v,{className:"text-sm pb-2",children:e("PoolForm:tradeOnDexDescription")})]})}),s.jsx("a",{href:o?`/dex/index.html?market=${d?.share_asset_symbol}_${a.symbol!=="BTS"?"BTS":a.symbol}`:`/dex/index.html?market=${d?.share_asset_symbol}_${l.symbol!=="BTS"?"BTS":l.symbol}`,children:s.jsxs(F,{children:[s.jsxs(P,{className:"pb-2 pt-4",children:[s.jsx(T,{children:e("PoolForm:purchaseStake")}),s.jsx(D,{className:"text-sm",children:e("PoolForm:shareAsset",{shareAsset:d?.share_asset_symbol})})]}),s.jsx(v,{className:"text-sm pb-2",children:e("PoolForm:purchaseStakeDescription")})]})}),s.jsx("a",{href:`/stake/index.html?pool=${h}`,children:s.jsxs(F,{children:[s.jsxs(P,{className:"pb-2 pt-4",children:[s.jsx(T,{children:e("PoolForm:stakeAssets")}),s.jsx(D,{className:"text-sm",children:e("PoolForm:shareAsset",{shareAsset:d?.share_asset_symbol})})]}),s.jsx(v,{className:"text-sm pb-2",children:e("PoolForm:stakeAssetsDescription")})]})}),s.jsxs(F,{children:[s.jsxs(P,{className:"pb-2 pt-4",children:[s.jsx(T,{children:e("PoolForm:borrowAssets")}),s.jsx(D,{className:"text-sm",children:e("PoolForm:borrowAssetsDescription")})]}),s.jsxs(v,{className:"text-sm pb-3",children:[s.jsx(as,{children:e("PoolForm:searchBorrowableAssets")}),s.jsx("br",{}),s.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=borrow&searchText=${o?a.symbol:l.symbol}`,children:s.jsx(U,{children:o?a.symbol:l.symbol})}),s.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=borrow&searchText=${a.symbol}`,children:s.jsx(U,{className:"ml-2 mt-1 mb-1",children:o?l.symbol:a.symbol})}),s.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=borrow&searchText=${d?.share_asset_symbol}`,children:s.jsx(U,{className:"ml-2 mt-1 mb-1",children:d?.share_asset_symbol})}),s.jsx("br",{}),s.jsx(as,{children:e("PoolForm:searchAcceptedCollateral")}),s.jsx("br",{}),s.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=collateral&searchText=${o?a.symbol:l.symbol}`,children:s.jsx(U,{children:o?a.symbol:l.symbol})}),s.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=collateral&searchText=${o?l.symbol:a.symbol}`,children:s.jsx(U,{className:"ml-2 mt-1",children:o?l.symbol:a.symbol})}),s.jsx("a",{href:`/borrow/index.html?tab=searchOffers&searchTab=collateral&searchText=${d?.share_asset_symbol}`,children:s.jsx(U,{className:"ml-2 mt-1",children:d?.share_asset_symbol})})]})]}),u&&G&&H?s.jsx(Ds,{asset:u.share_asset_symbol,assetData:u.share_asset_details,assetDetails:ps,bitassetData:null,marketSearch:G,chain:r.chain,usrBalances:H,type:"pool"}):s.jsxs(F,{children:[s.jsxs(P,{className:"pb-2 pt-4",children:[s.jsx(T,{children:e("PoolForm:poolShareAsset")}),s.jsx(D,{className:"text-lg",children:e("PoolForm:loading")})]}),s.jsx(v,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(S,{className:"h-4 w-[250px]"}),s.jsx(S,{className:"h-4 w-[200px]"}),s.jsx(S,{className:"h-4 w-[250px]"}),s.jsx(S,{className:"h-4 w-[200px]"})]})})]})]}):null})]})]}),s.jsx("div",{className:"grid grid-cols-1 mt-5 ml-8 mr-8",children:s.jsxs(F,{children:[s.jsxs(P,{className:"pb-3",children:[s.jsx(T,{children:e("PoolForm:risksTitle")}),s.jsx(D,{children:e("PoolForm:risksDescription")})]}),s.jsxs(v,{children:[s.jsxs("span",{className:"text-sm",children:[s.jsx(as,{className:"mb-0 pb-0 text-lg",children:e("PoolForm:liquidityPoolRisks")}),s.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-1 pl-2",children:[s.jsx("li",{children:e("PoolForm:liquidityPoolRisk1")}),s.jsx("li",{children:e("PoolForm:liquidityPoolRisk2")})]})]}),s.jsxs("span",{className:"text-sm",children:[s.jsx(as,{className:"mb-0 pb-0 text-lg",children:e("PoolForm:swappableAssetRisks")}),s.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-1 pl-2",children:[s.jsx("li",{children:e("PoolForm:swappableAssetRisk1")}),s.jsx("li",{children:o?e("PoolForm:swappableAssetRisk2",{symbol:a.symbol!=="BTS"?"BTS":a.symbol}):e("PoolForm:swappableAssetRisk2",{symbol:l.symbol!=="BTS"?"BTS":l.symbol})}),s.jsx("li",{children:e("PoolForm:swappableAssetRisk3")})]})]})]})]})})]})}export{gl as default};
